<root>
  <assembly culture="bg" name="Microsoft.SharePointLearningKit.resources" version="1.0.0.0">
    <key>ACQAAASAAACUAAAABgIAAAAkAABSU0ExAAQAAAEAAQCBPrkXiznyGTqeVlETHDcRRUrTL4/fDzNjU6FnYmrFwBQjm2AxJVTCevuJ4q7JU5lY425RPU/Nirg+g9/yYOMPQzB08pcEM+kt+nfwxGC/SpaKS/T8A9LqyU04k6o6yi8TnWxx/X60HKRs+7+l9Z1AK2pwuH3Y4KKy7ctJBsiwuQ==</key>
    <keytoken>q8TtGB1tapQ=</keytoken>
  </assembly>
  <resources name="Resources.FramesetResources.resources" type="StringTable">
    <NewDataSet>
      <MetaData>
        <Name>Resources.FramesetResources.resources</Name>
        <Type>StringTable</Type>
      </MetaData>
      <Resources>
        <ID>HID_SubmitAttemptMessageHtml</ID>
        <Source>After you submit this assignment, you will not be able to make any further changes.&lt;br&gt;&lt;br&gt;
        If you have completed the assignment, click &lt;b&gt;Submit&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        If you are not ready to submit the assignment, you can finish the assignment or close this window. Your work is already saved.
        </Source>
        <Translation>След като публикувате заданието, няма да можете да правите промени по него.&lt;br&gt;&lt;br&gt;
        Ако сте завършили заданието, натиснете &lt;b&gt;Публикувай&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        Ако не сте готови да публикувате заданието, можете да го довършите или да затворите този прозорец. Работата ви вече е записана.
        </Translation>
      </Resources>
      <Resources>
        <ID>FRM_NotAvailableHtml</ID>
        <Source>This training is not available. This may be because the training does not exist, or 
        you do not have permission to view it. 
    </Source>
        <Translation>Това обучение не е достъпно. Може да не съществува или да нямате права да го отворите.
    </Translation>
      </Resources>
      <Resources>
        <ID>TOC_InvalidJsVersion</ID>
        <Source>The browser has cached an old version of files required for this page. Please refresh your browser.</Source>
        <Translation>Браузерът е кеширал стара версия на необходимите файлове. Моля, опреснете вашия браузер.</Translation>
      </Resources>
      <Resources>
        <ID>TOC_SubmitAttempt</ID>
        <Source>Submit Training</Source>
        <Translation>Публикувай обучение</Translation>
      </Resources>
      <Resources>
        <ID>CON_AttachedFileDoesNotExistHtml</ID>
        <Source>The attached files listed below are empty or do not exist: 
        &lt;br&gt;&lt;br&gt; 
        Invalid files:</Source>
        <Translation>Прикрепените файлове са празни или не съществуват: 
        &lt;br&gt;&lt;br&gt; 
        Невалидни файлове:</Translation>
      </Resources>
      <Resources>
        <ID>FRM_InvalidParameterTitle</ID>
        <Source>Invalid Parameter Value</Source>
        <Translation>Невалидна стойност на параметър</Translation>
      </Resources>
      <Resources>
        <ID>CONV_SetValueException</ID>
        <Source>The value ({1}) is not a valid value for the {0} element. The data was not updated. More information: {2}</Source>
        <Translation>Стойността ({1}) не е валидна за елемента {0}. Данните не са обновени. За повече информация: {2}</Translation>
      </Resources>
      <Resources>
        <ID>CONV_SetValueInvalidValue</ID>
        <Source>The value ({0}) is not a valid value for the {1} element. The data was not updated.</Source>
        <Translation>Стойността ({0}) не е валидна за елемента {1}. Данните не са обновени.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ParameterRequiredMsg</ID>
        <Source>The {0} parameter is required in order to display the training.</Source>
        <Translation>Параметърът {0} е необходим, за да може да се стартира обучението.</Translation>
      </Resources>
      <Resources>
        <ID>CON_ResourceNotFoundTitle</ID>
        <Source>File Not Found</Source>
        <Translation>Файлът не е намерен</Translation>
      </Resources>
      <Resources>
        <ID>HID_TerminateFailed</ID>
        <Source>There was a problem processing a request from this page. Try selecting a different page.
    More information: {0}</Source>
        <Translation>Възникна проблем при обработката на заявката. Опитайте с друга страница.
    Повече информация: {0}</Translation>
      </Resources>
      <Resources>
        <ID>HID_ReloadCurrentContent</ID>
        <Source>Continue</Source>
        <Translation>Продължи</Translation>
      </Resources>
      <Resources>
        <ID>NAV_SaveTitle</ID>
        <Source>Save</Source>
        <Translation>Запис</Translation>
      </Resources>
      <Resources>
        <ID>CON_ContentCannotBeDisplayedMsg</ID>
        <Source>There is a problem accessing the content. It cannot be displayed.</Source>
        <Translation>Възникна проблем при достъпа до съдържанието. Не може да се изобрази.</Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitLink</ID>
        <Source>Submit</Source>
        <Translation>Публикувай</Translation>
      </Resources>
      <Resources>
        <ID>CON_PleaseWait</ID>
        <Source>Please wait...</Source>
        <Translation>Моля, изчакайте...</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ActivityIsNotActiveMsg</ID>
        <Source>The page cannot be displayed. Select a different page.</Source>
        <Translation>Страницата не може да бъде показана. Изберете друга страница.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_CannotDisplayContentTitle</ID>
        <Source>Training Not Available</Source>
        <Translation>Обучението не е достъпно</Translation>
      </Resources>
      <Resources>
        <ID>CONV_MappingRequired</ID>
        <Source>Interaction and objective information has not been properly initialized.</Source>
        <Translation>Взаимодействието и информацията за целите не са инициализирани коректно.</Translation>
      </Resources>
      <Resources>
        <ID>HID_SelectActivityTitleHtml</ID>
        <Source>Select an activity</Source>
        <Translation>Изберете дейност</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ParameterRequiredTitle</ID>
        <Source>{0} Parameter is Required</Source>
        <Translation>{0} параметърът е необходим</Translation>
      </Resources>
      <Resources>
        <ID>FRM_Title</ID>
        <Source>Basic Web Player Training</Source>
        <Translation>Начално обучение за уеб плеър</Translation>
      </Resources>
      <Resources>
        <ID>FRM_UnexpectedErrorTitle</ID>
        <Source>Error</Source>
        <Translation>Грешка</Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitPageMessageHtml</ID>
        <Source>You cannot make any further changes after you submit this training.&lt;br&gt;&lt;br&gt;
        If you have completed the training, click &lt;b&gt;Submit&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        If you are not ready to submit the training, click &lt;b&gt;Cancel&lt;/b&gt; to return to the previous page.
        </Source>
        <Translation>След като публикувате обучението няма да можете да правите промени по него.&lt;br&gt;&lt;br&gt;
        Ако сте приключили с обучението, натиснете &lt;b&gt;Публикувай&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        Ако не сте готови да публикувате обучението, натиснете &lt;b&gt;Отказ&lt;/b&gt; за да се върнете към предишната страница.
        </Translation>
      </Resources>
      <Resources>
        <ID>FRM_UnexpectedErrorNoException</ID>
        <Source>The training cannot be displayed. Try refreshing your browser.</Source>
        <Translation>Обучението не може да бъде показано. Опитайте да опресните вашият браузер.</Translation>
      </Resources>
      <Resources>
        <ID>NAV_MinimizeTitle</ID>
        <Source>Hide Contents</Source>
        <Translation>Скрий съдържанието</Translation>
      </Resources>
      <Resources>
        <ID>HID_SetValueMappingFailedHtml</ID>
        <Source>Could not set one or more values as requested. &lt;br&gt;&lt;br&gt;
    More information: </Source>
        <Translation>Не могат да се зададат един или повече параметри. &lt;br&gt;&lt;br&gt;
    Повече информация: </Translation>
      </Resources>
      <Resources>
        <ID>FRM_RAViewNotSupportedMsg</ID>
        <Source>Random access view is not supported in this application.</Source>
        <Translation>Не се поддържа произволен изглед в това приложение.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ResourceNotFound</ID>
        <Source>The requested resource could not be loaded.</Source>
        <Translation>Заявеният ресурс не може да се зареди.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ViewNotSupportedTitle</ID>
        <Source>View Not Supported</Source>
        <Translation>Изгледът не се поддържа</Translation>
      </Resources>
      <Resources>
        <ID>HID_SessionSuspendedTitle</ID>
        <Source>Training Suspended</Source>
        <Translation>Обучението е преустановено</Translation>
      </Resources>
      <Resources>
        <ID>HID_SessionAbandonedTitle</ID>
        <Source>Training Abandoned</Source>
        <Translation>Обучението е отказано</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ViewNotSupportedMsg</ID>
        <Source>The requested view is not supported in this application.</Source>
        <Translation>Желаният изглед не се поддържа от това приложение.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ExecuteViewSuspendedSessionMsg</ID>
        <Source>This training has been suspended. You can return later to resume the training.</Source>
        <Translation>Обучението беше преустановено. Можете да го подновите по-късно.</Translation>
      </Resources>
      <Resources>
        <ID>HID_SelectActivityMsgHtml</ID>
        <Source>Please select an activity to continue with the training.</Source>
        <Translation>Моля, изберете дейност, за да продължите с обучението.</Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitAttemptTitleHtml</ID>
        <Source>Submit this Assignment?
        </Source>
        <Translation>Публикуване на заданието?
        </Translation>
      </Resources>
      <Resources>
        <ID>FRM_ExecuteViewAbandonedSessionMsg</ID>
        <Source>This training has been abandoned. You cannot make any further changes.</Source>
        <Translation>Обучението беше отказано. Не можете да правите повече промени.</Translation>
      </Resources>
      <Resources>
        <ID>HID_InvalidActivityId</ID>
        <Source>The activity id {0} is not valid.</Source>
        <Translation>Номерът на дейността {0} не е валиден.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_SessionIsNotActiveMsg</ID>
        <Source>This training has been completed. You cannot make any further changes.</Source>
        <Translation>Обучението беше завършено. Не можете да правите повече промени.</Translation>
      </Resources>
      <Resources>
        <ID>CONV_SetValueInvalidName</ID>
        <Source>The element named '{0}' could not be recognized. The data was not updated.
    </Source>
        <Translation>Елементът '{0}' не може да бъде разпознат. Данните не са обновени.
    </Translation>
      </Resources>
      <Resources>
        <ID>NAV_MaximizeTitle</ID>
        <Source>Show Contents</Source>
        <Translation>Покажи съдържанието</Translation>
      </Resources>
      <Resources>
        <ID>CON_ContentCannotBeDisplayedTitle</ID>
        <Source>Cannot Access Content</Source>
        <Translation>Съдържанието не е достъпно</Translation>
      </Resources>
      <Resources>
        <ID>HID_MovePreviousFailedHtml</ID>
        <Source>You cannot navigate to the previous page at this time. Click Continue to return to the current page.</Source>
        <Translation>В момента не можете да преминете към предишната страница. Натиснете Продължи за да се върнете към текущата страница.</Translation>
      </Resources>
      <Resources>
        <ID>CONV_SetValueComment</ID>
        <Source>There was a problem adding or updating comment data associated with this page.
    More information: {0}</Source>
        <Translation>Възникна проблем при добавянето или обновяването на коментарите за страницата.
    Повече информация: {0}</Translation>
      </Resources>
      <Resources>
        <ID>HID_MoveToActivityFailedHtml</ID>
        <Source>You cannot navigate to the selected page at this time. Click Continue to return to the current page.</Source>
        <Translation>В момента не можете да преминете към избраната страница. Натиснете Продължи за да се върнете на текущата страница.</Translation>
      </Resources>
      <Resources>
        <ID>POST_SubmitHtml</ID>
        <Source>Submit</Source>
        <Translation>Публикувай</Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitPageMessageNoCurrentActivityHtml</ID>
        <Source>You cannot make any further changes after you submit this training.&lt;br&gt;&lt;br&gt;
        If you have completed the training, click &lt;b&gt;Submit&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        If you are not ready to submit the training, select an activity to continue the training.
        </Source>
        <Translation>След като публикувате обучението няма да можете да правите повече промени.&lt;br&gt;&lt;br&gt;
        Ако сте завършили обучението, натиснете &lt;b&gt;Публикувай&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        Ако не сте готови да публикувате обучението, изберете дейност за да продължите обучението.
        </Translation>
      </Resources>
      <Resources>
        <ID>CONV_SetValueInteraction</ID>
        <Source>There was a problem adding or updating interaction data associated with this page.
    More information: {0}</Source>
        <Translation>Възникна проблем при добавянето или обновяването на въведените данни за страницата.
    Повече информация: {0}</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ReviewViewNotSupportedMsg</ID>
        <Source>Review view is not supported in this application.</Source>
        <Translation>Не се поддържа преглед на съдържанието в това приложение.</Translation>
      </Resources>
      <Resources>
        <ID>CON_FileAttachmentErrorEndHtml</ID>
        <Source>Click Continue to return to the current page.</Source>
        <Translation>Натиснете Продължи за да се върнете към текущата страница.</Translation>
      </Resources>
      <Resources>
        <ID>CON_ResourceNotFoundMsg</ID>
        <Source>The page you requested cannot be found. Please select or move to a different page.</Source>
        <Translation>Заявената от Вас страница не може да бъде намерена. Моля, изберете друга страница.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_InvalidAttemptStatusForViewTitle</ID>
        <Source>Training Not Available</Source>
        <Translation>Обучението не е достъпно</Translation>
      </Resources>
      <Resources>
        <ID>HID_SetValuePostedDataInvalid</ID>
        <Source>Data posted about the data model was invalid.</Source>
        <Translation>Данните за модела са невалидни.</Translation>
      </Resources>
      <Resources>
        <ID>POST_ContinueHtml</ID>
        <Source>Cancel</Source>
        <Translation>Отказ</Translation>
      </Resources>
      <Resources>
        <ID>NAV_NextTitle</ID>
        <Source>Next</Source>
        <Translation>Следващ</Translation>
      </Resources>
      <Resources>
        <ID>HID_ServerErrorTitle</ID>
        <Source>Processing Error</Source>
        <Translation>Грешка при обработката</Translation>
      </Resources>
      <Resources>
        <ID>FRM_InvalidParameterMsg</ID>
        <Source>The value ({1}) is not valid for the {0} parameter.</Source>
        <Translation>Стойността ({1}) не е валида за параметъра {0}.</Translation>
      </Resources>
      <Resources>
        <ID>NAV_PrevTitle</ID>
        <Source>Previous</Source>
        <Translation>Предишен</Translation>
      </Resources>
      <Resources>
        <ID>CONV_InvalidViewOnSetValue</ID>
        <Source>The data on this page cannot be updated while reviewing the training.</Source>
        <Translation>Данните на тази страница не могат да се обновят, докато се преглежда обучението.</Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitPageTitleHtml</ID>
        <Source>Submit this Training?</Source>
        <Translation>Публикуване на обучението?</Translation>
      </Resources>
      <Resources>
        <ID>FRM_UnexpectedError</ID>
        <Source>An error occurred. More information: {0}</Source>
        <Translation>Възникна грешка. Повече информация: {0}</Translation>
      </Resources>
      <Resources>
        <ID>CON_FileAttachmentErrorTitleHtml</ID>
        <Source>File Attachment Error</Source>
        <Translation>Грешка с прикачен файл</Translation>
      </Resources>
      <Resources>
        <ID>HID_MoveNextFailedHtml</ID>
        <Source>You cannot navigate to the next page at this time. Click Continue to return to the current page.</Source>
        <Translation>В момента не можете да преминете към следващата страница. Натиснете Продължи за да се върнете към текущата страница.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_NotAvailableTitleHtml</ID>
        <Source>Training Not Available</Source>
        <Translation>Обучението не е достъпно</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ExecuteViewCompletedSessionMsg</ID>
        <Source>This training has been completed. You cannot make any further changes.</Source>
        <Translation>Обучението беше изпълнено. Не можете да правите повече промени.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_UnknownExceptionMsg</ID>
        <Source>An error occurred. More information: {0}</Source>
        <Translation>Възникна грешка. Повече информация: {0}</Translation>
      </Resources>
      <Resources>
        <ID>HID_SessionCompletedTitle</ID>
        <Source>Training Completed</Source>
        <Translation>Обучението е изпълнено</Translation>
      </Resources>
      <Resources>
        <ID>CONV_SetValueObjective</ID>
        <Source>There was a problem adding or updating objective data associated with this page.
    More information: {0}</Source>
        <Translation>Възникна грешка при добавянето или обновяването на въведените данни.
    Повече информация: {0}</Translation>
      </Resources>
      <Resources>
        <ID>CONV_SetValueReadOnly</ID>
        <Source>The {0} element cannot be modified. The data was not updated.</Source>
        <Translation>Елементът {0} не може да се променя. Данните не са обновени.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_UnknownExceptionTitle</ID>
        <Source>Error</Source>
        <Translation>Грешка</Translation>
      </Resources>
    </NewDataSet>
  </resources>
  <resources name="Resources.Properties.AppResources.resources" type="StringTable">
    <NewDataSet>
      <MetaData>
        <Name>Resources.Properties.AppResources.resources</Name>
        <Type>StringTable</Type>
      </MetaData>
      <Resources>
        <ID>ConfigureDescription</ID>
        <Source>Use this page to configure SharePoint Learning Kit (SLK) for one or more Site Collections.</Source>
        <Translation>Използвайте тази страница за да конфигурирате SharePoint Learning Kit (SLK) за една или повече колекции от сайтове.</Translation>
      </Resources>
      <Resources>
        <ID>InvalidSlkSettingsFilePath</ID>
        <Source>The SLK Settings file path specified does not exist.</Source>
        <Translation>Папката на файла с настройките на SLK не съществува.</Translation>
      </Resources>
      <Resources>
        <ID>LobbylblStatus</ID>
        <Source>Status</Source>
        <Translation>Статус</Translation>
      </Resources>
      <Resources>
        <ID>LobbyBeginAssignmentText</ID>
        <Source>Begin Assignment</Source>
        <Translation>Започни задание</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesPointsNoValuePointsPossible</ID>
        <Source>--/{0:R}</Source>
        <Translation>--/{0:R}</Translation>
      </Resources>
      <Resources>
        <ID>AdminErrorPageHtml</ID>
        <Source>&lt;html&gt;&lt;body style="font: 10pt Tahoma"&gt;{0}&lt;/body&gt;&lt;/html&gt;</Source>
        <Translation>&lt;html&gt;&lt;body style="font: 10pt Tahoma"&gt;{0}&lt;/body&gt;&lt;/html&gt;</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelLearnersText</ID>
        <Source>Learners:</Source>
        <Translation>Обучаеми:</Translation>
      </Resources>
      <Resources>
        <ID>AppLearnersRequiredError</ID>
        <Source>The assignment must be assigned to at least one learner.</Source>
        <Translation>Заданието трябва да бъде зададено на поне един обучаем.</Translation>
      </Resources>
      <Resources>
        <ID>AppDueDateError</ID>
        <Source>The due date must be later than the start date.</Source>
        <Translation>Крайната дата трябва да е след началната.</Translation>
      </Resources>
      <Resources>
        <ID>UnexpectedDBNull</ID>
        <Source>Unexpected DBNull value</Source>
        <Translation>Неочаквана DBNull стойност</Translation>
      </Resources>
      <Resources>
        <ID>LobbyReviewAssignmentText</ID>
        <Source>Review Assignment</Source>
        <Translation>Прегледай заданието</Translation>
      </Resources>
      <Resources>
        <ID>AssignmentNotFoundInDatabase</ID>
        <Source>The assignment (ID {0}) does not exist or you may not have permission to access it.</Source>
        <Translation>Заданието (ID {0}) не съществува или нямате право на достъп.</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesUndefinedQuery</ID>
        <Source>Undefined query: {0}</Source>
        <Translation>Неопределен въпрос/заявка: {0}</Translation>
      </Resources>
      <Resources>
        <ID>ActionsWarning</ID>
        <Source>Some errors in this learning resource were repaired, but the learning resource may not function as expected.</Source>
        <Translation>Някои от грешките в този учебен ресурс бяха поправени, но може да не функционира според очакванията.</Translation>
      </Resources>
      <Resources>
        <ID>SlkEventLogSource</ID>
        <Source>SharePoint Learning Kit</Source>
        <Translation>SharePoint Learning Kit</Translation>
      </Resources>
      <Resources>
        <ID>SeriousErrorInEventLog</ID>
        <Source>A serious error occurred.  Please contact your system administrator.  More information has been written to the server event log.</Source>
        <Translation>Възникна критична грешка. Моля, свържете се с вашия системен администратор. Подробна информация е съхранена в записките със събития на сървъра.</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelPointsText</ID>
        <Source>Points</Source>
        <Translation>Точки</Translation>
      </Resources>
      <Resources>
        <ID>AppPageCreationTitle</ID>
        <Source>Create an Assignment</Source>
        <Translation>Създай задание</Translation>
      </Resources>
      <Resources>
        <ID>GradingReactivateMessage</ID>
        <Source>Reactivating this assignment erases any scoring changes made by instructors and returns the assignment to the learner to complete again.</Source>
        <Translation>Повторното активиране на заданието променя точките, дадени от инструкторите и го връща на обучаемия за повторно изпълнение.</Translation>
      </Resources>
      <Resources>
        <ID>GradingCollectText</ID>
        <Source>Collect All</Source>
        <Translation>Събери всички</Translation>
      </Resources>
      <Resources>
        <ID>SlkExAlwpSqlDeadLockError</ID>
        <Source>The server is currently busy. Please refresh your browser.</Source>
        <Translation>Сървърът в момента е натоварен. Моля, опреснете браузъра.</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesValueNullifIsNull</ID>
        <Source>value and macroName arguments must be null if oper is "IsNull"</Source>
        <Translation>value и macroName аргументите трябва да са нулеви, ако oper е "IsNull"</Translation>
      </Resources>
      <Resources>
        <ID>LearnerAssignmentStatusCompleted</ID>
        <Source>Submitted</Source>
        <Translation>Публикувано</Translation>
      </Resources>
      <Resources>
        <ID>AlwpSummaryWidthDisplayName</ID>
        <Source>Query Control Width</Source>
        <Translation>Широчина на контролния въпрос</Translation>
      </Resources>
      <Resources>
        <ID>LobbySubmitToolTip</ID>
        <Source>Submit (Alt+S)</Source>
        <Translation>Публикувай (Alt+S)</Translation>
      </Resources>
      <Resources>
        <ID>ActionslnkMRUAddSite</ID>
        <Source>Add a site to this list...</Source>
        <Translation>Добави сайт към списъка...</Translation>
      </Resources>
      <Resources>
        <ID>LobbyPageTitleinTitlePage</ID>
        <Source>Complete Assignment</Source>
        <Translation>Изпълнено задание</Translation>
      </Resources>
      <Resources>
        <ID>LobbyDeleteToolTip</ID>
        <Source>Delete this assignment and all learner work (Alt+X)</Source>
        <Translation>Изтрий това задание и цялата работа на обучаемия (Alt+X)</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesCannotSortColumnType</ID>
        <Source>Cannot sort on a column of type: {0}</Source>
        <Translation>Не може да се сортира по колона от тип: {0}</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureLabelPleaseWait</ID>
        <Source>Please wait while your changes are processed.</Source>
        <Translation>Моля, изчакайте докато се обработят вашите промени.</Translation>
      </Resources>
      <Resources>
        <ID>ActionslnkMRUTestLink</ID>
        <Source>Test this link (opens in new window)</Source>
        <Translation>Тествай връзката (в нов прозорец)</Translation>
      </Resources>
      <Resources>
        <ID>SharePointFarmNotFound</ID>
        <Source>SharePoint farm not found</Source>
        <Translation>Не е намерена SharePoint ферма</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureTxtDatabaseServerToolTip</ID>
        <Source>Database Server</Source>
        <Translation>Сървър за база данни</Translation>
      </Resources>
      <Resources>
        <ID>SlkSiteNotFound</ID>
        <Source>The site {0} does not exist or is not a valid SharePoint site.</Source>
        <Translation>Сайтът {0} не съществува или не е SharePoint сайт.</Translation>
      </Resources>
      <Resources>
        <ID>DomainGroupEnumSkippedDueToTimeout</ID>
        <Source>Enumeration of the members of domain group "{0}" skipped due to timeout</Source>
        <Translation>Изброяването на членовете на домейн групата "{0}" е пропуснато поради изтичане на времето</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesColumnReturnedNull</ID>
        <Source>{0} column returned NULL</Source>
        <Translation>{0} колоната върна NULL</Translation>
      </Resources>
      <Resources>
        <ID>GradingDeleteToolTip</ID>
        <Source>Delete this assignment and all learner work (Alt+X)</Source>
        <Translation>Изтрий това задание и цялата работа на обучаемия (Alt+X)</Translation>
      </Resources>
      <Resources>
        <ID>AppRootActivityIDNotFound</ID>
        <Source>QueryString Missing RootActivityId: Activity Package Item Identifier cannot be empty or null.</Source>
        <Translation>QueryString няма RootActivityId: Activity Package Item Identifier не може да е празен или нула.</Translation>
      </Resources>
      <Resources>
        <ID>AppNotAnInstructorInCurrentSiteError</ID>
        <Source>The available learners and instructors for this site could not be displayed because you are not an instructor on the site.</Source>
        <Translation>Обучаемите и инструкторите в този сайт не могат да се изведат защото не сте инструктор.</Translation>
      </Resources>
      <Resources>
        <ID>GradingGradedScore</ID>
        <Source>{0:F2}</Source>
        <Translation>{0:F2}</Translation>
      </Resources>
      <Resources>
        <ID>GradingStatusHeaderText</ID>
        <Source>Status</Source>
        <Translation>Статус</Translation>
      </Resources>
      <Resources>
        <ID>GradingFinalScoreHeaderText</ID>
        <Source>Final Score</Source>
        <Translation>Краен резултат</Translation>
      </Resources>
      <Resources>
        <ID>FileNotFound</ID>
        <Source>File not found</Source>
        <Translation>Не е намерен файл</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureTxtDatabaseNameToolTip</ID>
        <Source>Database Name</Source>
        <Translation>Име на базата данни</Translation>
      </Resources>
      <Resources>
        <ID>DownloadSettingsError</ID>
        <Source>Error in DownloadSettings.aspx: {0}</Source>
        <Translation>Грешка в DownloadSettings.aspx: {0}</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureImagePleaseWait</ID>
        <Source>Please wait while your changes are processed.</Source>
        <Translation>Моля, изчакайте докато се обработят вашите промени.</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesDuplicateQuerySetName</ID>
        <Source>Duplicate query set name: {0}</Source>
        <Translation>Повтарящо се име на серия въпроси/заявки: {0}</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureChkCreatePermissionsLabelText</ID>
        <Source>Create permissions</Source>
        <Translation>Създай права</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesColumnNotDefined</ID>
        <Source>Column "{0}" not defined in LearningStore view "{1}"</Source>
        <Translation>Колоната "{0}" не е дефинирана в LearningStore изглед "{1}"</Translation>
      </Resources>
      <Resources>
        <ID>AlwpListScopeDisplayName</ID>
        <Source>Show Only This Site's Assignments</Source>
        <Translation>Покажи заданията само за този сайт</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureLabelConfigurationComplete</ID>
        <Source>Configuration complete.</Source>
        <Translation>Конфигурирането приключи.</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureInputInstructorPermissionsLabelText</ID>
        <Source>Instructor permission:</Source>
        <Translation>Права на инструктор:</Translation>
      </Resources>
      <Resources>
        <ID>AppSPWebNotEnabled</ID>
        <Source>The site {0} has not been enabled for e-learning.</Source>
        <Translation>За сайта {0} не е включено електронно обучение.</Translation>
      </Resources>
      <Resources>
        <ID>AppNavigateToSite</ID>
        <Source>Navigate to site:</Source>
        <Translation>Премини към сайт:</Translation>
      </Resources>
      <Resources>
        <ID>GradingCollectMessage</ID>
        <Source>Collecting assignments will prevent learners from continuing to work on them.</Source>
        <Translation>Събирането на задания ще ограничи достъпа на обучаемите до тях.</Translation>
      </Resources>
      <Resources>
        <ID>LobbyResumeAssignmentText</ID>
        <Source>Resume Assignment</Source>
        <Translation>Продължи заданието</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelPointsPossible</ID>
        <Source>points possible</Source>
        <Translation>възможни точки</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelTitleText</ID>
        <Source>Title</Source>
        <Translation>Заглавие</Translation>
      </Resources>
      <Resources>
        <ID>LobbylblSite</ID>
        <Source>Site</Source>
        <Translation>Сайт</Translation>
      </Resources>
      <Resources>
        <ID>AlwpUnknownSite</ID>
        <Source>Unknown Site {0}</Source>
        <Translation>Неизвестен сайт {0}</Translation>
      </Resources>
      <Resources>
        <ID>SomeLearnerAssignmentsNotSaved</ID>
        <Source>Some learners' assignments could not be saved: {0}</Source>
        <Translation>Някои от заданията на обучаемите не могат да бъдат записани: {0}</Translation>
      </Resources>
      <Resources>
        <ID>GradingPageTitleinTitlePage</ID>
        <Source>Grade Assignment</Source>
        <Translation>Оценка на заданието</Translation>
      </Resources>
      <Resources>
        <ID>LobbyDeleteAssignmentText</ID>
        <Source>Delete Assignment</Source>
        <Translation>Изтрий заданието</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesQuerySetSameAsQuery</ID>
        <Source>Query set name cannot be the same as a query name: {0}</Source>
        <Translation>Име на серия от въпроси/заявки не може да се повтаря с име на въпрос/заявка: {0}</Translation>
      </Resources>
      <Resources>
        <ID>AlwpQuerySetNotFound</ID>
        <Source>The query or query set, {0}, does not exist. Open the tool pane to specify a different query set override or remove the entry to use the default query set.</Source>
        <Translation>Въпросът/Заявката или серията от въпроси/заявки {0} не съществува. Отворете панела с инструменти, за да определите друга серия от въпроси/заявки, отменете или премахнете входния елемент за използване на серията от въпроси/заявки по подразбиране</Translation>
      </Resources>
      <Resources>
        <ID>LearnerAssignmentStatusFinal</ID>
        <Source>Final</Source>
        <Translation>Резултат</Translation>
      </Resources>
      <Resources>
        <ID>CtrlChkBoxTextShowAnswers</ID>
        <Source>Show learners the correct answers to autograded questions when the assignment is final (Class Server learning resources only)</Source>
        <Translation>Покажете на обучаемите верните отговори на автоматично оценяваните въпроси, когато това е краен тест(само за Class Server ресурси)</Translation>
      </Resources>
      <Resources>
        <ID>AppPageCreationDescription</ID>
        <Source>This page helps you create an assignment and deliver it to learners. You can specify
    properties of your assignment such as start date, due date, and instructions to
    the learner, and then choose who will be instructors or learners for this assignment.</Source>
        <Translation>Тази страница Ви помага да създадете задание и да го представите на обучаемите. Можете да посочите неговите свойства, като начална дата, крайна дата и инструкции за обучаемия и след това да изберете кои ще са инструктори и обучаеми.</Translation>
      </Resources>
      <Resources>
        <ID>LobbySubmitMessage</ID>
        <Source>Submitting an assignment will send it to the instructor. Once it is submitted, you will no longer be able to work on it.</Source>
        <Translation>Публикуването на задание ще го изпрати на инструктора. След неговото публикуване няма да можете да работите с него.</Translation>
      </Resources>
      <Resources>
        <ID>AppInstructorPermissonNotFound</ID>
        <Source>You cannot assign to this site because you are not an instructor.</Source>
        <Translation>Не можете да добавяте към този сайт, защото не сте инструктор.</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureInputSiteSelectorTitle</ID>
        <Source>Site Collection</Source>
        <Translation>Колекция от сайтове</Translation>
      </Resources>
      <Resources>
        <ID>AppEnumerationWarning</ID>
        <Source>The list of instructors or learners may be incomplete because the following groups could not be read:
{0}
More information may be available in the server event log.</Source>
        <Translation>Списъкът от инструктори или обучаеми може да не е пълен защото следните групи не могат да бъдат прочетени:
{0}
За повече инфромация се обърнете към записките за събитията на сървъра.</Translation>
      </Resources>
      <Resources>
        <ID>CreateDatabaseException</ID>
        <Source>An exception occurred while creating a database:

{0}</Source>
        <Translation>Възникна изключение при създаването на базата данни:

{0}</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesMacroNameNotProvided</ID>
        <Source>if noConditionOnNull is true, macroName must be provided</Source>
        <Translation>ако noConditionOnNull е истина, трябва да е посочен macroName</Translation>
      </Resources>
      <Resources>
        <ID>GradingPageDescription</ID>
        <Source>Use this page to grade assignments you've assigned. You can also edit an assignment's properties to change its description, due dates, who it's assigned to, etc.</Source>
        <Translation>Използвайте тази страница за оценяване на вашите задания. Можете също да промените неговите свойства.</Translation>
      </Resources>
      <Resources>
        <ID>DeleteDatabaseException</ID>
        <Source>An exception occurred while deleting a database:

{0}</Source>
        <Translation>Възникна изключение при изтриването на базата данни:

{0}</Translation>
      </Resources>
      <Resources>
        <ID>GradingActionNotSubmittedToolTip</ID>
        <Source>Prevents the learner from continuing to work on the assignment, and allows you to grade it</Source>
        <Translation>Забранява на потребителя да продължи заданието и дава възможност да поставите оценка</Translation>
      </Resources>
      <Resources>
        <ID>GradingActionTextSubmitted</ID>
        <Source>Return</Source>
        <Translation>Връщане</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureChkCreateDatabaseLabelText</ID>
        <Source>Create a new database</Source>
        <Translation>Създай нова база данни</Translation>
      </Resources>
      <Resources>
        <ID>IncorrectLocationStringSyntax</ID>
        <Source>Incorrect location string syntax</Source>
        <Translation>Невалиден синтаксис за местоположението</Translation>
      </Resources>
      <Resources>
        <ID>CtrlChkBoxTextAutoReturnAssignments</ID>
        <Source>Automatically return learner assignments when they are submitted.</Source>
        <Translation>Автоматично връщане на заданието при тяхното изпълнение.</Translation>
      </Resources>
      <Resources>
        <ID>GradingSuccessStatusUnSatisfiedToolTip</ID>
        <Source>Primary objective not satisfied</Source>
        <Translation>Основната цел не е изпълнена</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesSettingsExceptionDefaultFormat</ID>
        <Source>{0}</Source>
        <Translation>{0}</Translation>
      </Resources>
      <Resources>
        <ID>GradingGradedScoreToolTip</ID>
        <Source>{0:R} {1}</Source>
        <Translation>{0:R} {1}</Translation>
      </Resources>
      <Resources>
        <ID>ActionslblMRUCurrentSite</ID>
        <Source>(Current Site)</Source>
        <Translation>(Текущ сайт)</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelDistributeAssignmentHeader</ID>
        <Source>Distribute the Assignment</Source>
        <Translation>Разпространение на задание</Translation>
      </Resources>
      <Resources>
        <ID>LobbyInvalidSite</ID>
        <Source>This Web site is not accessible.</Source>
        <Translation>Този уеб сайт не е достъпен.</Translation>
      </Resources>
      <Resources>
        <ID>GradingGradedScoreHeaderText</ID>
        <Source>Graded Score</Source>
        <Translation>Краен резултат</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesPointsNoValue</ID>
        <Source>--</Source>
        <Translation>--</Translation>
      </Resources>
      <Resources>
        <ID>ActionsNotEnabled</ID>
        <Source>The site ({0}) is not configured to use SharePoint Learning Kit. Administrators can use SharePoint Central Administration to configure SharePoint Learning Kit.</Source>
        <Translation>Сайтът ({0}) не е конфигуриран за работа с SharePoint Learning Kit. Администраторите могат да използват SharePoint Central Administration за конфигуриране на SharePoint Learning Kit.</Translation>
      </Resources>
      <Resources>
        <ID>LobbyDeleteMessage</ID>
        <Source>Deleting an assignment will delete all the associated learner data, including learner work and grades for the assignment. You cannot recover deleted information. Click OK to delete the assignment.</Source>
        <Translation>Изтриването на задание ще изтрие всички данни свързани с обучаемия, включително работата и оценките на обучаемия за това задание. Не можете да възстановите изтритата информация. Натиснете ОК, за да изтриете заданието.</Translation>
      </Resources>
      <Resources>
        <ID>GradingStatusSubmittedToolTip</ID>
        <Source>Grade learner work</Source>
        <Translation>Оценете работата на обучаемия</Translation>
      </Resources>
      <Resources>
        <ID>LobbyBeginAssignmentToolTip</ID>
        <Source>Begin assignment (Alt+I)</Source>
        <Translation>Започни задание (Alt+I)</Translation>
      </Resources>
      <Resources>
        <ID>ActionslblAssignSelf</ID>
        <Source>The assignment will appear with all your other assignments.</Source>
        <Translation>Заданието ще се изведе заедно с всички ваши задания.</Translation>
      </Resources>
      <Resources>
        <ID>ActionsPageDescription</ID>
        <Source>This page allows you to use a document for e-learning. You can assign
	the document to yourself or to someone else. When you assign a document to someone else, you can specify
	a SharePoint site where the assignment will appear, and choose members of that site to be
	instructors or learners.</Source>
        <Translation>Тази страница ви позволява да използвате документ за обучение. Можете да зададете документа на себе си или на някой друг. Когато задавате документ на някой друг, можете да посочите SharePoint сайт, в който да се изведе заданието и да изберете членове на този сайт в ролята на инструктори и обучаеми.</Translation>
      </Resources>
      <Resources>
        <ID>AppDescMaxLengthError</ID>
        <Source>The description exceeds the maximum length of 4096 characters.</Source>
        <Translation>Описанието надвишава максималния лимит от 4096 символа.</Translation>
      </Resources>
      <Resources>
        <ID>GradingReturnText</ID>
        <Source>Return All</Source>
        <Translation>Върни всички</Translation>
      </Resources>
      <Resources>
        <ID>GradingCollectToolTip</ID>
        <Source>Collect assignments from all learners (Alt+C)</Source>
        <Translation>Събери заданията на всички обучаеми (Alt+C)</Translation>
      </Resources>
      <Resources>
        <ID>AppTitleMaxLengthError</ID>
        <Source>The title exceeds the maximum length of 1000 characters.</Source>
        <Translation>Заглавието надвишава лимита от 1000 символа.</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelGroupsText</ID>
        <Source>Groups:</Source>
        <Translation>Групи:</Translation>
      </Resources>
      <Resources>
        <ID>ActionslnkMRUShowAll</ID>
        <Source>(show all sites)</Source>
        <Translation>(покажи всички сайтове)</Translation>
      </Resources>
      <Resources>
        <ID>GradingInvalidAssignmentId</ID>
        <Source>The assignment (ID {0}) does not exist or you may not have permission to access it.</Source>
        <Translation>Заданието (ID {0}) не съществува или нямате достъп до него.</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesUnknownRenderAsValue</ID>
        <Source>Unknown RenderAs value: {0}</Source>
        <Translation>Невалидна RenderAs стойност: {0}</Translation>
      </Resources>
      <Resources>
        <ID>GradingStatusFinalToolTip</ID>
        <Source>View and Grade returned work</Source>
        <Translation>Прегледай и оцени публикуваните материали</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureLinkCurrentSettingsFileText</ID>
        <Source>Click here to download the current SLK Settings file</Source>
        <Translation>Натиснете тук, за да запишете файла с текущите настройки на SLK</Translation>
      </Resources>
      <Resources>
        <ID>AlwpDisplaySummaryDescription</ID>
        <Source>Show the control for selecting a query to display in the assignment list.</Source>
        <Translation>Покажи управлението за избор на въпрос, който да се покаже в заданието.</Translation>
      </Resources>
      <Resources>
        <ID>GradingLearnerHeaderText</ID>
        <Source>Learner</Source>
        <Translation>Обучаем</Translation>
      </Resources>
      <Resources>
        <ID>AlwpNoItemFound</ID>
        <Source>There are no items to show in this view.</Source>
        <Translation>Няма елементи за изобразяване в този изглед.</Translation>
      </Resources>
      <Resources>
        <ID>SlkExUserNotFound</ID>
        <Source>You must sign in to use SharePoint Learning Kit.</Source>
        <Translation>Трябва да се регистрирате, за да използвате SharePoint Learning Kit.</Translation>
      </Resources>
      <Resources>
        <ID>LongDateShortTime</ID>
        <Source>{0:D}, {0:t}</Source>
        <Translation>{0:D}, {0:t}</Translation>
      </Resources>
      <Resources>
        <ID>ActionslblMRUAddress</ID>
        <Source>Type the address of the SharePoint site you'd like to add.</Source>
        <Translation>Напишете адреса на сайта, който искате да добавите.</Translation>
      </Resources>
      <Resources>
        <ID>AlwpWepPartToolTipFormat</ID>
        <Source>{0} - {1}</Source>
        <Translation>{0} - {1}</Translation>
      </Resources>
      <Resources>
        <ID>LobbySubmitText</ID>
        <Source>Submit</Source>
        <Translation>Публикувай</Translation>
      </Resources>
      <Resources>
        <ID>GradingEditText</ID>
        <Source>Edit Properties</Source>
        <Translation>Редактирай свойства</Translation>
      </Resources>
      <Resources>
        <ID>GradingFinalScoreSubmittedToolTip</ID>
        <Source>To override autograding, enter a final score here.</Source>
        <Translation>За да отмените автоматичното оценяване, въведете тук крайна оценка.</Translation>
      </Resources>
      <Resources>
        <ID>ActionsPageTitle</ID>
        <Source>E-Learning Actions</Source>
        <Translation>E-Learning действия</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelDueText</ID>
        <Source>Due</Source>
        <Translation>Срок</Translation>
      </Resources>
      <Resources>
        <ID>AccessDenied</ID>
        <Source>Access is denied</Source>
        <Translation>Достъпът е забранен</Translation>
      </Resources>
      <Resources>
        <ID>SlkSettingsFileError</ID>
        <Source>Problem found in SLK Settings file: {0}</Source>
        <Translation>Открит е проблем във файла с настройките на SLK: {0}</Translation>
      </Resources>
      <Resources>
        <ID>GradinglblPoints</ID>
        <Source>Points</Source>
        <Translation>Точки</Translation>
      </Resources>
      <Resources>
        <ID>SlkErrorTypeInfoToolTip</ID>
        <Source>Note</Source>
        <Translation>Бележка</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesPointsPossible</ID>
        <Source>{0}/{1:R}</Source>
        <Translation>{0}/{1:R}</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelLearnerDesc</ID>
        <Source>Learners can launch and interact with the assignment, and will be listed in the grading view.</Source>
        <Translation>Обучаемите могат да стартират и работят със заданието и ще бъдат извеждани в списъка с оценки.</Translation>
      </Resources>
      <Resources>
        <ID>LobbyResumeAssignmentToolTip</ID>
        <Source>Resume Assignment (Alt+I)</Source>
        <Translation>Поднови задание (Alt+I)</Translation>
      </Resources>
      <Resources>
        <ID>AppPageCreationTitleInTitleArea</ID>
        <Source>Create an Assignment</Source>
        <Translation>Създай задание</Translation>
      </Resources>
      <Resources>
        <ID>SPWebDoesNotMatchSlkSPSite</ID>
        <Source>The SPWeb does not match the site specified in the constructor of the SlkStore.</Source>
        <Translation>SPWeb не съвпада с посоченият в конструктора на SlkStore сайт.</Translation>
      </Resources>
      <Resources>
        <ID>ActionsHideDetails</ID>
        <Source>(hide details...)</Source>
        <Translation>(скрий детайли...)</Translation>
      </Resources>
      <Resources>
        <ID>AlwpQuerySetOverrideDisplayName</ID>
        <Source>Query Set Override</Source>
        <Translation>Отмени серия от въпроси</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesPointsValue</ID>
        <Source>{0:R}</Source>
        <Translation>{0:R}</Translation>
      </Resources>
      <Resources>
        <ID>GradingPageTitle</ID>
        <Source>Grade Assignment</Source>
        <Translation>Оцени заданието</Translation>
      </Resources>
      <Resources>
        <ID>SlkLearnerPermissionDescription</ID>
        <Source>Appears as a potential learner when new assignments are created using SharePoint Learning Kit.</Source>
        <Translation>Участва като потенциален обучаем при създаване на нови задания с SharePoint Learning Kit.</Translation>
      </Resources>
      <Resources>
        <ID>GradinglblStart</ID>
        <Source>Start</Source>
        <Translation>Начало</Translation>
      </Resources>
      <Resources>
        <ID>LobbylblAutoReturn</ID>
        <Source>The assignment will be returned to the learner automatically.</Source>
        <Translation>Заданието ще бъде върнато автоматично на обучаемия.</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesConditionException</ID>
        <Source>At most one of the attributes "Value" or "MacroName" may be provided, and neither may be provided if "Operator" is "IsNull" or "IsNotNull"; "MacroName" must be provided if "NoConditionOnNull" is "true"</Source>
        <Translation>Поне един от атрибутите "Value" или "MacroName" трябва да са указани или нито един да не е указан, ако "Operator" е "IsNull" или "IsNotNull"; "MacroName" трябва да е указано, ако "NoConditionOnNull" е "true"</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesMacroNotDefined</ID>
        <Source>Macro not defined: {0}</Source>
        <Translation>Не е дефиниран макрос: {0}</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesSettingsException</ID>
        <Source>line {0}: {1}</Source>
        <Translation>линия {0}: {1}</Translation>
      </Resources>
      <Resources>
        <ID>LobbyReviewAssignmentToolTip</ID>
        <Source>Review Assignment (Alt+I)</Source>
        <Translation>Прегледай заданието (Alt+I)</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureInputSlkSettingsFileLabelText</ID>
        <Source>New SLK Settings file:</Source>
        <Translation>Файл с нови настройки на SLK:</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureTitle</ID>
        <Source>Configure SharePoint Learning Kit</Source>
        <Translation>Настройки на SharePoint Learning Kit</Translation>
      </Resources>
      <Resources>
        <ID>LobbyReviewAssignmentToolTipCompleted</ID>
        <Source>You cannot review the assignment until it has been returned.</Source>
        <Translation>Не можете да прегледате заданието, докато не бъде върнато.</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelStatusText</ID>
        <Source>Status</Source>
        <Translation>Статус</Translation>
      </Resources>
      <Resources>
        <ID>GradingDeleteAccessKey</ID>
        <Source>X</Source>
        <Translation>X</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureBtnOKText</ID>
        <Source>OK</Source>
        <Translation>OK</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelInstructorDesc</ID>
        <Source>Instructors can grade, edit and change users for the assignment.</Source>
        <Translation>Инструкторите могат да оценяват, редактират и променят потребителите за заданието.</Translation>
      </Resources>
      <Resources>
        <ID>AlwpWepPartTitle</ID>
        <Source>Assignment List</Source>
        <Translation>Списък със задания</Translation>
      </Resources>
      <Resources>
        <ID>GradingReturnToolTip</ID>
        <Source>Return assignments to all learners (Alt+R)</Source>
        <Translation>Върни заданията на всички обучаеми (Alt+R)</Translation>
      </Resources>
      <Resources>
        <ID>SelectSiteCollectionHtml</ID>
        <Source>Please select a Site Collection</Source>
        <Translation>Моля, изберете колекция от сайтове</Translation>
      </Resources>
      <Resources>
        <ID>ActionslblWhatHeader</ID>
        <Source>What would you like to do with this document?</Source>
        <Translation>Какво искате да направите с този документ?</Translation>
      </Resources>
      <Resources>
        <ID>ActionsItemIsFolder</ID>
        <Source>You cannot assign a folder. To assign all the contents of a folder, you must package its contents into a single archive file.</Source>
        <Translation>Не можете да задавате цяла папка. За да зададете цялото съдържание на папката,трябва да го архивирате в един файл.</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesColumnIndexOutOfRange</ID>
        <Source>columnIndex out of range</Source>
        <Translation>columnIndex е извън обхват</Translation>
      </Resources>
      <Resources>
        <ID>SlkPackageAndOrganizationTitle</ID>
        <Source>{0} - {1}</Source>
        <Translation>{0} - {1}</Translation>
      </Resources>
      <Resources>
        <ID>LobbyDeleteAccessKey</ID>
        <Source>X</Source>
        <Translation>X</Translation>
      </Resources>
      <Resources>
        <ID>DomainGroupEnumTimeout</ID>
        <Source>Domain group enumeration timed out</Source>
        <Translation>Изброяването на домейн групата изтече</Translation>
      </Resources>
      <Resources>
        <ID>GradingStatusNotStartedToolTip</ID>
        <Source>The learner has not started the assignment</Source>
        <Translation>Обучаемият не е стартирал заданието</Translation>
      </Resources>
      <Resources>
        <ID>LobbylblComments</ID>
        <Source>Comments</Source>
        <Translation>Коментари</Translation>
      </Resources>
      <Resources>
        <ID>InternalError</ID>
        <Source>Internal error {0}</Source>
        <Translation>Вътрешна грешка {0}</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelAssignmentPropDesc</ID>
        <Source>Enter the title and description of the assignment, start and due dates, and the number of points
    possible for the assignment. You can also specify whether learner assignments will 
    automatically be returned, and whether learners can see the correct answers when they review the assignment.
    </Source>
        <Translation>Въведете заглавие и описание на заданието, началната и крайната дата за изпълнение, както и възможния брой точки. Също така, можете да посочите дали заданията на обучаемите ще се връщат автоматично и дали обучаемите ще виждат верните отговори при преглед на заданието.</Translation>
      </Resources>
      <Resources>
        <ID>AppPageEditTitleInTitleArea</ID>
        <Source>Edit Assignment</Source>
        <Translation>Редактиране на задание</Translation>
      </Resources>
      <Resources>
        <ID>AppLearnersHeaderText</ID>
        <Source>Learners</Source>
        <Translation>Обучаеми</Translation>
      </Resources>
      <Resources>
        <ID>LobbyMarkasCompleteToolTip</ID>
        <Source>Mark as Complete (Alt+S)</Source>
        <Translation>Маркирай като изпълнено (Alt+S)</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureImageConfigurationComplete</ID>
        <Source>Configuration complete.</Source>
        <Translation>Конфигурирането приключи.</Translation>
      </Resources>
      <Resources>
        <ID>LobbyWindowAlreadyOpen</ID>
        <Source>This assignment is already open in another window.</Source>
        <Translation>Заданието вече е отворено в друг прозорец.</Translation>
      </Resources>
      <Resources>
        <ID>AppConfirmUnAssigning</ID>
        <Source>If you clear this check box, any work completed on the assignment by this learner or group will be permanently deleted.</Source>
        <Translation>Ако изчистите тази отметка, всяка работа на обучаемия/групата обучаеми по заданието ще бъде изтрита.</Translation>
      </Resources>
      <Resources>
        <ID>LearnerAssignmentStatusActive</ID>
        <Source>In Progress</Source>
        <Translation>В процес на изпълнение</Translation>
      </Resources>
      <Resources>
        <ID>SlkNotValidDate</ID>
        <Source>You must specify a valid date within the range of 1/1/1900 and 12/31/8900.</Source>
        <Translation>Трябва да посочите коректна дата между 1/1/1900 и 12/31/8900.</Translation>
      </Resources>
      <Resources>
        <ID>GradingEditToolTip</ID>
        <Source>Edit properties of the assignment, or change instructors or learners (Alt+I)</Source>
        <Translation>Редактирайте свойствата на заданието или променете инструкторите или обучаемите (Alt+I)</Translation>
      </Resources>
      <Resources>
        <ID>DefaultSlkLearnerPermissionName</ID>
        <Source>SLK Learner</Source>
        <Translation>SLK Learner</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureLabelSlkSettingDescriptionText</ID>
        <Source>&lt;p style="margin-bottom: 6pt"&gt;Optionally, upload a new SLK Settings XML file. This XML file specifies the queries that are available within Assignment List Web Part, as well as other settings.&lt;/p&gt;</Source>
        <Translation>&lt;p style="margin-bottom: 6pt"&gt;По избор, запишете нов файл с настройки на SLK. Този XML файл определя достъпните въпроси в списъка със задания, както и други настройки.&lt;/p&gt;</Translation>
      </Resources>
      <Resources>
        <ID>LearnerAssignmentTransitionNotSupported</ID>
        <Source>Requested learner assignment state transition is not supported</Source>
        <Translation>Заявената промяна на състоянието на заданието на обучаемия не се поддържа</Translation>
      </Resources>
      <Resources>
        <ID>GradingDeleteText</ID>
        <Source>Delete Assignment</Source>
        <Translation>Изтрий заданието</Translation>
      </Resources>
      <Resources>
        <ID>ActionslblSelfAssignAssign</ID>
        <Source>Assign it to someone else</Source>
        <Translation>Задай го на някой друг</Translation>
      </Resources>
      <Resources>
        <ID>SlkInstructorPermissionDescription</ID>
        <Source>Can use SharePoint Learning Kit features to assign e-learning content to learners.</Source>
        <Translation>Могат да се използват SharePoint Learning Kit функциите за задаване на учебно съдържание на обучаеми.</Translation>
      </Resources>
      <Resources>
        <ID>InvalidOrganizationIndex</ID>
        <Source>Organization not found in e-learning package</Source>
        <Translation>Не е намерена организация в e-learning пакета</Translation>
      </Resources>
      <Resources>
        <ID>NotSharePointAdmin</ID>
        <Source>Current user is not a SharePoint administrator</Source>
        <Translation>Текущият потребител не е SharePoint администратор</Translation>
      </Resources>
      <Resources>
        <ID>SlkSchemaSql</ID>
        <Source>--------------------------------------------------------------------------------
-- &lt;auto-generated&gt;
-- This code was generated by a tool.
--
-- Changes to this file may cause incorrect behavior and will be lost if
-- the code is regenerated.
-- &lt;/auto-generated&gt;
--------------------------------------------------------------------------------
    
IF DB_NAME()='master'
BEGIN
    RAISERROR(N'Unable to execute script on master database, USE a database before running this script',16,1)
    RETURN
END

SET NOCOUNT ON
SET XACT_ABORT ON
SET IMPLICIT_TRANSACTIONS ON
SET QUOTED_IDENTIFIER ON

GO

CREATE FUNCTION GetLearnerAssignmentState(
@RootActivityId bigint,
@IsFinal bit,
@NonELearningStatus int,
@AttemptStatus int)
RETURNS int
AS
BEGIN
RETURN CASE WHEN @RootActivityId IS NOT NULL
THEN
-- e-learning content
CASE WHEN @AttemptStatus IS NULL
THEN 0 -- LearnerAssignmentState.NotStarted
ELSE
CASE WHEN @IsFinal = 1
THEN 3 -- LearnerAssignmentState.Final
ELSE
CASE WHEN @AttemptStatus = 0 OR @AttemptStatus = 3
THEN 1 -- LearnerAssignmentState.Active
ELSE 2 -- LearnerAssignmentState.Completed
END
END
END
ELSE
-- non-e-learning content
CASE WHEN @NonELearningStatus IS NULL
THEN 0 -- LearnerAssignmentState.NotStarted
ELSE
CASE WHEN @IsFinal = 1
THEN 3 -- LearnerAssignmentState.Final
ELSE
CASE WHEN @NonELearningStatus = 0 OR @NonELearningStatus = 3
THEN 1 -- LearnerAssignmentState.Active
ELSE 2 -- LearnerAssignmentState.Completed
END
END
END
END
END

GO

CREATE FUNCTION IsLearnerAssignmentStarted(
@RootActivityId bigint,
@NonELearningStatus int,
@AttemptStatus int)
RETURNS int
AS
BEGIN
RETURN CASE WHEN @RootActivityId IS NOT NULL
THEN
-- e-learning content
CASE WHEN @AttemptStatus IS NULL
THEN 0 -- LearnerAssignmentState.NotStarted
ELSE 1 -- LearnerAssignmentState.Active or Completed or Final
END
ELSE
-- non-e-learning content
CASE WHEN @NonELearningStatus IS NULL
THEN 0 -- LearnerAssignmentState.NotStarted
ELSE 1 -- LearnerAssignmentState.Active or Completed or Final
END
END
END

GO

-- Create configuration table
CREATE TABLE Configuration (
    EngineVersion int NOT NULL,
    SchemaDefinition xml NOT NULL
)
DECLARE @schema varchar(max)
SET @schema = '&lt;StoreSchema&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ActivityAttemptItem" ViewFunction="ActivityAttemptItem$DefaultView"&gt;' + 
        '&lt;Property Name="AttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Property Name="ActivityPackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="CompletionStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Property Name="AttemptCount" TypeCode="9" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="DataModelCache" TypeCode="7" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="EvaluationPoints" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Exit" TypeCode="8" Nullable="true" HasDefault="true" EnumName="ExitMode"/&gt;' +
        '&lt;Property Name="LessonStatus" TypeCode="8" Nullable="true" HasDefault="true" EnumName="LessonStatus"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MinScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ProgressMeasure" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="RandomPlacement" TypeCode="9" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="RawScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SequencingDataCache" TypeCode="7" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SessionStartTimestamp" TypeCode="4" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SessionTime" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="true" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Property Name="SuspendData" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="TotalTime" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ActivityObjectiveItem" ViewFunction="ActivityObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityPackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="IsPrimaryObjective" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="Key" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="MinNormalizedMeasure" TypeCode="5" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="SatisfiedByMeasure" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ActivityPackageItem" ViewFunction="ActivityPackageItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityIdFromManifest" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="OriginalPlacement" TypeCode="9" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="ParentActivityId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="PackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Property Name="PrimaryObjectiveId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityObjectiveItem"/&gt;' +
        '&lt;Property Name="ResourceId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ResourceItem"/&gt;' +
        '&lt;Property Name="PrimaryResourceFromManifest" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="DataModelCache" TypeCode="7" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="CompletionThreshold" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Credit" TypeCode="3" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="HideContinue" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="HidePrevious" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="HideExit" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="HideAbandon" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="IsVisibleInContents" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="LaunchData" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MasteryScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxAttempts" TypeCode="9" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxTimeAllowed" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ResourceParameters" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ScaledPassingScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="TimeLimitAction" TypeCode="8" Nullable="true" HasDefault="true" EnumName="TimeLimitAction"/&gt;' +
        '&lt;Property Name="Title" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="PackageGlobalObjectiveItem" ViewFunction="PackageGlobalObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="LearnerId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="GlobalObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="GlobalObjectiveItem"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="AttemptItem" ViewFunction="AttemptItem$DefaultView"&gt;' + 
        '&lt;Property Name="LearnerId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="RootActivityId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="CompletionStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Property Name="CurrentActivityId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="SuspendedActivityId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="PackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Property Name="AttemptStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Property Name="FinishedTimestamp" TypeCode="4" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LogDetailSequencing" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="LogFinalSequencing" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="LogRollup" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="StartedTimestamp" TypeCode="4" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Property Name="TotalPoints" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LearnerAssignmentId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="AttemptObjectiveItem" ViewFunction="AttemptObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="ActivityObjectiveId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityObjectiveItem"/&gt;' +
        '&lt;Property Name="CompletionStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Property Name="Description" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="IsPrimaryObjective" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="Key" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="LessonStatus" TypeCode="8" Nullable="true" HasDefault="true" EnumName="LessonStatus"/&gt;' +
        '&lt;Property Name="RawScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MinScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ProgressMeasure" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="CommentFromLearnerItem" ViewFunction="CommentFromLearnerItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="Comment" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Ordinal" TypeCode="9" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="CommentFromLmsItem" ViewFunction="CommentFromLmsItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityPackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="Comment" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="CorrectResponseItem" ViewFunction="CorrectResponseItem$DefaultView"&gt;' + 
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="ResponsePattern" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="EvaluationCommentItem" ViewFunction="EvaluationCommentItem$DefaultView"&gt;' + 
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="Comment" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Ordinal" TypeCode="9" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ExtensionDataItem" ViewFunction="ExtensionDataItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="AttemptObjectiveId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
        '&lt;Property Name="Name" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="AttachmentGuid" TypeCode="11" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="AttachmentValue" TypeCode="10" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="BoolValue" TypeCode="3" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="DateTimeValue" TypeCode="4" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="DoubleValue" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="IntValue" TypeCode="9" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="StringValue" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="GlobalObjectiveItem" ViewFunction="GlobalObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="OrganizationId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="Key" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Description" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="InteractionItem" ViewFunction="InteractionItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="InteractionIdFromCmi" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="InteractionType" TypeCode="8" Nullable="true" HasDefault="true" EnumName="InteractionType"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Weighting" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ResultState" TypeCode="8" Nullable="true" HasDefault="true" EnumName="InteractionResultState"/&gt;' +
        '&lt;Property Name="ResultNumeric" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Latency" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Description" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LearnerResponseBool" TypeCode="3" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LearnerResponseString" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LearnerResponseNumeric" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="RawScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MinScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="EvaluationPoints" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="InteractionObjectiveItem" ViewFunction="InteractionObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="AttemptObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="LearnerGlobalObjectiveItem" ViewFunction="LearnerGlobalObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="LearnerId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="GlobalObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="GlobalObjectiveItem"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="MapActivityObjectiveToGlobalObjectiveItem" ViewFunction="MapActivityObjectiveToGlobalObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityObjectiveItem"/&gt;' +
        '&lt;Property Name="GlobalObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="GlobalObjectiveItem"/&gt;' +
        '&lt;Property Name="ReadSatisfiedStatus" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="ReadNormalizedMeasure" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="WriteSatisfiedStatus" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="WriteNormalizedMeasure" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="PackageItem" ViewFunction="PackageItem$DefaultView"&gt;' + 
        '&lt;Property Name="PackageFormat" TypeCode="8" Nullable="false" HasDefault="false" EnumName="PackageFormat"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Manifest" TypeCode="7" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Warnings" TypeCode="7" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="RubricItem" ViewFunction="RubricItem$DefaultView"&gt;' + 
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="Ordinal" TypeCode="9" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="IsSatisfied" TypeCode="3" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Points" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ResourceItem" ViewFunction="ResourceItem$DefaultView"&gt;' + 
        '&lt;Property Name="PackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Property Name="ResourceXml" TypeCode="7" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="SequencingLogEntryItem" ViewFunction="SequencingLogEntryItem$DefaultView"&gt;' + 
        '&lt;Property Name="AttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="true" HasDefault="false" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="EventType" TypeCode="8" Nullable="false" HasDefault="false" EnumName="SequencingEventType"/&gt;' +
        '&lt;Property Name="Message" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="NavigationCommand" TypeCode="8" Nullable="false" HasDefault="false" EnumName="NavigationCommand"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="UserItem" ViewFunction="UserItem$DefaultView"&gt;' + 
        '&lt;Property Name="Key" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Name" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="AudioCaptioning" TypeCode="8" Nullable="false" HasDefault="true" EnumName="AudioCaptioning"/&gt;' +
        '&lt;Property Name="AudioLevel" TypeCode="5" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="DeliverySpeed" TypeCode="5" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="Language" TypeCode="2" Nullable="false" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="SiteSettingsItem" ViewFunction="SiteSettingsItem$DefaultView"&gt;' + 
        '&lt;Property Name="SiteGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SettingsXml" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SettingsXmlLastModified" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="AssignmentItem" ViewFunction="AssignmentItem$DefaultView" DeleteSecurityFunction="AssignmentItem$DeleteSecurity"&gt;' + 
        '&lt;Property Name="SPSiteGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SPWebGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="RootActivityId" TypeCode="1" Nullable="true" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="NonELearningLocation" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Title" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="StartDate" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="DueDate" TypeCode="4" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="PointsPossible" TypeCode="5" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Description" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="AutoReturn" TypeCode="3" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="ShowAnswersToLearners" TypeCode="3" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="CreatedBy" TypeCode="1" Nullable="true" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="DateCreated" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="InstructorAssignmentItem" ViewFunction="InstructorAssignmentItem$DefaultView"&gt;' + 
        '&lt;Property Name="AssignmentId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Property Name="InstructorId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="LearnerAssignmentItem" ViewFunction="LearnerAssignmentItem$DefaultView"&gt;' + 
        '&lt;Property Name="AssignmentId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Property Name="LearnerId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="IsFinal" TypeCode="3" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="NonELearningStatus" TypeCode="8" Nullable="true" HasDefault="false" EnumName="AttemptStatus"/&gt;' +
        '&lt;Property Name="FinalPoints" TypeCode="5" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="InstructorComments" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="UserWebListItem" ViewFunction="UserWebListItem$DefaultView"&gt;' + 
        '&lt;Property Name="OwnerKey" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SPSiteGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SPWebGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="LastAccessTime" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;Enum Name="AudioCaptioning"&gt;' + 
        '&lt;Value Name="Off" Value="-1"/&gt;' + 
        '&lt;Value Name="NoChange" Value="0"/&gt;' + 
        '&lt;Value Name="On" Value="1"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="CompletionStatus"&gt;' + 
        '&lt;Value Name="Unknown" Value="0"/&gt;' + 
        '&lt;Value Name="Completed" Value="1"/&gt;' + 
        '&lt;Value Name="Incomplete" Value="2"/&gt;' + 
        '&lt;Value Name="NotAttempted" Value="3"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="ExitMode"&gt;' + 
        '&lt;Value Name="Undetermined" Value="0"/&gt;' + 
        '&lt;Value Name="Logout" Value="1"/&gt;' + 
        '&lt;Value Name="Normal" Value="2"/&gt;' + 
        '&lt;Value Name="TimeOut" Value="3"/&gt;' + 
        '&lt;Value Name="Suspended" Value="4"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="DisplayMode"&gt;' + 
        '&lt;Value Name="Normal" Value="0"/&gt;' + 
        '&lt;Value Name="Browse" Value="1"/&gt;' + 
        '&lt;Value Name="Review" Value="2"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="SuccessStatus"&gt;' + 
        '&lt;Value Name="Unknown" Value="0"/&gt;' + 
        '&lt;Value Name="Failed" Value="1"/&gt;' + 
        '&lt;Value Name="Passed" Value="2"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="TimeLimitAction"&gt;' + 
        '&lt;Value Name="ContinueNoMessage" Value="0"/&gt;' + 
        '&lt;Value Name="ContinueWithMessage" Value="1"/&gt;' + 
        '&lt;Value Name="ExitNoMessage" Value="2"/&gt;' + 
        '&lt;Value Name="ExitWithMessage" Value="3"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="InteractionType"&gt;' + 
        '&lt;Value Name="Other" Value="0"/&gt;' + 
        '&lt;Value Name="FillIn" Value="1"/&gt;' + 
        '&lt;Value Name="Likert" Value="2"/&gt;' + 
        '&lt;Value Name="LongFillIn" Value="3"/&gt;' + 
        '&lt;Value Name="Matching" Value="4"/&gt;' + 
        '&lt;Value Name="MultipleChoice" Value="5"/&gt;' + 
        '&lt;Value Name="Numeric" Value="6"/&gt;' + 
        '&lt;Value Name="Performance" Value="7"/&gt;' + 
        '&lt;Value Name="Sequencing" Value="8"/&gt;' + 
        '&lt;Value Name="TrueFalse" Value="9"/&gt;' + 
        '&lt;Value Name="Essay" Value="10"/&gt;' + 
        '&lt;Value Name="Attachment" Value="11"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="InteractionResultState"&gt;' + 
        '&lt;Value Name="None" Value="0"/&gt;' + 
        '&lt;Value Name="Correct" Value="1"/&gt;' + 
        '&lt;Value Name="Incorrect" Value="2"/&gt;' + 
        '&lt;Value Name="Neutral" Value="3"/&gt;' + 
        '&lt;Value Name="Numeric" Value="4"/&gt;' + 
        '&lt;Value Name="Unanticipated" Value="5"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="PackageFormat"&gt;' + 
        '&lt;Value Name="Lrm" Value="0"/&gt;' + 
        '&lt;Value Name="V1p2" Value="1"/&gt;' + 
        '&lt;Value Name="V1p3" Value="2"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="LessonStatus"&gt;' + 
        '&lt;Value Name="NotAttempted" Value="0"/&gt;' + 
        '&lt;Value Name="Browsed" Value="1"/&gt;' + 
        '&lt;Value Name="Completed" Value="2"/&gt;' + 
        '&lt;Value Name="Failed" Value="3"/&gt;' + 
        '&lt;Value Name="Incomplete" Value="4"/&gt;' + 
        '&lt;Value Name="Passed" Value="5"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="NavigationCommand"&gt;' + 
        '&lt;Value Name="None" Value="0"/&gt;' + 
        '&lt;Value Name="Abandon" Value="1"/&gt;' + 
        '&lt;Value Name="AbandonAll" Value="2"/&gt;' + 
        '&lt;Value Name="ChoiceStart" Value="3"/&gt;' + 
        '&lt;Value Name="Choose" Value="4"/&gt;' + 
        '&lt;Value Name="Continue" Value="5"/&gt;' + 
        '&lt;Value Name="ExitAll" Value="6"/&gt;' + 
        '&lt;Value Name="Previous" Value="7"/&gt;' + 
        '&lt;Value Name="ResumeAll" Value="8"/&gt;' + 
        '&lt;Value Name="Start" Value="9"/&gt;' + 
        '&lt;Value Name="SuspendAll" Value="10"/&gt;' + 
        '&lt;Value Name="UnqualifiedExit" Value="11"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="SequencingEventType"&gt;' + 
        '&lt;Value Name="FinalNavigation" Value="0"/&gt;' + 
        '&lt;Value Name="IntermediateNavigation" Value="1"/&gt;' + 
        '&lt;Value Name="Rollup" Value="2"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="AttemptStatus"&gt;' + 
        '&lt;Value Name="Active" Value="0"/&gt;' + 
        '&lt;Value Name="Abandoned" Value="1"/&gt;' + 
        '&lt;Value Name="Completed" Value="2"/&gt;' + 
        '&lt;Value Name="Suspended" Value="3"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="LearnerAssignmentState"&gt;' + 
        '&lt;Value Name="NotStarted" Value="0"/&gt;' + 
        '&lt;Value Name="Active" Value="1"/&gt;' + 
        '&lt;Value Name="Completed" Value="2"/&gt;' + 
        '&lt;Value Name="Final" Value="3"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavOrganizationGlobalObjectiveView" Function="SeqNavOrganizationGlobalObjectiveView"&gt;' + 
        '&lt;Column Name="OrganizationId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="Key" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavLearnerGlobalObjectiveView" Function="SeqNavLearnerGlobalObjectiveView"&gt;' + 
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="Key" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavActivityPackageView" Function="SeqNavActivityPackageView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackagePath" TypeCode="2" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavActivityTreeView" Function="SeqNavActivityTreeView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="ParentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="DataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptView" Function="SeqNavAttemptView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="LogDetailSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="LogFinalSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="LogRollup" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="CurrentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="SuspendedActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackagePath" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="LearnerName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerAudioCaptioning" TypeCode="8" Nullable="true" EnumName="AudioCaptioning"/&gt;' +
        '&lt;Column Name="LearnerAudioLevel" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerDeliverySpeed" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerLanguage" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="StartedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="FinishedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="TotalPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Column Name="CompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavActivityAttemptView" Function="SeqNavActivityAttemptView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="DataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="SequencingDataCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="RandomPlacement" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ActivityPackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="StaticDataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="ParentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="CompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Column Name="AttemptCount" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="EvaluationPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="Exit" TypeCode="8" Nullable="true" EnumName="ExitMode"/&gt;' +
        '&lt;Column Name="LessonStatus" TypeCode="8" Nullable="true" EnumName="LessonStatus"/&gt;' +
        '&lt;Column Name="Location" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="MinScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ProgressMeasure" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="RawScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SessionStartTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="SessionTime" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Column Name="SuspendData" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="TotalTime" TypeCode="6" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavCurrentActivityAttemptView" Function="SeqNavCurrentActivityAttemptView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="DataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="SequencingDataCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="RandomPlacement" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="StaticDataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="Credit" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavCurrentCommentFromLmsView" Function="SeqNavCurrentCommentFromLmsView"&gt;' + 
        '&lt;Column Name="Comment" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Location" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Timestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="DataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptObjectiveView" Function="SeqNavAttemptObjectiveView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
        '&lt;Column Name="ActivityAttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="CompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Column Name="Description" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IsPrimaryObjective" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="Key" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LessonStatus" TypeCode="8" Nullable="true" EnumName="LessonStatus"/&gt;' +
        '&lt;Column Name="RawScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MinScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ProgressMeasure" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptCommentFromLearnerView" Function="SeqNavAttemptCommentFromLearnerView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ActivityAttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="CommentFromLearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="CommentFromLearnerItem"/&gt;' +
        '&lt;Column Name="Comment" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Location" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Timestamp" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Ordinal" TypeCode="9" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptInteractionView" Function="SeqNavAttemptInteractionView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ActivityAttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="InteractionIdFromCmi" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="InteractionType" TypeCode="8" Nullable="true" EnumName="InteractionType"/&gt;' +
        '&lt;Column Name="Timestamp" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Weighting" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ResultState" TypeCode="8" Nullable="true" EnumName="InteractionResultState"/&gt;' +
        '&lt;Column Name="ResultNumeric" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="Latency" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="Description" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerResponseBool" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerResponseString" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerResponseNumeric" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="RawScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MinScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="EvaluationPoints" TypeCode="5" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptEvaluationCommentLearnerView" Function="SeqNavAttemptEvaluationCommentLearnerView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="EvaluationCommentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="EvaluationCommentItem"/&gt;' +
        '&lt;Column Name="Comment" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Location" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Timestamp" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Ordinal" TypeCode="9" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptCorrectResponseView" Function="SeqNavAttemptCorrectResponseView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="CorrectResponseId" TypeCode="1" Nullable="true" ReferencedItemTypeName="CorrectResponseItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="ResponsePattern" TypeCode="2" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptInteractionObjectiveView" Function="SeqNavAttemptInteractionObjectiveView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="InteractionObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionObjectiveItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="AttemptObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptExtensionDataView" Function="SeqNavAttemptExtensionDataView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ActivityAttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="ExtensionDataId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ExtensionDataItem"/&gt;' +
        '&lt;Column Name="Name" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="StringValue" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IntValue" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="BoolValue" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="DoubleValue" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="DateTimeValue" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentGuid" TypeCode="11" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptObjectiveExtensionDataView" Function="SeqNavAttemptObjectiveExtensionDataView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ExtensionDataId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ExtensionDataItem"/&gt;' +
        '&lt;Column Name="AttemptObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
        '&lt;Column Name="Name" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="StringValue" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IntValue" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="BoolValue" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="DoubleValue" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="DateTimeValue" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentValue" TypeCode="10" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptInteractionExtensionDataView" Function="SeqNavAttemptInteractionExtensionDataView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ExtensionDataId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ExtensionDataItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="Name" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="StringValue" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IntValue" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="BoolValue" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="DoubleValue" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="DateTimeValue" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentValue" TypeCode="10" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptRubricView" Function="SeqNavAttemptRubricView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="RubricItemId" TypeCode="1" Nullable="true" ReferencedItemTypeName="RubricItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="Ordinal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="IsSatisfied" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="Points" TypeCode="5" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="LearnerAssignmentView" Function="LearnerAssignmentView"&gt;' + 
        '&lt;Column Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptGradedPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerAssignmentState" TypeCode="8" Nullable="true" EnumName="LearnerAssignmentState"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="AssignmentPropertiesView" Function="AssignmentPropertiesView" SecurityFunction="AssignmentPropertiesView$Security"&gt;' + 
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDateCreated" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Parameter Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Parameter Name="IsInstructor" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="AssignmentListForInstructors" Function="AssignmentListForInstructors" SecurityFunction="AssignmentListForInstructors$Security"&gt;' + 
        '&lt;Column Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDateCreated" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="CountTotal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountNotStarted" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountActive" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountCompleted" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountFinal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountStarted" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountNotStartedOrActive" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountCompletedOrFinal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountNotFinal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="MinGradedPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxGradedPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="AvgGradedPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="MinFinalPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxFinalPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="AvgFinalPoints" TypeCode="6" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="InstructorAssignmentListForInstructors" Function="InstructorAssignmentListForInstructors" SecurityFunction="InstructorAssignmentListForInstructors$Security"&gt;' + 
        '&lt;Column Name="InstructorAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InstructorAssignmentItem"/&gt;' +
        '&lt;Column Name="InstructorId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="InstructorName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="InstructorKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="PackageManifest" TypeCode="7" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="LearnerAssignmentListForLearners" Function="LearnerAssignmentListForLearners" SecurityFunction="LearnerAssignmentListForLearners$Security"&gt;' + 
        '&lt;Column Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="LearnerName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IsFinal" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="NonELearningStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="FinalPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="InstructorComments" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDateCreated" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptCurrentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptSuspendedActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="AttemptFinishedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogDetailSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogFinalSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogRollup" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptStartedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptCompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Column Name="AttemptSuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Column Name="AttemptGradedPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerAssignmentState" TypeCode="8" Nullable="true" EnumName="LearnerAssignmentState"/&gt;' +
        '&lt;Column Name="HasInstructors" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="LearnerAssignmentListForInstructors" Function="LearnerAssignmentListForInstructors" SecurityFunction="LearnerAssignmentListForInstructors$Security"&gt;' + 
        '&lt;Column Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="LearnerName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IsFinal" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="NonELearningStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="FinalPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="InstructorComments" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="PackageManifest" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptCurrentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptSuspendedActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="AttemptFinishedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogDetailSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogFinalSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogRollup" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptStartedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptCompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Column Name="AttemptSuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Column Name="AttemptGradedPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerAssignmentState" TypeCode="8" Nullable="true" EnumName="LearnerAssignmentState"/&gt;' +
        '&lt;Column Name="HasInstructors" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="UserWebList" Function="UserWebList" SecurityFunction="UserWebList$Security"&gt;' + 
        '&lt;Column Name="SPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="SPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="LastAccessTime" TypeCode="4" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="ActivityPackageItemView" Function="ActivityPackageItemView"&gt;' + 
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="PackageManifest" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="ActivityIdFromManifest" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="OriginalPlacement" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="ParentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PrimaryObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityObjectiveItem"/&gt;' +
        '&lt;Column Name="ResourceId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ResourceItem"/&gt;' +
        '&lt;Column Name="PrimaryResourceIdFromManifest" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="CompletionThreshold" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="Credit" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="IsVisibleInContents" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="LaunchData" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxAttempts" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxTimeAllowed" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="ResourceParameters" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledPassingScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="TimeLimitAction" TypeCode="8" Nullable="true" EnumName="TimeLimitAction"/&gt;' +
        '&lt;Column Name="Title" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;Right Name="AddPackageReferenceRight"&gt;' + 
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="RemovePackageReferenceRight"&gt;' + 
        '&lt;Parameter Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="ReadPackageRight"&gt;' + 
        '&lt;Parameter Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="CreateAttemptRight"&gt;' + 
        '&lt;Parameter Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Parameter Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="DeleteAttemptRight"&gt;' + 
        '&lt;Parameter Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="ExecuteSessionRight" SecurityFunction="ExecuteSessionRight"&gt;' + 
        '&lt;Parameter Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="ReviewSessionRight" SecurityFunction="ReviewSessionRight"&gt;' + 
        '&lt;Parameter Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="RandomAccessSessionRight" SecurityFunction="RandomAccessSessionRight"&gt;' + 
        '&lt;Parameter Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="StartAttemptOnLearnerAssignmentRight" SecurityFunction="StartAttemptOnLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="FinishLearnerAssignmentRight" SecurityFunction="FinishLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="CompleteLearnerAssignmentRight" SecurityFunction="CompleteLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="FinalizeLearnerAssignmentRight" SecurityFunction="FinalizeLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="ActivateLearnerAssignmentRight" SecurityFunction="ActivateLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema + '&lt;/StoreSchema&gt;'
INSERT INTO Configuration (
    EngineVersion,
    SchemaDefinition
) VALUES (
    1,@schema
)

-- Create role that can access the database using LearningStore
CREATE ROLE LearningStore
GRANT SELECT ON Configuration TO LearningStore

-- Create AudioCaptioning table
CREATE TABLE [AudioCaptioning](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [AudioCaptioning] TO LearningStore
INSERT INTO [AudioCaptioning](
    Id,
    Name
) VALUES (
    -1,
    'Off'
)
INSERT INTO [AudioCaptioning](
    Id,
    Name
) VALUES (
    0,
    'NoChange'
)
INSERT INTO [AudioCaptioning](
    Id,
    Name
) VALUES (
    1,
    'On'
)

-- Create CompletionStatus table
CREATE TABLE [CompletionStatus](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [CompletionStatus] TO LearningStore
INSERT INTO [CompletionStatus](
    Id,
    Name
) VALUES (
    0,
    'Unknown'
)
INSERT INTO [CompletionStatus](
    Id,
    Name
) VALUES (
    1,
    'Completed'
)
INSERT INTO [CompletionStatus](
    Id,
    Name
) VALUES (
    2,
    'Incomplete'
)
INSERT INTO [CompletionStatus](
    Id,
    Name
) VALUES (
    3,
    'NotAttempted'
)

-- Create ExitMode table
CREATE TABLE [ExitMode](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [ExitMode] TO LearningStore
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    0,
    'Undetermined'
)
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    1,
    'Logout'
)
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    2,
    'Normal'
)
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    3,
    'TimeOut'
)
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    4,
    'Suspended'
)

-- Create DisplayMode table
CREATE TABLE [DisplayMode](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [DisplayMode] TO LearningStore
INSERT INTO [DisplayMode](
    Id,
    Name
) VALUES (
    0,
    'Normal'
)
INSERT INTO [DisplayMode](
    Id,
    Name
) VALUES (
    1,
    'Browse'
)
INSERT INTO [DisplayMode](
    Id,
    Name
) VALUES (
    2,
    'Review'
)

-- Create SuccessStatus table
CREATE TABLE [SuccessStatus](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [SuccessStatus] TO LearningStore
INSERT INTO [SuccessStatus](
    Id,
    Name
) VALUES (
    0,
    'Unknown'
)
INSERT INTO [SuccessStatus](
    Id,
    Name
) VALUES (
    1,
    'Failed'
)
INSERT INTO [SuccessStatus](
    Id,
    Name
) VALUES (
    2,
    'Passed'
)

-- Create TimeLimitAction table
CREATE TABLE [TimeLimitAction](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [TimeLimitAction] TO LearningStore
INSERT INTO [TimeLimitAction](
    Id,
    Name
) VALUES (
    0,
    'ContinueNoMessage'
)
INSERT INTO [TimeLimitAction](
    Id,
    Name
) VALUES (
    1,
    'ContinueWithMessage'
)
INSERT INTO [TimeLimitAction](
    Id,
    Name
) VALUES (
    2,
    'ExitNoMessage'
)
INSERT INTO [TimeLimitAction](
    Id,
    Name
) VALUES (
    3,
    'ExitWithMessage'
)

-- Create InteractionType table
CREATE TABLE [InteractionType](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [InteractionType] TO LearningStore
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    0,
    'Other'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    1,
    'FillIn'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    2,
    'Likert'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    3,
    'LongFillIn'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    4,
    'Matching'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    5,
    'MultipleChoice'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    6,
    'Numeric'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    7,
    'Performance'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    8,
    'Sequencing'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    9,
    'TrueFalse'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    10,
    'Essay'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    11,
    'Attachment'
)

-- Create InteractionResultState table
CREATE TABLE [InteractionResultState](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [InteractionResultState] TO LearningStore
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    0,
    'None'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    1,
    'Correct'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    2,
    'Incorrect'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    3,
    'Neutral'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    4,
    'Numeric'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    5,
    'Unanticipated'
)

-- Create PackageFormat table
CREATE TABLE [PackageFormat](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [PackageFormat] TO LearningStore
INSERT INTO [PackageFormat](
    Id,
    Name
) VALUES (
    0,
    'Lrm'
)
INSERT INTO [PackageFormat](
    Id,
    Name
) VALUES (
    1,
    'V1p2'
)
INSERT INTO [PackageFormat](
    Id,
    Name
) VALUES (
    2,
    'V1p3'
)

-- Create LessonStatus table
CREATE TABLE [LessonStatus](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [LessonStatus] TO LearningStore
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    0,
    'NotAttempted'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    1,
    'Browsed'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    2,
    'Completed'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    3,
    'Failed'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    4,
    'Incomplete'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    5,
    'Passed'
)

-- Create NavigationCommand table
CREATE TABLE [NavigationCommand](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [NavigationCommand] TO LearningStore
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    0,
    'None'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    1,
    'Abandon'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    2,
    'AbandonAll'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    3,
    'ChoiceStart'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    4,
    'Choose'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    5,
    'Continue'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    6,
    'ExitAll'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    7,
    'Previous'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    8,
    'ResumeAll'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    9,
    'Start'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    10,
    'SuspendAll'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    11,
    'UnqualifiedExit'
)

-- Create SequencingEventType table
CREATE TABLE [SequencingEventType](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [SequencingEventType] TO LearningStore
INSERT INTO [SequencingEventType](
    Id,
    Name
) VALUES (
    0,
    'FinalNavigation'
)
INSERT INTO [SequencingEventType](
    Id,
    Name
) VALUES (
    1,
    'IntermediateNavigation'
)
INSERT INTO [SequencingEventType](
    Id,
    Name
) VALUES (
    2,
    'Rollup'
)

-- Create AttemptStatus table
CREATE TABLE [AttemptStatus](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [AttemptStatus] TO LearningStore
INSERT INTO [AttemptStatus](
    Id,
    Name
) VALUES (
    0,
    'Active'
)
INSERT INTO [AttemptStatus](
    Id,
    Name
) VALUES (
    1,
    'Abandoned'
)
INSERT INTO [AttemptStatus](
    Id,
    Name
) VALUES (
    2,
    'Completed'
)
INSERT INTO [AttemptStatus](
    Id,
    Name
) VALUES (
    3,
    'Suspended'
)

-- Create LearnerAssignmentState table
CREATE TABLE [LearnerAssignmentState](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [LearnerAssignmentState] TO LearningStore
INSERT INTO [LearnerAssignmentState](
    Id,
    Name
) VALUES (
    0,
    'NotStarted'
)
INSERT INTO [LearnerAssignmentState](
    Id,
    Name
) VALUES (
    1,
    'Active'
)
INSERT INTO [LearnerAssignmentState](
    Id,
    Name
) VALUES (
    2,
    'Completed'
)
INSERT INTO [LearnerAssignmentState](
    Id,
    Name
) VALUES (
    3,
    'Final'
)

-- Create ActivityAttemptItem table
CREATE TABLE [ActivityAttemptItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [AttemptId] bigint NOT NULL,
    [ActivityPackageId] bigint NOT NULL,
    [CompletionStatus] int NOT NULL DEFAULT 0,
    [AttemptCount] int DEFAULT NULL,
    [DataModelCache] xml DEFAULT NULL,
    [EvaluationPoints] float(24) DEFAULT NULL,
    [Exit] int DEFAULT NULL,
    [LessonStatus] int DEFAULT NULL,
    [Location] nvarchar(1000) DEFAULT NULL,
    [MinScore] float(24) DEFAULT NULL,
    [MaxScore] float(24) DEFAULT NULL,
    [ProgressMeasure] float(24) DEFAULT NULL,
    [RandomPlacement] int DEFAULT NULL,
    [RawScore] float(24) DEFAULT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [SequencingDataCache] xml DEFAULT NULL,
    [SessionStartTimestamp] datetime DEFAULT NULL,
    [SessionTime] float(53) DEFAULT NULL,
    [SuccessStatus] int DEFAULT NULL,
    [SuspendData] nvarchar(max) DEFAULT NULL CHECK(LEN([SuspendData])&lt;=4096),
    [TotalTime] float(53) DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ActivityAttemptItem] TO LearningStore

-- Create ActivityObjectiveItem table
CREATE TABLE [ActivityObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityPackageId] bigint NOT NULL,
    [IsPrimaryObjective] bit NOT NULL DEFAULT 0,
    [Key] nvarchar(max) CHECK(LEN([Key])&lt;=4096),
    [MinNormalizedMeasure] float(24) NOT NULL DEFAULT 1,
    [SatisfiedByMeasure] bit NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ActivityObjectiveItem] TO LearningStore

-- Create ActivityPackageItem table
CREATE TABLE [ActivityPackageItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityIdFromManifest] nvarchar(max) NOT NULL CHECK(LEN([ActivityIdFromManifest])&lt;=4096),
    [OriginalPlacement] int NOT NULL,
    [ParentActivityId] bigint DEFAULT NULL,
    [PackageId] bigint NOT NULL,
    [PrimaryObjectiveId] bigint DEFAULT NULL,
    [ResourceId] bigint DEFAULT NULL,
    [PrimaryResourceFromManifest] nvarchar(2000) DEFAULT NULL,
    [DataModelCache] xml DEFAULT NULL,
    [CompletionThreshold] float(24) DEFAULT NULL,
    [Credit] bit DEFAULT 1,
    [HideContinue] bit NOT NULL DEFAULT 0,
    [HidePrevious] bit NOT NULL DEFAULT 0,
    [HideExit] bit NOT NULL DEFAULT 0,
    [HideAbandon] bit NOT NULL DEFAULT 0,
    [IsVisibleInContents] bit NOT NULL DEFAULT 1,
    [LaunchData] nvarchar(max) DEFAULT NULL CHECK(LEN([LaunchData])&lt;=4096),
    [MasteryScore] float(24) DEFAULT NULL,
    [MaxAttempts] int DEFAULT NULL,
    [MaxTimeAllowed] float(53) DEFAULT 0,
    [ResourceParameters] nvarchar(1000) DEFAULT NULL,
    [ScaledPassingScore] float(24) DEFAULT NULL,
    [TimeLimitAction] int DEFAULT NULL,
    [Title] nvarchar(200) NOT NULL,
    [ObjectivesGlobalToSystem] bit NOT NULL DEFAULT 1
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ActivityPackageItem] TO LearningStore

-- Create PackageGlobalObjectiveItem table
CREATE TABLE [PackageGlobalObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [LearnerId] bigint NOT NULL,
    [GlobalObjectiveId] bigint NOT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [SuccessStatus] int NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [PackageGlobalObjectiveItem] TO LearningStore

-- Create AttemptItem table
CREATE TABLE [AttemptItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [LearnerId] bigint NOT NULL,
    [RootActivityId] bigint NOT NULL,
    [CompletionStatus] int NOT NULL DEFAULT 0,
    [CurrentActivityId] bigint DEFAULT NULL,
    [SuspendedActivityId] bigint DEFAULT NULL,
    [PackageId] bigint NOT NULL,
    [AttemptStatus] int NOT NULL DEFAULT 0,
    [FinishedTimestamp] datetime DEFAULT NULL,
    [LogDetailSequencing] bit NOT NULL DEFAULT 0,
    [LogFinalSequencing] bit NOT NULL DEFAULT 0,
    [LogRollup] bit NOT NULL DEFAULT 0,
    [StartedTimestamp] datetime,
    [SuccessStatus] int NOT NULL DEFAULT 0,
    [TotalPoints] float(24) DEFAULT NULL,
    [LearnerAssignmentId] bigint DEFAULT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [AttemptItem] TO LearningStore

-- Create AttemptObjectiveItem table
CREATE TABLE [AttemptObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityAttemptId] bigint NOT NULL,
    [ActivityObjectiveId] bigint DEFAULT NULL,
    [CompletionStatus] int NOT NULL DEFAULT 0,
    [Description] nvarchar(255) DEFAULT NULL,
    [IsPrimaryObjective] bit NOT NULL DEFAULT 0,
    [Key] nvarchar(max) CHECK(LEN([Key])&lt;=4096),
    [LessonStatus] int DEFAULT 0,
    [RawScore] float(24) DEFAULT NULL,
    [MinScore] float(24) DEFAULT NULL,
    [MaxScore] float(24) DEFAULT NULL,
    [ProgressMeasure] float(24) DEFAULT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [SuccessStatus] int NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [AttemptObjectiveItem] TO LearningStore

-- Create CommentFromLearnerItem table
CREATE TABLE [CommentFromLearnerItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityAttemptId] bigint NOT NULL,
    [Comment] nvarchar(max) NOT NULL CHECK(LEN([Comment])&lt;=4096),
    [Location] nvarchar(255),
    [Ordinal] int NOT NULL,
    [Timestamp] nvarchar(28)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [CommentFromLearnerItem] TO LearningStore

-- Create CommentFromLmsItem table
CREATE TABLE [CommentFromLmsItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityPackageId] bigint NOT NULL,
    [Comment] nvarchar(max) NOT NULL CHECK(LEN([Comment])&lt;=4096),
    [Location] nvarchar(255),
    [Timestamp] nvarchar(28)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [CommentFromLmsItem] TO LearningStore

-- Create CorrectResponseItem table
CREATE TABLE [CorrectResponseItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [InteractionId] bigint NOT NULL,
    [ResponsePattern] nvarchar(max) NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [CorrectResponseItem] TO LearningStore

-- Create EvaluationCommentItem table
CREATE TABLE [EvaluationCommentItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [InteractionId] bigint NOT NULL,
    [Comment] nvarchar(max) NOT NULL CHECK(LEN([Comment])&lt;=4096),
    [Location] nvarchar(255),
    [Ordinal] int NOT NULL,
    [Timestamp] nvarchar(28)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [EvaluationCommentItem] TO LearningStore

-- Create ExtensionDataItem table
CREATE TABLE [ExtensionDataItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityAttemptId] bigint DEFAULT NULL,
    [InteractionId] bigint DEFAULT NULL,
    [AttemptObjectiveId] bigint DEFAULT NULL,
    [Name] nvarchar(256) DEFAULT NULL,
    [AttachmentGuid] uniqueidentifier DEFAULT NULL,
    [AttachmentValue] varbinary(max) DEFAULT NULL,
    [BoolValue] bit DEFAULT NULL,
    [DateTimeValue] datetime DEFAULT NULL,
    [DoubleValue] float(53) DEFAULT NULL,
    [IntValue] int DEFAULT NULL,
    [StringValue] nvarchar(max) DEFAULT NULL CHECK(LEN([StringValue])&lt;=4096)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ExtensionDataItem] TO LearningStore

-- Create GlobalObjectiveItem table
CREATE TABLE [GlobalObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [OrganizationId] bigint DEFAULT NULL,
    [Key] nvarchar(max) NOT NULL CHECK(LEN([Key])&lt;=4096),
    [Description] nvarchar(max) DEFAULT NULL CHECK(LEN([Description])&lt;=4096)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [GlobalObjectiveItem] TO LearningStore

-- Create InteractionItem table
CREATE TABLE [InteractionItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityAttemptId] bigint NOT NULL,
    [InteractionIdFromCmi] nvarchar(max) NOT NULL CHECK(LEN([InteractionIdFromCmi])&lt;=4096),
    [InteractionType] int DEFAULT NULL,
    [Timestamp] nvarchar(28) DEFAULT NULL,
    [Weighting] float(24) DEFAULT NULL,
    [ResultState] int DEFAULT NULL,
    [ResultNumeric] float(24) DEFAULT NULL,
    [Latency] float(53) DEFAULT NULL,
    [Description] nvarchar(255) DEFAULT NULL,
    [LearnerResponseBool] bit DEFAULT NULL,
    [LearnerResponseString] nvarchar(max) DEFAULT NULL,
    [LearnerResponseNumeric] float(24) DEFAULT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [RawScore] float(24) DEFAULT NULL,
    [MinScore] float(24) DEFAULT NULL,
    [MaxScore] float(24) DEFAULT NULL,
    [EvaluationPoints] float(24) DEFAULT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [InteractionItem] TO LearningStore

-- Create InteractionObjectiveItem table
CREATE TABLE [InteractionObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [InteractionId] bigint NOT NULL,
    [AttemptObjectiveId] bigint NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [InteractionObjectiveItem] TO LearningStore

-- Create LearnerGlobalObjectiveItem table
CREATE TABLE [LearnerGlobalObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [LearnerId] bigint NOT NULL,
    [GlobalObjectiveId] bigint NOT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [SuccessStatus] int NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [LearnerGlobalObjectiveItem] TO LearningStore

-- Create MapActivityObjectiveToGlobalObjectiveItem table
CREATE TABLE [MapActivityObjectiveToGlobalObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityObjectiveId] bigint NOT NULL,
    [GlobalObjectiveId] bigint NOT NULL,
    [ReadSatisfiedStatus] bit NOT NULL DEFAULT 1,
    [ReadNormalizedMeasure] bit NOT NULL DEFAULT 1,
    [WriteSatisfiedStatus] bit NOT NULL DEFAULT 0,
    [WriteNormalizedMeasure] bit NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [MapActivityObjectiveToGlobalObjectiveItem] TO LearningStore

-- Create PackageItem table
CREATE TABLE [PackageItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [PackageFormat] int NOT NULL,
    [Location] nvarchar(260) NOT NULL,
    [Manifest] xml NOT NULL,
    [Warnings] xml DEFAULT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [PackageItem] TO LearningStore

-- Create RubricItem table
CREATE TABLE [RubricItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [InteractionId] bigint NOT NULL,
    [Ordinal] int NOT NULL,
    [IsSatisfied] bit DEFAULT NULL,
    [Points] float(24) DEFAULT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [RubricItem] TO LearningStore

-- Create ResourceItem table
CREATE TABLE [ResourceItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [PackageId] bigint NOT NULL,
    [ResourceXml] xml NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ResourceItem] TO LearningStore

-- Create SequencingLogEntryItem table
CREATE TABLE [SequencingLogEntryItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [AttemptId] bigint NOT NULL,
    [ActivityAttemptId] bigint,
    [EventType] int NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [NavigationCommand] int NOT NULL,
    [Timestamp] datetime NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [SequencingLogEntryItem] TO LearningStore

-- Create UserItem table
CREATE TABLE [UserItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [Key] nvarchar(250) NOT NULL,
    [Name] nvarchar(255) NOT NULL,
    [AudioCaptioning] int NOT NULL DEFAULT 0,
    [AudioLevel] float(24) NOT NULL DEFAULT 1,
    [DeliverySpeed] float(24) NOT NULL DEFAULT 1,
    [Language] nvarchar(255) NOT NULL DEFAULT ''
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [UserItem] TO LearningStore

-- Create SiteSettingsItem table
CREATE TABLE [SiteSettingsItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [SiteGuid] uniqueidentifier NOT NULL,
    [SettingsXml] nvarchar(max) NOT NULL,
    [SettingsXmlLastModified] datetime NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [SiteSettingsItem] TO LearningStore

-- Create AssignmentItem table
CREATE TABLE [AssignmentItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [SPSiteGuid] uniqueidentifier NOT NULL,
    [SPWebGuid] uniqueidentifier NOT NULL,
    [RootActivityId] bigint,
    [NonELearningLocation] nvarchar(1000),
    [Title] nvarchar(1000) NOT NULL,
    [StartDate] datetime NOT NULL,
    [DueDate] datetime,
    [PointsPossible] float(24),
    [Description] nvarchar(max) NOT NULL,
    [AutoReturn] bit NOT NULL,
    [ShowAnswersToLearners] bit NOT NULL,
    [CreatedBy] bigint,
    [DateCreated] datetime NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [AssignmentItem] TO LearningStore

-- Create InstructorAssignmentItem table
CREATE TABLE [InstructorAssignmentItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [AssignmentId] bigint NOT NULL,
    [InstructorId] bigint NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [InstructorAssignmentItem] TO LearningStore

-- Create LearnerAssignmentItem table
CREATE TABLE [LearnerAssignmentItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [AssignmentId] bigint NOT NULL,
    [LearnerId] bigint NOT NULL,
    [IsFinal] bit NOT NULL,
    [NonELearningStatus] int,
    [FinalPoints] float(24),
    [InstructorComments] nvarchar(max) NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [LearnerAssignmentItem] TO LearningStore

-- Create UserWebListItem table
CREATE TABLE [UserWebListItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [OwnerKey] nvarchar(250) NOT NULL,
    [SPSiteGuid] uniqueidentifier NOT NULL,
    [SPWebGuid] uniqueidentifier NOT NULL,
    [LastAccessTime] datetime NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [UserWebListItem] TO LearningStore

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_AttemptId FOREIGN KEY ([AttemptId])
REFERENCES [AttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_ActivityPackageId FOREIGN KEY ([ActivityPackageId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_CompletionStatus FOREIGN KEY ([CompletionStatus])
REFERENCES [CompletionStatus] (Id)

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_Exit FOREIGN KEY ([Exit])
REFERENCES [ExitMode] (Id)

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_LessonStatus FOREIGN KEY ([LessonStatus])
REFERENCES [LessonStatus] (Id)

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

CREATE INDEX AttemptIndex
ON ActivityAttemptItem(AttemptId)

CREATE INDEX ActivityPackageIndex
ON ActivityAttemptItem(ActivityPackageId, AttemptId)

ALTER TABLE [ActivityObjectiveItem]
ADD CONSTRAINT FK_ActivityObjectiveItem_ActivityPackageId FOREIGN KEY ([ActivityPackageId])
REFERENCES [ActivityPackageItem] (Id) ON DELETE CASCADE

CREATE INDEX ActivityPackageIndex
ON ActivityObjectiveItem(ActivityPackageId)

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_ParentActivityId FOREIGN KEY ([ParentActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_PackageId FOREIGN KEY ([PackageId])
REFERENCES [PackageItem] (Id) ON DELETE CASCADE

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_PrimaryObjectiveId FOREIGN KEY ([PrimaryObjectiveId])
REFERENCES [ActivityObjectiveItem] (Id)

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_ResourceId FOREIGN KEY ([ResourceId])
REFERENCES [ResourceItem] (Id)

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_TimeLimitAction FOREIGN KEY ([TimeLimitAction])
REFERENCES [TimeLimitAction] (Id)

CREATE INDEX PackageIndex
ON ActivityPackageItem(PackageId)

CREATE INDEX ParentActivityIndex
ON ActivityPackageItem(ParentActivityId)

ALTER TABLE [PackageGlobalObjectiveItem]
ADD CONSTRAINT FK_PackageGlobalObjectiveItem_LearnerId FOREIGN KEY ([LearnerId])
REFERENCES [UserItem] (Id) ON DELETE CASCADE

ALTER TABLE [PackageGlobalObjectiveItem]
ADD CONSTRAINT FK_PackageGlobalObjectiveItem_GlobalObjectiveId FOREIGN KEY ([GlobalObjectiveId])
REFERENCES [GlobalObjectiveItem] (Id) ON DELETE CASCADE

ALTER TABLE [PackageGlobalObjectiveItem]
ADD CONSTRAINT FK_PackageGlobalObjectiveItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

CREATE INDEX GlobalObjectiveIndex
ON PackageGlobalObjectiveItem(GlobalObjectiveId)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_LearnerId FOREIGN KEY ([LearnerId])
REFERENCES [UserItem] (Id) ON DELETE CASCADE

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_RootActivityId FOREIGN KEY ([RootActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_CompletionStatus FOREIGN KEY ([CompletionStatus])
REFERENCES [CompletionStatus] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_CurrentActivityId FOREIGN KEY ([CurrentActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_SuspendedActivityId FOREIGN KEY ([SuspendedActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_PackageId FOREIGN KEY ([PackageId])
REFERENCES [PackageItem] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_AttemptStatus FOREIGN KEY ([AttemptStatus])
REFERENCES [AttemptStatus] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_LearnerAssignmentId FOREIGN KEY ([LearnerAssignmentId])
REFERENCES [LearnerAssignmentItem] (Id) ON DELETE CASCADE

CREATE INDEX LearnerAssignmentIndex
ON AttemptItem(LearnerAssignmentId)
INCLUDE (AttemptStatus)

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_ActivityObjectiveId FOREIGN KEY ([ActivityObjectiveId])
REFERENCES [ActivityObjectiveItem] (Id)

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_CompletionStatus FOREIGN KEY ([CompletionStatus])
REFERENCES [CompletionStatus] (Id)

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_LessonStatus FOREIGN KEY ([LessonStatus])
REFERENCES [LessonStatus] (Id)

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

CREATE INDEX ActivityAttemptIndex
ON AttemptObjectiveItem(ActivityAttemptId, ActivityObjectiveId)

ALTER TABLE [CommentFromLearnerItem]
ADD CONSTRAINT FK_CommentFromLearnerItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id) ON DELETE CASCADE

CREATE INDEX ActivityAttemptIndex
ON CommentFromLearnerItem(ActivityAttemptId)

ALTER TABLE [CommentFromLmsItem]
ADD CONSTRAINT FK_CommentFromLmsItem_ActivityPackageId FOREIGN KEY ([ActivityPackageId])
REFERENCES [ActivityPackageItem] (Id) ON DELETE CASCADE

CREATE INDEX ActivityPackageIndex
ON CommentFromLmsItem(ActivityPackageId)

ALTER TABLE [CorrectResponseItem]
ADD CONSTRAINT FK_CorrectResponseItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id) ON DELETE CASCADE

CREATE INDEX InteractionIndex
ON CorrectResponseItem(InteractionId)

ALTER TABLE [EvaluationCommentItem]
ADD CONSTRAINT FK_EvaluationCommentItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id) ON DELETE CASCADE

CREATE INDEX EvaluationCommentIndex
ON EvaluationCommentItem(InteractionId)

ALTER TABLE [ExtensionDataItem]
ADD CONSTRAINT FK_ExtensionDataItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [ExtensionDataItem]
ADD CONSTRAINT FK_ExtensionDataItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id)

ALTER TABLE [ExtensionDataItem]
ADD CONSTRAINT FK_ExtensionDataItem_AttemptObjectiveId FOREIGN KEY ([AttemptObjectiveId])
REFERENCES [AttemptObjectiveItem] (Id)

CREATE INDEX ActivityAttemptIndex
ON ExtensionDataItem(ActivityAttemptId, AttachmentGuid, InteractionId, AttemptObjectiveId)

CREATE INDEX AttachmentGuidIndex
ON ExtensionDataItem(AttachmentGuid, AttemptObjectiveId)

CREATE INDEX InteractionAndObjectiveIndex
ON ExtensionDataItem(InteractionId, AttemptObjectiveId)

ALTER TABLE [GlobalObjectiveItem]
ADD CONSTRAINT FK_GlobalObjectiveItem_OrganizationId FOREIGN KEY ([OrganizationId])
REFERENCES [ActivityPackageItem] (Id) ON DELETE CASCADE

CREATE INDEX OrganizationIndex
ON GlobalObjectiveItem(OrganizationId)

ALTER TABLE [InteractionItem]
ADD CONSTRAINT FK_InteractionItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [InteractionItem]
ADD CONSTRAINT FK_InteractionItem_InteractionType FOREIGN KEY ([InteractionType])
REFERENCES [InteractionType] (Id)

ALTER TABLE [InteractionItem]
ADD CONSTRAINT FK_InteractionItem_ResultState FOREIGN KEY ([ResultState])
REFERENCES [InteractionResultState] (Id)

CREATE INDEX ActivityAttemptIndex
ON InteractionItem(ActivityAttemptId)

ALTER TABLE [InteractionObjectiveItem]
ADD CONSTRAINT FK_InteractionObjectiveItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id) ON DELETE CASCADE

ALTER TABLE [InteractionObjectiveItem]
ADD CONSTRAINT FK_InteractionObjectiveItem_AttemptObjectiveId FOREIGN KEY ([AttemptObjectiveId])
REFERENCES [AttemptObjectiveItem] (Id)

CREATE INDEX InteractionIndex
ON InteractionObjectiveItem(InteractionId)

ALTER TABLE [LearnerGlobalObjectiveItem]
ADD CONSTRAINT FK_LearnerGlobalObjectiveItem_LearnerId FOREIGN KEY ([LearnerId])
REFERENCES [UserItem] (Id) ON DELETE CASCADE

ALTER TABLE [LearnerGlobalObjectiveItem]
ADD CONSTRAINT FK_LearnerGlobalObjectiveItem_GlobalObjectiveId FOREIGN KEY ([GlobalObjectiveId])
REFERENCES [GlobalObjectiveItem] (Id) ON DELETE CASCADE

ALTER TABLE [LearnerGlobalObjectiveItem]
ADD CONSTRAINT FK_LearnerGlobalObjectiveItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

CREATE INDEX LearnerIndex
ON LearnerGlobalObjectiveItem(LearnerId, GlobalObjectiveId)

ALTER TABLE [MapActivityObjectiveToGlobalObjectiveItem]
ADD CONSTRAINT FK_MapActivityObjectiveToGlobalObjectiveItem_ActivityObjectiveId FOREIGN KEY ([ActivityObjectiveId])
REFERENCES [ActivityObjectiveItem] (Id) ON DELETE CASCADE

ALTER TABLE [MapActivityObjectiveToGlobalObjectiveItem]
ADD CONSTRAINT FK_MapActivityObjectiveToGlobalObjectiveItem_GlobalObjectiveId FOREIGN KEY ([GlobalObjectiveId])
REFERENCES [GlobalObjectiveItem] (Id)

CREATE INDEX GlobalObjectiveIndex
ON MapActivityObjectiveToGlobalObjectiveItem(GlobalObjectiveId, ActivityObjectiveId)

ALTER TABLE [PackageItem]
ADD CONSTRAINT FK_PackageItem_PackageFormat FOREIGN KEY ([PackageFormat])
REFERENCES [PackageFormat] (Id)

ALTER TABLE [RubricItem]
ADD CONSTRAINT FK_RubricItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id) ON DELETE CASCADE

CREATE INDEX InteractionIndex
ON RubricItem(InteractionId)

ALTER TABLE [ResourceItem]
ADD CONSTRAINT FK_ResourceItem_PackageId FOREIGN KEY ([PackageId])
REFERENCES [PackageItem] (Id) ON DELETE CASCADE

ALTER TABLE [SequencingLogEntryItem]
ADD CONSTRAINT FK_SequencingLogEntryItem_AttemptId FOREIGN KEY ([AttemptId])
REFERENCES [AttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [SequencingLogEntryItem]
ADD CONSTRAINT FK_SequencingLogEntryItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id)

ALTER TABLE [SequencingLogEntryItem]
ADD CONSTRAINT FK_SequencingLogEntryItem_EventType FOREIGN KEY ([EventType])
REFERENCES [SequencingEventType] (Id)

ALTER TABLE [SequencingLogEntryItem]
ADD CONSTRAINT FK_SequencingLogEntryItem_NavigationCommand FOREIGN KEY ([NavigationCommand])
REFERENCES [NavigationCommand] (Id)

ALTER TABLE [UserItem]
ADD CONSTRAINT FK_UserItem_AudioCaptioning FOREIGN KEY ([AudioCaptioning])
REFERENCES [AudioCaptioning] (Id)

CREATE INDEX KeyIndex
ON UserItem([Key])

ALTER TABLE [AssignmentItem]
ADD CONSTRAINT FK_AssignmentItem_RootActivityId FOREIGN KEY ([RootActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [AssignmentItem]
ADD CONSTRAINT FK_AssignmentItem_CreatedBy FOREIGN KEY ([CreatedBy])
REFERENCES [UserItem] (Id)

CREATE INDEX SPWebIndex
ON AssignmentItem(SPWebGuid)

ALTER TABLE [InstructorAssignmentItem]
ADD CONSTRAINT FK_InstructorAssignmentItem_AssignmentId FOREIGN KEY ([AssignmentId])
REFERENCES [AssignmentItem] (Id) ON DELETE CASCADE

ALTER TABLE [InstructorAssignmentItem]
ADD CONSTRAINT FK_InstructorAssignmentItem_InstructorId FOREIGN KEY ([InstructorId])
REFERENCES [UserItem] (Id) ON DELETE CASCADE

CREATE INDEX AssignmentIndex
ON InstructorAssignmentItem(AssignmentId,InstructorId)

CREATE INDEX InstructorIndex
ON InstructorAssignmentItem(InstructorId,AssignmentId)

ALTER TABLE [LearnerAssignmentItem]
ADD CONSTRAINT FK_LearnerAssignmentItem_AssignmentId FOREIGN KEY ([AssignmentId])
REFERENCES [AssignmentItem] (Id) ON DELETE CASCADE

ALTER TABLE [LearnerAssignmentItem]
ADD CONSTRAINT FK_LearnerAssignmentItem_LearnerId FOREIGN KEY ([LearnerId])
REFERENCES [UserItem] (Id)

ALTER TABLE [LearnerAssignmentItem]
ADD CONSTRAINT FK_LearnerAssignmentItem_NonELearningStatus FOREIGN KEY ([NonELearningStatus])
REFERENCES [AttemptStatus] (Id)

CREATE INDEX AssignmentIndex
ON LearnerAssignmentItem(AssignmentId,LearnerId)
INCLUDE (IsFinal, NonELearningStatus)

CREATE INDEX LearnerIndex
ON LearnerAssignmentItem(LearnerId,AssignmentId)

CREATE INDEX OwnerIndex
ON UserWebListItem(OwnerKey)

GO

-- Create function for the delete security on the AssignmentItem item type
CREATE FUNCTION [AssignmentItem$DeleteSecurity](@UserKey nvarchar(250),@Id bigint)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM InstructorAssignmentItem iai
    INNER JOIN UserItem ui ON iai.InstructorId=ui.Id
    WHERE iai.AssignmentId=@Id AND
    ui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    ) | (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM AssignmentItem ai
    INNER JOIN UserItem ui ON ai.CreatedBy=ui.Id
    WHERE ai.Id=@Id AND
    ui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [AssignmentItem$DeleteSecurity] TO LearningStore
GO

-- Create a function that implements the SeqNavOrganizationGlobalObjectiveView view
CREATE FUNCTION [SeqNavOrganizationGlobalObjectiveView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT GlobalObjectiveItem.OrganizationId OrganizationId, GlobalObjectiveItem.[Key] [Key], PackageGlobalObjectiveItem.LearnerId LearnerId, PackageGlobalObjectiveItem.ScaledScore ScaledScore, PackageGlobalObjectiveItem.SuccessStatus SuccessStatus
    FROM GlobalObjectiveItem
    INNER JOIN PackageGlobalObjectiveItem ON PackageGlobalObjectiveItem.GlobalObjectiveId=GlobalObjectiveItem.Id
)
GO
GRANT SELECT ON [SeqNavOrganizationGlobalObjectiveView] TO LearningStore
GO

-- Create a function that implements the SeqNavLearnerGlobalObjectiveView view
CREATE FUNCTION [SeqNavLearnerGlobalObjectiveView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT LearnerGlobalObjectiveItem.LearnerId LearnerId, GlobalObjectiveItem.[Key] [Key], LearnerGlobalObjectiveItem.ScaledScore ScaledScore, LearnerGlobalObjectiveItem.SuccessStatus SuccessStatus
    FROM GlobalObjectiveItem
    INNER JOIN LearnerGlobalObjectiveItem ON LearnerGlobalObjectiveItem.GlobalObjectiveId=GlobalObjectiveItem.Id
)
GO
GRANT SELECT ON [SeqNavLearnerGlobalObjectiveView] TO LearningStore
GO

-- Create a function that implements the SeqNavActivityPackageView view
CREATE FUNCTION [SeqNavActivityPackageView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ActivityPackageItem.Id, ActivityPackageItem.PackageId,PackageItem.PackageFormat PackageFormat, PackageItem.Location PackagePath
    FROM ActivityPackageItem
    INNER JOIN PackageItem ON ActivityPackageItem.PackageId=PackageItem.Id
)
GO
GRANT SELECT ON [SeqNavActivityPackageView] TO LearningStore
GO

-- Create a function that implements the SeqNavActivityTreeView view
CREATE FUNCTION [SeqNavActivityTreeView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    WITH TreeQuery(Id, ParentActivityId, DataModelCache, RootActivityId, ObjectivesGlobalToSystem)
    AS (
    SELECT Id, ParentActivityId, DataModelCache, Id, ObjectivesGlobalToSystem
    FROM ActivityPackageItem
    UNION ALL
    SELECT t1.Id, t1.ParentActivityId, t1.DataModelCache, t2.RootActivityId, t1.ObjectivesGlobalToSystem
    FROM TreeQuery t2
    INNER JOIN ActivityPackageItem t1 ON t1.ParentActivityId=t2.Id )
    SELECT Id, ParentActivityId, DataModelCache, RootActivityId, ObjectivesGlobalToSystem
    FROM TreeQuery
)
GO
GRANT SELECT ON [SeqNavActivityTreeView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptView view
CREATE FUNCTION [SeqNavAttemptView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT AttemptItem.Id Id, AttemptItem.AttemptStatus, AttemptItem.LogDetailSequencing, AttemptItem.LogFinalSequencing, AttemptItem.LogRollup, AttemptItem.CurrentActivityId, AttemptItem.SuspendedActivityId, AttemptItem.RootActivityId,AttemptItem.StartedTimestamp, AttemptItem.FinishedTimestamp,PackageItem.Id PackageId, PackageItem.PackageFormat PackageFormat, PackageItem.Location PackagePath, UserItem.Id LearnerId, UserItem.Name LearnerName, UserItem.AudioCaptioning LearnerAudioCaptioning, UserItem.AudioLevel LearnerAudioLevel, UserItem.DeliverySpeed LearnerDeliverySpeed, UserItem.Language LearnerLanguage, AttemptItem.TotalPoints, AttemptItem.SuccessStatus, AttemptItem.CompletionStatus
    FROM AttemptItem
    INNER JOIN PackageItem ON AttemptItem.PackageId=PackageItem.Id
    INNER JOIN UserItem ON AttemptItem.LearnerId=UserItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptView] TO LearningStore
GO

-- Create a function that implements the SeqNavActivityAttemptView view
CREATE FUNCTION [SeqNavActivityAttemptView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ActivityAttemptItem.Id, ActivityAttemptItem.DataModelCache, ActivityAttemptItem.SequencingDataCache, ActivityAttemptItem.RandomPlacement, ActivityAttemptItem.AttemptId, ActivityAttemptItem.ActivityPackageId, ActivityPackageItem.DataModelCache StaticDataModelCache, ActivityPackageItem.ParentActivityId ParentId, ActivityPackageItem.ObjectivesGlobalToSystem ObjectivesGlobalToSystem, ActivityAttemptItem.CompletionStatus, ActivityAttemptItem.AttemptCount, ActivityAttemptItem.EvaluationPoints, ActivityAttemptItem.[Exit], ActivityAttemptItem.LessonStatus, ActivityAttemptItem.Location, ActivityAttemptItem.MinScore, ActivityAttemptItem.MaxScore, ActivityAttemptItem.ProgressMeasure, ActivityAttemptItem.RawScore, ActivityAttemptItem.ScaledScore, ActivityAttemptItem.SessionStartTimestamp, ActivityAttemptItem.SessionTime, ActivityAttemptItem.SuccessStatus, ActivityAttemptItem.SuspendData, ActivityAttemptItem.TotalTime
    FROM ActivityAttemptItem
    INNER JOIN ActivityPackageItem ON ActivityAttemptItem.ActivityPackageId=ActivityPackageItem.Id
)
GO
GRANT SELECT ON [SeqNavActivityAttemptView] TO LearningStore
GO

-- Create a function that implements the SeqNavCurrentActivityAttemptView view
CREATE FUNCTION [SeqNavCurrentActivityAttemptView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ActivityAttemptItem.Id, ActivityAttemptItem.DataModelCache DataModelCache, ActivityAttemptItem.SequencingDataCache, ActivityAttemptItem.RandomPlacement, ActivityAttemptItem.AttemptId, ActivityPackageItem.DataModelCache StaticDataModelCache, ActivityPackageItem.ObjectivesGlobalToSystem ObjectivesGlobalToSystem, ActivityPackageItem.Credit Credit
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN ActivityPackageItem ON ActivityAttemptItem.ActivityPackageId=ActivityPackageItem.Id
    WHERE AttemptItem.CurrentActivityId=ActivityPackageItem.Id
)
GO
GRANT SELECT ON [SeqNavCurrentActivityAttemptView] TO LearningStore
GO

-- Create a function that implements the SeqNavCurrentCommentFromLmsView view
CREATE FUNCTION [SeqNavCurrentCommentFromLmsView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT CommentFromLmsItem.Comment, CommentFromLmsItem.Location, CommentFromLmsItem.Timestamp, AttemptItem.Id AttemptId, ActivityAttemptItem.DataModelCache
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN ActivityPackageItem ON ActivityAttemptItem.ActivityPackageId=ActivityPackageItem.Id
    INNER JOIN CommentFromLmsItem ON ActivityPackageItem.Id=CommentFromLmsItem.ActivityPackageId
    WHERE AttemptItem.CurrentActivityId=ActivityPackageItem.Id
)
GO
GRANT SELECT ON [SeqNavCurrentCommentFromLmsView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptObjectiveView view
CREATE FUNCTION [SeqNavAttemptObjectiveView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT AttemptObjectiveItem.Id AttemptObjectiveId, AttemptItem.Id AttemptId, AttemptObjectiveItem.CompletionStatus, AttemptObjectiveItem.Description, AttemptObjectiveItem.[Key], AttemptObjectiveItem.LessonStatus, AttemptObjectiveItem.RawScore, AttemptObjectiveItem.MinScore, AttemptObjectiveItem.MaxScore, AttemptObjectiveItem.ProgressMeasure, AttemptObjectiveItem.ScaledScore, AttemptObjectiveItem.SuccessStatus, AttemptObjectiveItem.ActivityAttemptId, AttemptObjectiveItem.IsPrimaryObjective
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN AttemptObjectiveItem ON AttemptObjectiveItem.ActivityAttemptId=ActivityAttemptItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptObjectiveView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptCommentFromLearnerView view
CREATE FUNCTION [SeqNavAttemptCommentFromLearnerView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT CommentFromLearnerItem.Id CommentFromLearnerId, AttemptItem.Id AttemptId, CommentFromLearnerItem.Comment, CommentFromLearnerItem.Location, CommentFromLearnerItem.Timestamp, CommentFromLearnerItem.ActivityAttemptId, CommentFromLearnerItem.Ordinal
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN CommentFromLearnerItem ON CommentFromLearnerItem.ActivityAttemptId=ActivityAttemptItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptCommentFromLearnerView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptInteractionView view
CREATE FUNCTION [SeqNavAttemptInteractionView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT InteractionItem.Id InteractionId, AttemptItem.Id AttemptId, InteractionItem.InteractionIdFromCmi, InteractionItem.InteractionType, InteractionItem.Timestamp, InteractionItem.Weighting, InteractionItem.ResultState, InteractionItem.ResultNumeric, InteractionItem.Latency, InteractionItem.Description, InteractionItem.LearnerResponseBool, InteractionItem.LearnerResponseString, InteractionItem.LearnerResponseNumeric, InteractionItem.ScaledScore, InteractionItem.RawScore, InteractionItem.MinScore, InteractionItem.MaxScore, InteractionItem.ActivityAttemptId, InteractionItem.EvaluationPoints
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptInteractionView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptEvaluationCommentLearnerView view
CREATE FUNCTION [SeqNavAttemptEvaluationCommentLearnerView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT EvaluationCommentItem.Id EvaluationCommentId, AttemptItem.Id AttemptId, EvaluationCommentItem.Comment, EvaluationCommentItem.Location, EvaluationCommentItem.Timestamp, EvaluationCommentItem.InteractionId, EvaluationCommentItem.Ordinal
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN EvaluationCommentItem ON EvaluationCommentItem.InteractionId=InteractionItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptEvaluationCommentLearnerView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptCorrectResponseView view
CREATE FUNCTION [SeqNavAttemptCorrectResponseView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT CorrectResponseItem.Id CorrectResponseId, AttemptItem.Id AttemptId, CorrectResponseItem.InteractionId, CorrectResponseItem.ResponsePattern
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN CorrectResponseItem ON CorrectResponseItem.InteractionId=InteractionItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptCorrectResponseView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptInteractionObjectiveView view
CREATE FUNCTION [SeqNavAttemptInteractionObjectiveView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT InteractionObjectiveItem.Id InteractionObjectiveId, AttemptItem.Id AttemptId, InteractionObjectiveItem.AttemptObjectiveId, InteractionObjectiveItem.InteractionId
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN InteractionObjectiveItem ON InteractionObjectiveItem.InteractionId=InteractionItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptInteractionObjectiveView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptExtensionDataView view
CREATE FUNCTION [SeqNavAttemptExtensionDataView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ExtensionDataItem.Id ExtensionDataId, AttemptItem.Id AttemptId, ExtensionDataItem.Name, ExtensionDataItem.StringValue, ExtensionDataItem.IntValue, ExtensionDataItem.BoolValue, ExtensionDataItem.DoubleValue, ExtensionDataItem.DateTimeValue, ExtensionDataItem.AttachmentGuid, ExtensionDataItem.ActivityAttemptId
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN ExtensionDataItem ON ExtensionDataItem.ActivityAttemptId=ActivityAttemptItem.Id
    WHERE ExtensionDataItem.AttemptObjectiveId IS NULL AND
    ExtensionDataItem.InteractionId IS NULL
)
GO
GRANT SELECT ON [SeqNavAttemptExtensionDataView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptObjectiveExtensionDataView view
CREATE FUNCTION [SeqNavAttemptObjectiveExtensionDataView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ExtensionDataItem.Id ExtensionDataId, ExtensionDataItem.AttemptObjectiveId, AttemptItem.Id AttemptId, ExtensionDataItem.Name, ExtensionDataItem.StringValue, ExtensionDataItem.IntValue, ExtensionDataItem.BoolValue, ExtensionDataItem.DoubleValue, ExtensionDataItem.DateTimeValue, ExtensionDataItem.AttachmentGuid, ExtensionDataItem.AttachmentValue
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN AttemptObjectiveItem ON AttemptObjectiveItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN ExtensionDataItem ON ExtensionDataItem.AttemptObjectiveId=AttemptObjectiveItem.Id
    WHERE ExtensionDataItem.InteractionId IS NULL AND
    ExtensionDataItem.AttemptObjectiveId IS NOT NULL
)
GO
GRANT SELECT ON [SeqNavAttemptObjectiveExtensionDataView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptInteractionExtensionDataView view
CREATE FUNCTION [SeqNavAttemptInteractionExtensionDataView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ExtensionDataItem.Id ExtensionDataId, ExtensionDataItem.InteractionId, AttemptItem.Id AttemptId, ExtensionDataItem.Name, ExtensionDataItem.StringValue, ExtensionDataItem.IntValue, ExtensionDataItem.BoolValue, ExtensionDataItem.DoubleValue, ExtensionDataItem.DateTimeValue, ExtensionDataItem.AttachmentGuid, ExtensionDataItem.AttachmentValue
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN ExtensionDataItem ON ExtensionDataItem.InteractionId=InteractionItem.Id
    WHERE ExtensionDataItem.AttemptObjectiveId IS NULL AND
    ExtensionDataItem.InteractionId IS NOT NULL
)
GO
GRANT SELECT ON [SeqNavAttemptInteractionExtensionDataView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptRubricView view
CREATE FUNCTION [SeqNavAttemptRubricView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT RubricItem.Id RubricItemId, AttemptItem.Id AttemptId, RubricItem.InteractionId, RubricItem.Ordinal, RubricItem.IsSatisfied, RubricItem.Points
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN RubricItem ON RubricItem.InteractionId=InteractionItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptRubricView] TO LearningStore
GO

-- Create a function that implements the LearnerAssignmentView view
CREATE FUNCTION [LearnerAssignmentView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from LearnerAssignmentItem -----
    lai.Id                          LearnerAssignmentId,
    lai.LearnerId                   LearnerId,
    ----- from AssignmentItem -----
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.RootActivityId              RootActivityId,
    ----- from AttemptItem -----
    ati.Id AttemptId,
    ati.TotalPoints                 AttemptGradedPoints,
    ----- computed LearnerAssignmentState -----
    dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) LearnerAssignmentState
    -----
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem asi ON lai.AssignmentId = asi.Id
    LEFT OUTER JOIN AttemptItem ati ON ati.LearnerAssignmentId = lai.Id
)
GO
GRANT SELECT ON [LearnerAssignmentView] TO LearningStore
GO

-- Create a function that implements the AssignmentPropertiesView view
CREATE FUNCTION [AssignmentPropertiesView](@UserKey nvarchar(250),@AssignmentId bigint=NULL,@IsInstructor bit=NULL)
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    asi.DateCreated                 AssignmentDateCreated,
    asi.RootActivityId              RootActivityId,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation
    -----
    FROM AssignmentItem asi
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki ON api.PackageId = pki.Id
    WHERE asi.Id = @AssignmentId
)
GO
GRANT SELECT ON [AssignmentPropertiesView] TO LearningStore
GO

-- Create function for the security on the AssignmentPropertiesView view
CREATE FUNCTION [AssignmentPropertiesView$Security](@UserKey nvarchar(250),@AssignmentId bigint=NULL,@IsInstructor bit=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM AssignmentItem asi
    LEFT OUTER JOIN LearnerAssignmentItem lai ON lai.AssignmentId = asi.Id
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = asi.Id
    LEFT OUTER JOIN UserItem lui ON lai.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE asi.Id = @AssignmentId AND
    (((lui.[Key] = @UserKey) AND (@IsInstructor = 0) AND (GETUTCDATE() &gt;= asi.StartDate))
    OR
    ((iui.[Key]=@UserKey) AND (@IsInstructor = 1)))
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [AssignmentPropertiesView$Security] TO LearningStore
GO

-- Create a function that implements the AssignmentListForInstructors view
CREATE FUNCTION [AssignmentListForInstructors](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    asi.DateCreated                 AssignmentDateCreated,
    asi.RootActivityId              RootActivityId,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    ----- from learner assignment computed info -----
    ISNULL(la.CountTotal,0)         CountTotal,
    ISNULL(la.CountNotStarted,0)    CountNotStarted,
    ISNULL(la.CountActive,0)        CountActive,
    ISNULL(la.CountCompleted,0)     CountCompleted,
    ISNULL(la.CountFinal,0)         CountFinal,
    ISNULL(la.CountStarted,0)       CountStarted,
    ISNULL(la.CountNotStartedOrActive,0) CountNotStartedOrActive,
    ISNULL(la.CountCompletedOrFinal,0) CountCompletedOrFinal,
    ISNULL(la.CountNotFinal,0)      CountNotFinal,
    la.MinGradedPoints              MinGradedPoints,
    la.MaxGradedPoints              MaxGradedPoints,
    la.AvgGradedPoints              AvgGradedPoints,
    la.MinFinalPoints               MinFinalPoints,
    la.MaxFinalPoints               MaxFinalPoints,
    la.AvgFinalPoints               AvgFinalPoints
    -----
    FROM AssignmentItem asi
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    INNER JOIN InstructorAssignmentItem iai ON asi.Id = iai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki ON api.PackageId = pki.Id
    LEFT OUTER JOIN (
    SELECT
    ----- from Assignment -----
    lai.AssignmentId,
    ----- computed CountTotal -----
    COUNT(lai.Id) CountTotal,
    ----- computed CountNotStarted -----
    COUNT(CASE WHEN dbo.IsLearnerAssignmentStarted(asi.RootActivityId, lai.NonELearningStatus, ati.AttemptStatus) = 0 THEN 1 ELSE NULL END) CountNotStarted,
    ----- computed CountActive -----
    COUNT(CASE WHEN dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) = 1 THEN 1 ELSE NULL END) CountActive,
    ----- computed CountCompleted -----
    COUNT(CASE WHEN dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) = 2 THEN 1 ELSE NULL END) CountCompleted,
    ----- computed CountFinal -----
    COUNT(CASE WHEN lai.IsFinal = 1 THEN 1 ELSE NULL END) CountFinal,
    ----- computed CountStarted -----
    COUNT(CASE WHEN dbo.IsLearnerAssignmentStarted(asi.RootActivityId, lai.NonELearningStatus, ati.AttemptStatus) &lt;&gt; 0 THEN 1 ELSE NULL END) CountStarted,
    ----- computed CountNotStartedOrActive -----
    COUNT(CASE WHEN dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) IN (0,1) THEN 1 ELSE NULL END) CountNotStartedOrActive,
    ----- computed CountCompletedOrFinal -----
    COUNT(CASE WHEN dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) IN (2,3) THEN 1 ELSE NULL END) CountCompletedOrFinal,
    ----- computed CountNotFinal -----
    COUNT(CASE WHEN lai.IsFinal = 0 THEN 1 ELSE NULL END) CountNotFinal,
    ----- computed MinGradedPoints -----
    MIN(ati.TotalPoints)              MinGradedPoints,
    ----- computed MaxGradedPoints -----
    MAX(ati.TotalPoints)              MaxGradedPoints,
    ----- computed AvgGradedPoints -----
    AVG(ati.TotalPoints)              AvgGradedPoints,
    ----- computed MinFinalPoints -----
    MIN(lai.FinalPoints)              MinFinalPoints,
    ----- computed MaxFinalPoints -----
    MAX(lai.FinalPoints)              MaxFinalPoints,
    ----- computed AvgFinalPoints -----
    AVG(lai.FinalPoints)              AvgFinalPoints
    -----
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem asi ON lai.AssignmentId = asi.Id
    LEFT OUTER JOIN AttemptItem ati ON ati.LearnerAssignmentId = lai.Id
    INNER JOIN InstructorAssignmentItem iai ON asi.Id = iai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE iui.[Key] = @UserKey
    GROUP BY lai.AssignmentId) AS la ON asi.Id = la.AssignmentId
    WHERE iui.[Key] = @UserKey
)
GO
GRANT SELECT ON [AssignmentListForInstructors] TO LearningStore
GO

-- Create function for the security on the AssignmentListForInstructors view
CREATE FUNCTION [AssignmentListForInstructors$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [AssignmentListForInstructors$Security] TO LearningStore
GO

-- Create a function that implements the InstructorAssignmentListForInstructors view
CREATE FUNCTION [InstructorAssignmentListForInstructors](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from InstructorAssignmentItem -----
    iai.Id                          InstructorAssignmentId,
    iai.InstructorId                InstructorId,
    iui.[Name]                      InstructorName,
    iui.[Key]                       InstructorKey,
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    pki.Manifest                    PackageManifest
    -----
    FROM InstructorAssignmentItem iai
    INNER JOIN AssignmentItem asi ON iai.AssignmentId = asi.Id
    INNER JOIN UserItem iui ON iui.Id = iai.InstructorId
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki on api.PackageId = pki.Id
    WHERE EXISTS
    (
    SELECT *
    FROM InstructorAssignmentItem iai2
    INNER JOIN UserItem ui2
    ON iai2.InstructorId = ui2.Id
    WHERE iai2.AssignmentId = asi.Id
    AND ui2.[Key] = @UserKey
    )
)
GO
GRANT SELECT ON [InstructorAssignmentListForInstructors] TO LearningStore
GO

-- Create function for the security on the InstructorAssignmentListForInstructors view
CREATE FUNCTION [InstructorAssignmentListForInstructors$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [InstructorAssignmentListForInstructors$Security] TO LearningStore
GO

-- Create a function that implements the LearnerAssignmentListForLearners view
CREATE FUNCTION [LearnerAssignmentListForLearners](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from LearnerAssignmentItem -----
    lai.Id                          LearnerAssignmentId,
    lai.LearnerId                   LearnerId,
    lui.[Name]                      LearnerName,
    lui.[Key]                       LearnerKey,
    lai.IsFinal                     IsFinal,
    lai.NonELearningStatus          NonELearningStatus,
    CASE WHEN lai.IsFinal = 1 THEN lai.FinalPoints ELSE NULL END
    FinalPoints,
    lai.InstructorComments          InstructorComments,
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    asi.DateCreated                 AssignmentDateCreated,
    asi.RootActivityId              RootActivityId,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    ----- from AttemptItem -----
    ati.Id AttemptId,
    ati.CurrentActivityId           AttemptCurrentActivityId,
    ati.SuspendedActivityId         AttemptSuspendedActivityId,
    ati.AttemptStatus               AttemptStatus,
    ati.FinishedTimestamp           AttemptFinishedTimestamp,
    ati.LogDetailSequencing         AttemptLogDetailSequencing,
    ati.LogFinalSequencing          AttemptLogFinalSequencing,
    ati.LogRollup                   AttemptLogRollup,
    ati.StartedTimestamp            AttemptStartedTimestamp,
    ati.CompletionStatus            AttemptCompletionStatus,
    ati.SuccessStatus               AttemptSuccessStatus,
    ati.TotalPoints                 AttemptGradedPoints,
    ----- computed LearnerAssignmentState -----
    dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) LearnerAssignmentState,
    ----- computed HasInstructors -----
    CASE WHEN EXISTS
    (
    SELECT *
    FROM InstructorAssignmentItem iaiH
    WHERE iaiH.AssignmentId = asi.Id
    ) THEN 1 ELSE 0 END             HasInstructors
    -----
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem asi ON lai.AssignmentId = asi.Id
    INNER JOIN UserItem lui ON lui.Id = lai.LearnerId
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki on api.PackageId = pki.Id
    LEFT OUTER JOIN AttemptItem ati ON ati.LearnerAssignmentId = lai.Id
    WHERE lui.[Key] = @UserKey
    AND GETUTCDATE() &gt;= asi.StartDate
)
GO
GRANT SELECT ON [LearnerAssignmentListForLearners] TO LearningStore
GO

-- Create function for the security on the LearnerAssignmentListForLearners view
CREATE FUNCTION [LearnerAssignmentListForLearners$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [LearnerAssignmentListForLearners$Security] TO LearningStore
GO

-- Create a function that implements the LearnerAssignmentListForInstructors view
CREATE FUNCTION [LearnerAssignmentListForInstructors](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from LearnerAssignmentItem -----
    lai.Id                          LearnerAssignmentId,
    lai.LearnerId                   LearnerId,
    lui.[Name]                      LearnerName,
    lui.[Key]                       LearnerKey,
    lai.IsFinal                     IsFinal,
    lai.NonELearningStatus          NonELearningStatus,
    lai.FinalPoints                 FinalPoints,
    lai.InstructorComments          InstructorComments,
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    asi.RootActivityId              RootActivityId,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    pki.Manifest                    PackageManifest,
    ----- from AttemptItem -----
    ati.Id AttemptId,
    ati.CurrentActivityId           AttemptCurrentActivityId,
    ati.SuspendedActivityId         AttemptSuspendedActivityId,
    ati.AttemptStatus               AttemptStatus,
    ati.FinishedTimestamp           AttemptFinishedTimestamp,
    ati.LogDetailSequencing         AttemptLogDetailSequencing,
    ati.LogFinalSequencing          AttemptLogFinalSequencing,
    ati.LogRollup                   AttemptLogRollup,
    ati.StartedTimestamp            AttemptStartedTimestamp,
    ati.CompletionStatus            AttemptCompletionStatus,
    ati.SuccessStatus               AttemptSuccessStatus,
    ati.TotalPoints                 AttemptGradedPoints,
    ----- computed LearnerAssignmentState -----
    dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) LearnerAssignmentState,
    ----- computed HasInstructors -----
    CASE WHEN EXISTS
    (
    SELECT *
    FROM InstructorAssignmentItem iaiH
    WHERE iaiH.AssignmentId = asi.Id
    ) THEN 1 ELSE 0 END             HasInstructors
    -----
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem asi ON lai.AssignmentId = asi.Id
    INNER JOIN UserItem lui ON lui.Id = lai.LearnerId
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    INNER JOIN InstructorAssignmentItem iai ON lai.AssignmentId = iai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki ON api.PackageId = pki.Id
    LEFT OUTER JOIN AttemptItem ati ON ati.LearnerAssignmentId = lai.Id
    WHERE iui.[Key] = @UserKey
)
GO
GRANT SELECT ON [LearnerAssignmentListForInstructors] TO LearningStore
GO

-- Create function for the security on the LearnerAssignmentListForInstructors view
CREATE FUNCTION [LearnerAssignmentListForInstructors$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [LearnerAssignmentListForInstructors$Security] TO LearningStore
GO

-- Create a function that implements the UserWebList view
CREATE FUNCTION [UserWebList](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT SPSiteGuid, SPWebGuid, LastAccessTime
    FROM UserWebListItem
    WHERE OwnerKey = @UserKey
)
GO
GRANT SELECT ON [UserWebList] TO LearningStore
GO

-- Create function for the security on the UserWebList view
CREATE FUNCTION [UserWebList$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [UserWebList$Security] TO LearningStore
GO

-- Create a function that implements the ActivityPackageItemView view
CREATE FUNCTION [ActivityPackageItemView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    pki.Manifest                    PackageManifest,
    ----- from ActivityPackageItem -----
    api.Id                          Id,
    api.ActivityIdFromManifest      ActivityIdFromManifest,
    api.OriginalPlacement           OriginalPlacement,
    api.ParentActivityId            ParentActivityId,
    api.PrimaryObjectiveId          PrimaryObjectiveId,
    api.ResourceId                  ResourceId,
    api.PrimaryResourceFromManifest PrimaryResourceIdFromManifest,
    api.CompletionThreshold         CompletionThreshold,
    api.Credit                      Credit,
    api.IsVisibleInContents         IsVisibleInContents,
    api.LaunchData                  LaunchData,
    api.MaxAttempts                 MaxAttempts,
    api.MaxTimeAllowed              MaxTimeAllowed,
    api.ResourceParameters          ResourceParameters,
    api.ScaledPassingScore          ScaledPassingScore,
    api.TimeLimitAction             TimeLimitAction,
    api.Title                       Title,
    api.ObjectivesGlobalToSystem    ObjectivesGlobalToSystem
    -----
    FROM ActivityPackageItem api
    INNER JOIN PackageItem pki on api.PackageId = pki.Id
)
GO
GRANT SELECT ON [ActivityPackageItemView] TO LearningStore
GO

-- Create function for the security on the ExecuteSessionRight right
CREATE FUNCTION [ExecuteSessionRight](@UserKey nvarchar(250),@AttemptId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM AttemptItem ati
    LEFT OUTER JOIN LearnerAssignmentItem lai ON ati.LearnerAssignmentId = lai.Id
    LEFT OUTER JOIN AssignmentItem ai ON lai.AssignmentId = ai.Id
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = ai.Id
    INNER JOIN UserItem lui ON ati.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE ati.Id = @AttemptId AND
    (lui.[Key] = @UserKey OR iui.[Key]=@UserKey)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [ExecuteSessionRight] TO LearningStore
GO

-- Create function for the security on the ReviewSessionRight right
CREATE FUNCTION [ReviewSessionRight](@UserKey nvarchar(250),@AttemptId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    1
    )
END
GO
GRANT EXECUTE ON [ReviewSessionRight] TO LearningStore
GO

-- Create function for the security on the RandomAccessSessionRight right
CREATE FUNCTION [RandomAccessSessionRight](@UserKey nvarchar(250),@AttemptId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM AttemptItem ati
    LEFT OUTER JOIN LearnerAssignmentItem lai ON ati.LearnerAssignmentId = lai.Id
    LEFT OUTER JOIN AssignmentItem ai ON lai.AssignmentId = ai.Id
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = ai.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE ati.Id = @AttemptId AND
    (ati.AttemptStatus = 1 OR ati.AttemptStatus = 2) AND
    iui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [RandomAccessSessionRight] TO LearningStore
GO

-- Create function for the security on the StartAttemptOnLearnerAssignmentRight right
CREATE FUNCTION [StartAttemptOnLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem ai ON lai.AssignmentId = ai.Id
    LEFT OUTER JOIN AttemptItem ati ON lai.Id = ati.LearnerAssignmentId
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem lui ON lai.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    ati.Id IS NULL AND
    ai.RootActivityId IS NOT NULL AND
    (lui.[Key]=@UserKey OR iui.[Key]=@UserKey)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [StartAttemptOnLearnerAssignmentRight] TO LearningStore
GO

-- Create function for the security on the FinishLearnerAssignmentRight right
CREATE FUNCTION [FinishLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem lui ON lai.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    (lui.[Key]=@UserKey OR iui.[Key]=@UserKey)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [FinishLearnerAssignmentRight] TO LearningStore
GO

-- Create function for the security on the CompleteLearnerAssignmentRight right
CREATE FUNCTION [CompleteLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem lui ON lai.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    (lui.[Key]=@UserKey OR iui.[Key]=@UserKey)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [CompleteLearnerAssignmentRight] TO LearningStore
GO

-- Create function for the security on the FinalizeLearnerAssignmentRight right
CREATE FUNCTION [FinalizeLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    INNER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    iui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [FinalizeLearnerAssignmentRight] TO LearningStore
GO

-- Create function for the security on the ActivateLearnerAssignmentRight right
CREATE FUNCTION [ActivateLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    INNER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    iui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    ) | (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    INNER JOIN UserItem lui ON lai.LearnerId = lui.Id
    INNER JOIN AssignmentItem ai ON lai.AssignmentId = ai.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    lui.[Key]=@UserKey AND
    ai.RootActivityId IS NULL AND
    (lai.NonELearningStatus IS NULL OR lai.NonELearningStatus = 0)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [ActivateLearnerAssignmentRight] TO LearningStore
GO

-- Create function that implements the default view for the ActivityAttemptItem item type
CREATE FUNCTION [ActivityAttemptItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [AttemptId], [ActivityPackageId], [CompletionStatus], [AttemptCount], [DataModelCache], [EvaluationPoints], [Exit], [LessonStatus], [Location], [MinScore], [MaxScore], [ProgressMeasure], [RandomPlacement], [RawScore], [ScaledScore], [SequencingDataCache], [SessionStartTimestamp], [SessionTime], [SuccessStatus], [SuspendData], [TotalTime]
    FROM [ActivityAttemptItem]
)
GO
GRANT SELECT ON [ActivityAttemptItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the ActivityObjectiveItem item type
CREATE FUNCTION [ActivityObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityPackageId], [IsPrimaryObjective], [Key], [MinNormalizedMeasure], [SatisfiedByMeasure]
    FROM [ActivityObjectiveItem]
)
GO
GRANT SELECT ON [ActivityObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the ActivityPackageItem item type
CREATE FUNCTION [ActivityPackageItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityIdFromManifest], [OriginalPlacement], [ParentActivityId], [PackageId], [PrimaryObjectiveId], [ResourceId], [PrimaryResourceFromManifest], [DataModelCache], [CompletionThreshold], [Credit], [HideContinue], [HidePrevious], [HideExit], [HideAbandon], [IsVisibleInContents], [LaunchData], [MasteryScore], [MaxAttempts], [MaxTimeAllowed], [ResourceParameters], [ScaledPassingScore], [TimeLimitAction], [Title], [ObjectivesGlobalToSystem]
    FROM [ActivityPackageItem]
)
GO
GRANT SELECT ON [ActivityPackageItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the PackageGlobalObjectiveItem item type
CREATE FUNCTION [PackageGlobalObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [LearnerId], [GlobalObjectiveId], [ScaledScore], [SuccessStatus]
    FROM [PackageGlobalObjectiveItem]
)
GO
GRANT SELECT ON [PackageGlobalObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the AttemptItem item type
CREATE FUNCTION [AttemptItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [LearnerId], [RootActivityId], [CompletionStatus], [CurrentActivityId], [SuspendedActivityId], [PackageId], [AttemptStatus], [FinishedTimestamp], [LogDetailSequencing], [LogFinalSequencing], [LogRollup], [StartedTimestamp], [SuccessStatus], [TotalPoints], [LearnerAssignmentId]
    FROM [AttemptItem]
)
GO
GRANT SELECT ON [AttemptItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the AttemptObjectiveItem item type
CREATE FUNCTION [AttemptObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityAttemptId], [ActivityObjectiveId], [CompletionStatus], [Description], [IsPrimaryObjective], [Key], [LessonStatus], [RawScore], [MinScore], [MaxScore], [ProgressMeasure], [ScaledScore], [SuccessStatus]
    FROM [AttemptObjectiveItem]
)
GO
GRANT SELECT ON [AttemptObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the CommentFromLearnerItem item type
CREATE FUNCTION [CommentFromLearnerItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityAttemptId], [Comment], [Location], [Ordinal], [Timestamp]
    FROM [CommentFromLearnerItem]
)
GO
GRANT SELECT ON [CommentFromLearnerItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the CommentFromLmsItem item type
CREATE FUNCTION [CommentFromLmsItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityPackageId], [Comment], [Location], [Timestamp]
    FROM [CommentFromLmsItem]
)
GO
GRANT SELECT ON [CommentFromLmsItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the CorrectResponseItem item type
CREATE FUNCTION [CorrectResponseItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [InteractionId], [ResponsePattern]
    FROM [CorrectResponseItem]
)
GO
GRANT SELECT ON [CorrectResponseItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the EvaluationCommentItem item type
CREATE FUNCTION [EvaluationCommentItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [InteractionId], [Comment], [Location], [Ordinal], [Timestamp]
    FROM [EvaluationCommentItem]
)
GO
GRANT SELECT ON [EvaluationCommentItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the ExtensionDataItem item type
CREATE FUNCTION [ExtensionDataItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityAttemptId], [InteractionId], [AttemptObjectiveId], [Name], [AttachmentGuid], [AttachmentValue], [BoolValue], [DateTimeValue], [DoubleValue], [IntValue], [StringValue]
    FROM [ExtensionDataItem]
)
GO
GRANT SELECT ON [ExtensionDataItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the GlobalObjectiveItem item type
CREATE FUNCTION [GlobalObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [OrganizationId], [Key], [Description]
    FROM [GlobalObjectiveItem]
)
GO
GRANT SELECT ON [GlobalObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the InteractionItem item type
CREATE FUNCTION [InteractionItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityAttemptId], [InteractionIdFromCmi], [InteractionType], [Timestamp], [Weighting], [ResultState], [ResultNumeric], [Latency], [Description], [LearnerResponseBool], [LearnerResponseString], [LearnerResponseNumeric], [ScaledScore], [RawScore], [MinScore], [MaxScore], [EvaluationPoints]
    FROM [InteractionItem]
)
GO
GRANT SELECT ON [InteractionItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the InteractionObjectiveItem item type
CREATE FUNCTION [InteractionObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [InteractionId], [AttemptObjectiveId]
    FROM [InteractionObjectiveItem]
)
GO
GRANT SELECT ON [InteractionObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the LearnerGlobalObjectiveItem item type
CREATE FUNCTION [LearnerGlobalObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [LearnerId], [GlobalObjectiveId], [ScaledScore], [SuccessStatus]
    FROM [LearnerGlobalObjectiveItem]
)
GO
GRANT SELECT ON [LearnerGlobalObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the MapActivityObjectiveToGlobalObjectiveItem item type
CREATE FUNCTION [MapActivityObjectiveToGlobalObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityObjectiveId], [GlobalObjectiveId], [ReadSatisfiedStatus], [ReadNormalizedMeasure], [WriteSatisfiedStatus], [WriteNormalizedMeasure]
    FROM [MapActivityObjectiveToGlobalObjectiveItem]
)
GO
GRANT SELECT ON [MapActivityObjectiveToGlobalObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the PackageItem item type
CREATE FUNCTION [PackageItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [PackageFormat], [Location], [Manifest], [Warnings]
    FROM [PackageItem]
)
GO
GRANT SELECT ON [PackageItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the RubricItem item type
CREATE FUNCTION [RubricItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [InteractionId], [Ordinal], [IsSatisfied], [Points]
    FROM [RubricItem]
)
GO
GRANT SELECT ON [RubricItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the ResourceItem item type
CREATE FUNCTION [ResourceItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [PackageId], [ResourceXml]
    FROM [ResourceItem]
)
GO
GRANT SELECT ON [ResourceItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the SequencingLogEntryItem item type
CREATE FUNCTION [SequencingLogEntryItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [AttemptId], [ActivityAttemptId], [EventType], [Message], [NavigationCommand], [Timestamp]
    FROM [SequencingLogEntryItem]
)
GO
GRANT SELECT ON [SequencingLogEntryItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the UserItem item type
CREATE FUNCTION [UserItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [Key], [Name], [AudioCaptioning], [AudioLevel], [DeliverySpeed], [Language]
    FROM [UserItem]
)
GO
GRANT SELECT ON [UserItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the SiteSettingsItem item type
CREATE FUNCTION [SiteSettingsItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [SiteGuid], [SettingsXml], [SettingsXmlLastModified]
    FROM [SiteSettingsItem]
)
GO
GRANT SELECT ON [SiteSettingsItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the AssignmentItem item type
CREATE FUNCTION [AssignmentItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [SPSiteGuid], [SPWebGuid], [RootActivityId], [NonELearningLocation], [Title], [StartDate], [DueDate], [PointsPossible], [Description], [AutoReturn], [ShowAnswersToLearners], [CreatedBy], [DateCreated]
    FROM [AssignmentItem]
)
GO
GRANT SELECT ON [AssignmentItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the InstructorAssignmentItem item type
CREATE FUNCTION [InstructorAssignmentItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [AssignmentId], [InstructorId]
    FROM [InstructorAssignmentItem]
)
GO
GRANT SELECT ON [InstructorAssignmentItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the LearnerAssignmentItem item type
CREATE FUNCTION [LearnerAssignmentItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [AssignmentId], [LearnerId], [IsFinal], [NonELearningStatus], [FinalPoints], [InstructorComments]
    FROM [LearnerAssignmentItem]
)
GO
GRANT SELECT ON [LearnerAssignmentItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the UserWebListItem item type
CREATE FUNCTION [UserWebListItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [OwnerKey], [SPSiteGuid], [SPWebGuid], [LastAccessTime]
    FROM [UserWebListItem]
)
GO
GRANT SELECT ON [UserWebListItem$DefaultView] TO LearningStore
GO

COMMIT TRANSACTION
GO

</Source>
        <Translation>--------------------------------------------------------------------------------
-- &lt;auto-generated&gt;
-- This code was generated by a tool.
--
-- Changes to this file may cause incorrect behavior and will be lost if
-- the code is regenerated.
-- &lt;/auto-generated&gt;
--------------------------------------------------------------------------------
    
IF DB_NAME()='master'
BEGIN
    RAISERROR(N'Unable to execute script on master database, USE a database before running this script',16,1)
    RETURN
END

SET NOCOUNT ON
SET XACT_ABORT ON
SET IMPLICIT_TRANSACTIONS ON
SET QUOTED_IDENTIFIER ON

GO

CREATE FUNCTION GetLearnerAssignmentState(
@RootActivityId bigint,
@IsFinal bit,
@NonELearningStatus int,
@AttemptStatus int)
RETURNS int
AS
BEGIN
RETURN CASE WHEN @RootActivityId IS NOT NULL
THEN
-- e-learning content
CASE WHEN @AttemptStatus IS NULL
THEN 0 -- LearnerAssignmentState.NotStarted
ELSE
CASE WHEN @IsFinal = 1
THEN 3 -- LearnerAssignmentState.Final
ELSE
CASE WHEN @AttemptStatus = 0 OR @AttemptStatus = 3
THEN 1 -- LearnerAssignmentState.Active
ELSE 2 -- LearnerAssignmentState.Completed
END
END
END
ELSE
-- non-e-learning content
CASE WHEN @NonELearningStatus IS NULL
THEN 0 -- LearnerAssignmentState.NotStarted
ELSE
CASE WHEN @IsFinal = 1
THEN 3 -- LearnerAssignmentState.Final
ELSE
CASE WHEN @NonELearningStatus = 0 OR @NonELearningStatus = 3
THEN 1 -- LearnerAssignmentState.Active
ELSE 2 -- LearnerAssignmentState.Completed
END
END
END
END
END

GO

CREATE FUNCTION IsLearnerAssignmentStarted(
@RootActivityId bigint,
@NonELearningStatus int,
@AttemptStatus int)
RETURNS int
AS
BEGIN
RETURN CASE WHEN @RootActivityId IS NOT NULL
THEN
-- e-learning content
CASE WHEN @AttemptStatus IS NULL
THEN 0 -- LearnerAssignmentState.NotStarted
ELSE 1 -- LearnerAssignmentState.Active or Completed or Final
END
ELSE
-- non-e-learning content
CASE WHEN @NonELearningStatus IS NULL
THEN 0 -- LearnerAssignmentState.NotStarted
ELSE 1 -- LearnerAssignmentState.Active or Completed or Final
END
END
END

GO

-- Create configuration table
CREATE TABLE Configuration (
    EngineVersion int NOT NULL,
    SchemaDefinition xml NOT NULL
)
DECLARE @schema varchar(max)
SET @schema = '&lt;StoreSchema&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ActivityAttemptItem" ViewFunction="ActivityAttemptItem$DefaultView"&gt;' + 
        '&lt;Property Name="AttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Property Name="ActivityPackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="CompletionStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Property Name="AttemptCount" TypeCode="9" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="DataModelCache" TypeCode="7" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="EvaluationPoints" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Exit" TypeCode="8" Nullable="true" HasDefault="true" EnumName="ExitMode"/&gt;' +
        '&lt;Property Name="LessonStatus" TypeCode="8" Nullable="true" HasDefault="true" EnumName="LessonStatus"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MinScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ProgressMeasure" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="RandomPlacement" TypeCode="9" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="RawScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SequencingDataCache" TypeCode="7" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SessionStartTimestamp" TypeCode="4" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SessionTime" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="true" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Property Name="SuspendData" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="TotalTime" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ActivityObjectiveItem" ViewFunction="ActivityObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityPackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="IsPrimaryObjective" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="Key" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="MinNormalizedMeasure" TypeCode="5" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="SatisfiedByMeasure" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ActivityPackageItem" ViewFunction="ActivityPackageItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityIdFromManifest" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="OriginalPlacement" TypeCode="9" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="ParentActivityId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="PackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Property Name="PrimaryObjectiveId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityObjectiveItem"/&gt;' +
        '&lt;Property Name="ResourceId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ResourceItem"/&gt;' +
        '&lt;Property Name="PrimaryResourceFromManifest" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="DataModelCache" TypeCode="7" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="CompletionThreshold" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Credit" TypeCode="3" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="HideContinue" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="HidePrevious" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="HideExit" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="HideAbandon" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="IsVisibleInContents" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="LaunchData" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MasteryScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxAttempts" TypeCode="9" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxTimeAllowed" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ResourceParameters" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ScaledPassingScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="TimeLimitAction" TypeCode="8" Nullable="true" HasDefault="true" EnumName="TimeLimitAction"/&gt;' +
        '&lt;Property Name="Title" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="PackageGlobalObjectiveItem" ViewFunction="PackageGlobalObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="LearnerId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="GlobalObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="GlobalObjectiveItem"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="AttemptItem" ViewFunction="AttemptItem$DefaultView"&gt;' + 
        '&lt;Property Name="LearnerId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="RootActivityId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="CompletionStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Property Name="CurrentActivityId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="SuspendedActivityId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="PackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Property Name="AttemptStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Property Name="FinishedTimestamp" TypeCode="4" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LogDetailSequencing" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="LogFinalSequencing" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="LogRollup" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="StartedTimestamp" TypeCode="4" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Property Name="TotalPoints" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LearnerAssignmentId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="AttemptObjectiveItem" ViewFunction="AttemptObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="ActivityObjectiveId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityObjectiveItem"/&gt;' +
        '&lt;Property Name="CompletionStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Property Name="Description" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="IsPrimaryObjective" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="Key" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="LessonStatus" TypeCode="8" Nullable="true" HasDefault="true" EnumName="LessonStatus"/&gt;' +
        '&lt;Property Name="RawScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MinScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ProgressMeasure" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="CommentFromLearnerItem" ViewFunction="CommentFromLearnerItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="Comment" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Ordinal" TypeCode="9" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="CommentFromLmsItem" ViewFunction="CommentFromLmsItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityPackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="Comment" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="CorrectResponseItem" ViewFunction="CorrectResponseItem$DefaultView"&gt;' + 
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="ResponsePattern" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="EvaluationCommentItem" ViewFunction="EvaluationCommentItem$DefaultView"&gt;' + 
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="Comment" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Ordinal" TypeCode="9" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ExtensionDataItem" ViewFunction="ExtensionDataItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="AttemptObjectiveId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
        '&lt;Property Name="Name" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="AttachmentGuid" TypeCode="11" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="AttachmentValue" TypeCode="10" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="BoolValue" TypeCode="3" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="DateTimeValue" TypeCode="4" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="DoubleValue" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="IntValue" TypeCode="9" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="StringValue" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="GlobalObjectiveItem" ViewFunction="GlobalObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="OrganizationId" TypeCode="1" Nullable="true" HasDefault="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="Key" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Description" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="InteractionItem" ViewFunction="InteractionItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="InteractionIdFromCmi" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="InteractionType" TypeCode="8" Nullable="true" HasDefault="true" EnumName="InteractionType"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Weighting" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ResultState" TypeCode="8" Nullable="true" HasDefault="true" EnumName="InteractionResultState"/&gt;' +
        '&lt;Property Name="ResultNumeric" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Latency" TypeCode="6" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Description" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LearnerResponseBool" TypeCode="3" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LearnerResponseString" TypeCode="2" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="LearnerResponseNumeric" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="RawScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MinScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="MaxScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="EvaluationPoints" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="InteractionObjectiveItem" ViewFunction="InteractionObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="AttemptObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="LearnerGlobalObjectiveItem" ViewFunction="LearnerGlobalObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="LearnerId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="GlobalObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="GlobalObjectiveItem"/&gt;' +
        '&lt;Property Name="ScaledScore" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="SuccessStatus" TypeCode="8" Nullable="false" HasDefault="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="MapActivityObjectiveToGlobalObjectiveItem" ViewFunction="MapActivityObjectiveToGlobalObjectiveItem$DefaultView"&gt;' + 
        '&lt;Property Name="ActivityObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="ActivityObjectiveItem"/&gt;' +
        '&lt;Property Name="GlobalObjectiveId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="GlobalObjectiveItem"/&gt;' +
        '&lt;Property Name="ReadSatisfiedStatus" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="ReadNormalizedMeasure" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="WriteSatisfiedStatus" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="WriteNormalizedMeasure" TypeCode="3" Nullable="false" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="PackageItem" ViewFunction="PackageItem$DefaultView"&gt;' + 
        '&lt;Property Name="PackageFormat" TypeCode="8" Nullable="false" HasDefault="false" EnumName="PackageFormat"/&gt;' +
        '&lt;Property Name="Location" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Manifest" TypeCode="7" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Warnings" TypeCode="7" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="RubricItem" ViewFunction="RubricItem$DefaultView"&gt;' + 
        '&lt;Property Name="InteractionId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Property Name="Ordinal" TypeCode="9" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="IsSatisfied" TypeCode="3" Nullable="true" HasDefault="true"/&gt;' +
        '&lt;Property Name="Points" TypeCode="5" Nullable="true" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="ResourceItem" ViewFunction="ResourceItem$DefaultView"&gt;' + 
        '&lt;Property Name="PackageId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Property Name="ResourceXml" TypeCode="7" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="SequencingLogEntryItem" ViewFunction="SequencingLogEntryItem$DefaultView"&gt;' + 
        '&lt;Property Name="AttemptId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Property Name="ActivityAttemptId" TypeCode="1" Nullable="true" HasDefault="false" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Property Name="EventType" TypeCode="8" Nullable="false" HasDefault="false" EnumName="SequencingEventType"/&gt;' +
        '&lt;Property Name="Message" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="NavigationCommand" TypeCode="8" Nullable="false" HasDefault="false" EnumName="NavigationCommand"/&gt;' +
        '&lt;Property Name="Timestamp" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="UserItem" ViewFunction="UserItem$DefaultView"&gt;' + 
        '&lt;Property Name="Key" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="Name" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="AudioCaptioning" TypeCode="8" Nullable="false" HasDefault="true" EnumName="AudioCaptioning"/&gt;' +
        '&lt;Property Name="AudioLevel" TypeCode="5" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="DeliverySpeed" TypeCode="5" Nullable="false" HasDefault="true"/&gt;' +
        '&lt;Property Name="Language" TypeCode="2" Nullable="false" HasDefault="true"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="SiteSettingsItem" ViewFunction="SiteSettingsItem$DefaultView"&gt;' + 
        '&lt;Property Name="SiteGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SettingsXml" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SettingsXmlLastModified" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="AssignmentItem" ViewFunction="AssignmentItem$DefaultView" DeleteSecurityFunction="AssignmentItem$DeleteSecurity"&gt;' + 
        '&lt;Property Name="SPSiteGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SPWebGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="RootActivityId" TypeCode="1" Nullable="true" HasDefault="false" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Property Name="NonELearningLocation" TypeCode="2" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Title" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="StartDate" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="DueDate" TypeCode="4" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="PointsPossible" TypeCode="5" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="Description" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="AutoReturn" TypeCode="3" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="ShowAnswersToLearners" TypeCode="3" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="CreatedBy" TypeCode="1" Nullable="true" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="DateCreated" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="InstructorAssignmentItem" ViewFunction="InstructorAssignmentItem$DefaultView"&gt;' + 
        '&lt;Property Name="AssignmentId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Property Name="InstructorId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="LearnerAssignmentItem" ViewFunction="LearnerAssignmentItem$DefaultView"&gt;' + 
        '&lt;Property Name="AssignmentId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Property Name="LearnerId" TypeCode="1" Nullable="false" HasDefault="false" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Property Name="IsFinal" TypeCode="3" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="NonELearningStatus" TypeCode="8" Nullable="true" HasDefault="false" EnumName="AttemptStatus"/&gt;' +
        '&lt;Property Name="FinalPoints" TypeCode="5" Nullable="true" HasDefault="false"/&gt;' +
        '&lt;Property Name="InstructorComments" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;ItemType Name="UserWebListItem" ViewFunction="UserWebListItem$DefaultView"&gt;' + 
        '&lt;Property Name="OwnerKey" TypeCode="2" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SPSiteGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="SPWebGuid" TypeCode="11" Nullable="false" HasDefault="false"/&gt;' +
        '&lt;Property Name="LastAccessTime" TypeCode="4" Nullable="false" HasDefault="false"/&gt;' +
    '&lt;/ItemType&gt;'
SET @schema = @schema +
    '&lt;Enum Name="AudioCaptioning"&gt;' + 
        '&lt;Value Name="Off" Value="-1"/&gt;' + 
        '&lt;Value Name="NoChange" Value="0"/&gt;' + 
        '&lt;Value Name="On" Value="1"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="CompletionStatus"&gt;' + 
        '&lt;Value Name="Unknown" Value="0"/&gt;' + 
        '&lt;Value Name="Completed" Value="1"/&gt;' + 
        '&lt;Value Name="Incomplete" Value="2"/&gt;' + 
        '&lt;Value Name="NotAttempted" Value="3"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="ExitMode"&gt;' + 
        '&lt;Value Name="Undetermined" Value="0"/&gt;' + 
        '&lt;Value Name="Logout" Value="1"/&gt;' + 
        '&lt;Value Name="Normal" Value="2"/&gt;' + 
        '&lt;Value Name="TimeOut" Value="3"/&gt;' + 
        '&lt;Value Name="Suspended" Value="4"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="DisplayMode"&gt;' + 
        '&lt;Value Name="Normal" Value="0"/&gt;' + 
        '&lt;Value Name="Browse" Value="1"/&gt;' + 
        '&lt;Value Name="Review" Value="2"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="SuccessStatus"&gt;' + 
        '&lt;Value Name="Unknown" Value="0"/&gt;' + 
        '&lt;Value Name="Failed" Value="1"/&gt;' + 
        '&lt;Value Name="Passed" Value="2"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="TimeLimitAction"&gt;' + 
        '&lt;Value Name="ContinueNoMessage" Value="0"/&gt;' + 
        '&lt;Value Name="ContinueWithMessage" Value="1"/&gt;' + 
        '&lt;Value Name="ExitNoMessage" Value="2"/&gt;' + 
        '&lt;Value Name="ExitWithMessage" Value="3"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="InteractionType"&gt;' + 
        '&lt;Value Name="Other" Value="0"/&gt;' + 
        '&lt;Value Name="FillIn" Value="1"/&gt;' + 
        '&lt;Value Name="Likert" Value="2"/&gt;' + 
        '&lt;Value Name="LongFillIn" Value="3"/&gt;' + 
        '&lt;Value Name="Matching" Value="4"/&gt;' + 
        '&lt;Value Name="MultipleChoice" Value="5"/&gt;' + 
        '&lt;Value Name="Numeric" Value="6"/&gt;' + 
        '&lt;Value Name="Performance" Value="7"/&gt;' + 
        '&lt;Value Name="Sequencing" Value="8"/&gt;' + 
        '&lt;Value Name="TrueFalse" Value="9"/&gt;' + 
        '&lt;Value Name="Essay" Value="10"/&gt;' + 
        '&lt;Value Name="Attachment" Value="11"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="InteractionResultState"&gt;' + 
        '&lt;Value Name="None" Value="0"/&gt;' + 
        '&lt;Value Name="Correct" Value="1"/&gt;' + 
        '&lt;Value Name="Incorrect" Value="2"/&gt;' + 
        '&lt;Value Name="Neutral" Value="3"/&gt;' + 
        '&lt;Value Name="Numeric" Value="4"/&gt;' + 
        '&lt;Value Name="Unanticipated" Value="5"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="PackageFormat"&gt;' + 
        '&lt;Value Name="Lrm" Value="0"/&gt;' + 
        '&lt;Value Name="V1p2" Value="1"/&gt;' + 
        '&lt;Value Name="V1p3" Value="2"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="LessonStatus"&gt;' + 
        '&lt;Value Name="NotAttempted" Value="0"/&gt;' + 
        '&lt;Value Name="Browsed" Value="1"/&gt;' + 
        '&lt;Value Name="Completed" Value="2"/&gt;' + 
        '&lt;Value Name="Failed" Value="3"/&gt;' + 
        '&lt;Value Name="Incomplete" Value="4"/&gt;' + 
        '&lt;Value Name="Passed" Value="5"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="NavigationCommand"&gt;' + 
        '&lt;Value Name="None" Value="0"/&gt;' + 
        '&lt;Value Name="Abandon" Value="1"/&gt;' + 
        '&lt;Value Name="AbandonAll" Value="2"/&gt;' + 
        '&lt;Value Name="ChoiceStart" Value="3"/&gt;' + 
        '&lt;Value Name="Choose" Value="4"/&gt;' + 
        '&lt;Value Name="Continue" Value="5"/&gt;' + 
        '&lt;Value Name="ExitAll" Value="6"/&gt;' + 
        '&lt;Value Name="Previous" Value="7"/&gt;' + 
        '&lt;Value Name="ResumeAll" Value="8"/&gt;' + 
        '&lt;Value Name="Start" Value="9"/&gt;' + 
        '&lt;Value Name="SuspendAll" Value="10"/&gt;' + 
        '&lt;Value Name="UnqualifiedExit" Value="11"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="SequencingEventType"&gt;' + 
        '&lt;Value Name="FinalNavigation" Value="0"/&gt;' + 
        '&lt;Value Name="IntermediateNavigation" Value="1"/&gt;' + 
        '&lt;Value Name="Rollup" Value="2"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="AttemptStatus"&gt;' + 
        '&lt;Value Name="Active" Value="0"/&gt;' + 
        '&lt;Value Name="Abandoned" Value="1"/&gt;' + 
        '&lt;Value Name="Completed" Value="2"/&gt;' + 
        '&lt;Value Name="Suspended" Value="3"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;Enum Name="LearnerAssignmentState"&gt;' + 
        '&lt;Value Name="NotStarted" Value="0"/&gt;' + 
        '&lt;Value Name="Active" Value="1"/&gt;' + 
        '&lt;Value Name="Completed" Value="2"/&gt;' + 
        '&lt;Value Name="Final" Value="3"/&gt;' + 
    '&lt;/Enum&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavOrganizationGlobalObjectiveView" Function="SeqNavOrganizationGlobalObjectiveView"&gt;' + 
        '&lt;Column Name="OrganizationId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="Key" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavLearnerGlobalObjectiveView" Function="SeqNavLearnerGlobalObjectiveView"&gt;' + 
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="Key" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavActivityPackageView" Function="SeqNavActivityPackageView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackagePath" TypeCode="2" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavActivityTreeView" Function="SeqNavActivityTreeView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="ParentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="DataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptView" Function="SeqNavAttemptView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="LogDetailSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="LogFinalSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="LogRollup" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="CurrentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="SuspendedActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackagePath" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="LearnerName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerAudioCaptioning" TypeCode="8" Nullable="true" EnumName="AudioCaptioning"/&gt;' +
        '&lt;Column Name="LearnerAudioLevel" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerDeliverySpeed" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerLanguage" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="StartedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="FinishedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="TotalPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Column Name="CompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavActivityAttemptView" Function="SeqNavActivityAttemptView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="DataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="SequencingDataCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="RandomPlacement" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ActivityPackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="StaticDataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="ParentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="CompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Column Name="AttemptCount" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="EvaluationPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="Exit" TypeCode="8" Nullable="true" EnumName="ExitMode"/&gt;' +
        '&lt;Column Name="LessonStatus" TypeCode="8" Nullable="true" EnumName="LessonStatus"/&gt;' +
        '&lt;Column Name="Location" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="MinScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ProgressMeasure" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="RawScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SessionStartTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="SessionTime" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Column Name="SuspendData" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="TotalTime" TypeCode="6" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavCurrentActivityAttemptView" Function="SeqNavCurrentActivityAttemptView"&gt;' + 
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="DataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="SequencingDataCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="RandomPlacement" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="StaticDataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="Credit" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavCurrentCommentFromLmsView" Function="SeqNavCurrentCommentFromLmsView"&gt;' + 
        '&lt;Column Name="Comment" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Location" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Timestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="DataModelCache" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptObjectiveView" Function="SeqNavAttemptObjectiveView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
        '&lt;Column Name="ActivityAttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="CompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Column Name="Description" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IsPrimaryObjective" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="Key" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LessonStatus" TypeCode="8" Nullable="true" EnumName="LessonStatus"/&gt;' +
        '&lt;Column Name="RawScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MinScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ProgressMeasure" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="SuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptCommentFromLearnerView" Function="SeqNavAttemptCommentFromLearnerView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ActivityAttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="CommentFromLearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="CommentFromLearnerItem"/&gt;' +
        '&lt;Column Name="Comment" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Location" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Timestamp" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Ordinal" TypeCode="9" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptInteractionView" Function="SeqNavAttemptInteractionView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ActivityAttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="InteractionIdFromCmi" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="InteractionType" TypeCode="8" Nullable="true" EnumName="InteractionType"/&gt;' +
        '&lt;Column Name="Timestamp" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Weighting" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ResultState" TypeCode="8" Nullable="true" EnumName="InteractionResultState"/&gt;' +
        '&lt;Column Name="ResultNumeric" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="Latency" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="Description" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerResponseBool" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerResponseString" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerResponseNumeric" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="RawScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MinScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="EvaluationPoints" TypeCode="5" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptEvaluationCommentLearnerView" Function="SeqNavAttemptEvaluationCommentLearnerView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="EvaluationCommentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="EvaluationCommentItem"/&gt;' +
        '&lt;Column Name="Comment" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Location" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Timestamp" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="Ordinal" TypeCode="9" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptCorrectResponseView" Function="SeqNavAttemptCorrectResponseView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="CorrectResponseId" TypeCode="1" Nullable="true" ReferencedItemTypeName="CorrectResponseItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="ResponsePattern" TypeCode="2" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptInteractionObjectiveView" Function="SeqNavAttemptInteractionObjectiveView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="InteractionObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionObjectiveItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="AttemptObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptExtensionDataView" Function="SeqNavAttemptExtensionDataView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ActivityAttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityAttemptItem"/&gt;' +
        '&lt;Column Name="ExtensionDataId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ExtensionDataItem"/&gt;' +
        '&lt;Column Name="Name" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="StringValue" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IntValue" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="BoolValue" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="DoubleValue" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="DateTimeValue" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentGuid" TypeCode="11" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptObjectiveExtensionDataView" Function="SeqNavAttemptObjectiveExtensionDataView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ExtensionDataId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ExtensionDataItem"/&gt;' +
        '&lt;Column Name="AttemptObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptObjectiveItem"/&gt;' +
        '&lt;Column Name="Name" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="StringValue" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IntValue" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="BoolValue" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="DoubleValue" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="DateTimeValue" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentValue" TypeCode="10" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptInteractionExtensionDataView" Function="SeqNavAttemptInteractionExtensionDataView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="ExtensionDataId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ExtensionDataItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="Name" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="StringValue" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IntValue" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="BoolValue" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="DoubleValue" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="DateTimeValue" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AttachmentValue" TypeCode="10" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="SeqNavAttemptRubricView" Function="SeqNavAttemptRubricView"&gt;' + 
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="RubricItemId" TypeCode="1" Nullable="true" ReferencedItemTypeName="RubricItem"/&gt;' +
        '&lt;Column Name="InteractionId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InteractionItem"/&gt;' +
        '&lt;Column Name="Ordinal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="IsSatisfied" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="Points" TypeCode="5" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="LearnerAssignmentView" Function="LearnerAssignmentView"&gt;' + 
        '&lt;Column Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptGradedPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerAssignmentState" TypeCode="8" Nullable="true" EnumName="LearnerAssignmentState"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="AssignmentPropertiesView" Function="AssignmentPropertiesView" SecurityFunction="AssignmentPropertiesView$Security"&gt;' + 
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDateCreated" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Parameter Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Parameter Name="IsInstructor" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="AssignmentListForInstructors" Function="AssignmentListForInstructors" SecurityFunction="AssignmentListForInstructors$Security"&gt;' + 
        '&lt;Column Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDateCreated" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="CountTotal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountNotStarted" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountActive" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountCompleted" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountFinal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountStarted" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountNotStartedOrActive" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountCompletedOrFinal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="CountNotFinal" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="MinGradedPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxGradedPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="AvgGradedPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="MinFinalPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxFinalPoints" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="AvgFinalPoints" TypeCode="6" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="InstructorAssignmentListForInstructors" Function="InstructorAssignmentListForInstructors" SecurityFunction="InstructorAssignmentListForInstructors$Security"&gt;' + 
        '&lt;Column Name="InstructorAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="InstructorAssignmentItem"/&gt;' +
        '&lt;Column Name="InstructorId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="InstructorName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="InstructorKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="PackageManifest" TypeCode="7" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="LearnerAssignmentListForLearners" Function="LearnerAssignmentListForLearners" SecurityFunction="LearnerAssignmentListForLearners$Security"&gt;' + 
        '&lt;Column Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="LearnerName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IsFinal" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="NonELearningStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="FinalPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="InstructorComments" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDateCreated" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptCurrentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptSuspendedActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="AttemptFinishedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogDetailSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogFinalSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogRollup" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptStartedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptCompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Column Name="AttemptSuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Column Name="AttemptGradedPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerAssignmentState" TypeCode="8" Nullable="true" EnumName="LearnerAssignmentState"/&gt;' +
        '&lt;Column Name="HasInstructors" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="LearnerAssignmentListForInstructors" Function="LearnerAssignmentListForInstructors" SecurityFunction="LearnerAssignmentListForInstructors$Security"&gt;' + 
        '&lt;Column Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
        '&lt;Column Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="LearnerName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="IsFinal" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="NonELearningStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="FinalPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="InstructorComments" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AssignmentItem"/&gt;' +
        '&lt;Column Name="AssignmentSPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentSPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentNonELearningLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentTitle" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentStartDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDueDate" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentPointsPossible" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentDescription" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentAutoReturn" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentShowAnswersToLearners" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedById" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByName" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="AssignmentCreatedByKey" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="PackageManifest" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
        '&lt;Column Name="AttemptCurrentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptSuspendedActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="AttemptStatus" TypeCode="8" Nullable="true" EnumName="AttemptStatus"/&gt;' +
        '&lt;Column Name="AttemptFinishedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogDetailSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogFinalSequencing" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptLogRollup" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptStartedTimestamp" TypeCode="4" Nullable="true"/&gt;' +
        '&lt;Column Name="AttemptCompletionStatus" TypeCode="8" Nullable="true" EnumName="CompletionStatus"/&gt;' +
        '&lt;Column Name="AttemptSuccessStatus" TypeCode="8" Nullable="true" EnumName="SuccessStatus"/&gt;' +
        '&lt;Column Name="AttemptGradedPoints" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="LearnerAssignmentState" TypeCode="8" Nullable="true" EnumName="LearnerAssignmentState"/&gt;' +
        '&lt;Column Name="HasInstructors" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="UserWebList" Function="UserWebList" SecurityFunction="UserWebList$Security"&gt;' + 
        '&lt;Column Name="SPSiteGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="SPWebGuid" TypeCode="11" Nullable="true"/&gt;' +
        '&lt;Column Name="LastAccessTime" TypeCode="4" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;View Name="ActivityPackageItemView" Function="ActivityPackageItemView"&gt;' + 
        '&lt;Column Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
        '&lt;Column Name="PackageFormat" TypeCode="8" Nullable="true" EnumName="PackageFormat"/&gt;' +
        '&lt;Column Name="PackageLocation" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="PackageManifest" TypeCode="7" Nullable="true"/&gt;' +
        '&lt;Column Name="Id" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="ActivityIdFromManifest" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="OriginalPlacement" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="ParentActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Column Name="PrimaryObjectiveId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityObjectiveItem"/&gt;' +
        '&lt;Column Name="ResourceId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ResourceItem"/&gt;' +
        '&lt;Column Name="PrimaryResourceIdFromManifest" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="CompletionThreshold" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="Credit" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="IsVisibleInContents" TypeCode="3" Nullable="true"/&gt;' +
        '&lt;Column Name="LaunchData" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxAttempts" TypeCode="9" Nullable="true"/&gt;' +
        '&lt;Column Name="MaxTimeAllowed" TypeCode="6" Nullable="true"/&gt;' +
        '&lt;Column Name="ResourceParameters" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="ScaledPassingScore" TypeCode="5" Nullable="true"/&gt;' +
        '&lt;Column Name="TimeLimitAction" TypeCode="8" Nullable="true" EnumName="TimeLimitAction"/&gt;' +
        '&lt;Column Name="Title" TypeCode="2" Nullable="true"/&gt;' +
        '&lt;Column Name="ObjectivesGlobalToSystem" TypeCode="3" Nullable="true"/&gt;' +
    '&lt;/View&gt;'
SET @schema = @schema +
    '&lt;Right Name="AddPackageReferenceRight"&gt;' + 
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="RemovePackageReferenceRight"&gt;' + 
        '&lt;Parameter Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="ReadPackageRight"&gt;' + 
        '&lt;Parameter Name="PackageId" TypeCode="1" Nullable="true" ReferencedItemTypeName="PackageItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="CreateAttemptRight"&gt;' + 
        '&lt;Parameter Name="RootActivityId" TypeCode="1" Nullable="true" ReferencedItemTypeName="ActivityPackageItem"/&gt;' +
        '&lt;Parameter Name="LearnerId" TypeCode="1" Nullable="true" ReferencedItemTypeName="UserItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="DeleteAttemptRight"&gt;' + 
        '&lt;Parameter Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="ExecuteSessionRight" SecurityFunction="ExecuteSessionRight"&gt;' + 
        '&lt;Parameter Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="ReviewSessionRight" SecurityFunction="ReviewSessionRight"&gt;' + 
        '&lt;Parameter Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="RandomAccessSessionRight" SecurityFunction="RandomAccessSessionRight"&gt;' + 
        '&lt;Parameter Name="AttemptId" TypeCode="1" Nullable="true" ReferencedItemTypeName="AttemptItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="StartAttemptOnLearnerAssignmentRight" SecurityFunction="StartAttemptOnLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="FinishLearnerAssignmentRight" SecurityFunction="FinishLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="CompleteLearnerAssignmentRight" SecurityFunction="CompleteLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="FinalizeLearnerAssignmentRight" SecurityFunction="FinalizeLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema +
    '&lt;Right Name="ActivateLearnerAssignmentRight" SecurityFunction="ActivateLearnerAssignmentRight"&gt;' + 
        '&lt;Parameter Name="LearnerAssignmentId" TypeCode="1" Nullable="true" ReferencedItemTypeName="LearnerAssignmentItem"/&gt;' +
    '&lt;/Right&gt;'
SET @schema = @schema + '&lt;/StoreSchema&gt;'
INSERT INTO Configuration (
    EngineVersion,
    SchemaDefinition
) VALUES (
    1,@schema
)

-- Create role that can access the database using LearningStore
CREATE ROLE LearningStore
GRANT SELECT ON Configuration TO LearningStore

-- Create AudioCaptioning table
CREATE TABLE [AudioCaptioning](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [AudioCaptioning] TO LearningStore
INSERT INTO [AudioCaptioning](
    Id,
    Name
) VALUES (
    -1,
    'Off'
)
INSERT INTO [AudioCaptioning](
    Id,
    Name
) VALUES (
    0,
    'NoChange'
)
INSERT INTO [AudioCaptioning](
    Id,
    Name
) VALUES (
    1,
    'On'
)

-- Create CompletionStatus table
CREATE TABLE [CompletionStatus](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [CompletionStatus] TO LearningStore
INSERT INTO [CompletionStatus](
    Id,
    Name
) VALUES (
    0,
    'Unknown'
)
INSERT INTO [CompletionStatus](
    Id,
    Name
) VALUES (
    1,
    'Completed'
)
INSERT INTO [CompletionStatus](
    Id,
    Name
) VALUES (
    2,
    'Incomplete'
)
INSERT INTO [CompletionStatus](
    Id,
    Name
) VALUES (
    3,
    'NotAttempted'
)

-- Create ExitMode table
CREATE TABLE [ExitMode](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [ExitMode] TO LearningStore
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    0,
    'Undetermined'
)
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    1,
    'Logout'
)
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    2,
    'Normal'
)
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    3,
    'TimeOut'
)
INSERT INTO [ExitMode](
    Id,
    Name
) VALUES (
    4,
    'Suspended'
)

-- Create DisplayMode table
CREATE TABLE [DisplayMode](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [DisplayMode] TO LearningStore
INSERT INTO [DisplayMode](
    Id,
    Name
) VALUES (
    0,
    'Normal'
)
INSERT INTO [DisplayMode](
    Id,
    Name
) VALUES (
    1,
    'Browse'
)
INSERT INTO [DisplayMode](
    Id,
    Name
) VALUES (
    2,
    'Review'
)

-- Create SuccessStatus table
CREATE TABLE [SuccessStatus](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [SuccessStatus] TO LearningStore
INSERT INTO [SuccessStatus](
    Id,
    Name
) VALUES (
    0,
    'Unknown'
)
INSERT INTO [SuccessStatus](
    Id,
    Name
) VALUES (
    1,
    'Failed'
)
INSERT INTO [SuccessStatus](
    Id,
    Name
) VALUES (
    2,
    'Passed'
)

-- Create TimeLimitAction table
CREATE TABLE [TimeLimitAction](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [TimeLimitAction] TO LearningStore
INSERT INTO [TimeLimitAction](
    Id,
    Name
) VALUES (
    0,
    'ContinueNoMessage'
)
INSERT INTO [TimeLimitAction](
    Id,
    Name
) VALUES (
    1,
    'ContinueWithMessage'
)
INSERT INTO [TimeLimitAction](
    Id,
    Name
) VALUES (
    2,
    'ExitNoMessage'
)
INSERT INTO [TimeLimitAction](
    Id,
    Name
) VALUES (
    3,
    'ExitWithMessage'
)

-- Create InteractionType table
CREATE TABLE [InteractionType](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [InteractionType] TO LearningStore
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    0,
    'Other'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    1,
    'FillIn'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    2,
    'Likert'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    3,
    'LongFillIn'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    4,
    'Matching'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    5,
    'MultipleChoice'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    6,
    'Numeric'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    7,
    'Performance'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    8,
    'Sequencing'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    9,
    'TrueFalse'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    10,
    'Essay'
)
INSERT INTO [InteractionType](
    Id,
    Name
) VALUES (
    11,
    'Attachment'
)

-- Create InteractionResultState table
CREATE TABLE [InteractionResultState](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [InteractionResultState] TO LearningStore
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    0,
    'None'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    1,
    'Correct'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    2,
    'Incorrect'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    3,
    'Neutral'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    4,
    'Numeric'
)
INSERT INTO [InteractionResultState](
    Id,
    Name
) VALUES (
    5,
    'Unanticipated'
)

-- Create PackageFormat table
CREATE TABLE [PackageFormat](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [PackageFormat] TO LearningStore
INSERT INTO [PackageFormat](
    Id,
    Name
) VALUES (
    0,
    'Lrm'
)
INSERT INTO [PackageFormat](
    Id,
    Name
) VALUES (
    1,
    'V1p2'
)
INSERT INTO [PackageFormat](
    Id,
    Name
) VALUES (
    2,
    'V1p3'
)

-- Create LessonStatus table
CREATE TABLE [LessonStatus](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [LessonStatus] TO LearningStore
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    0,
    'NotAttempted'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    1,
    'Browsed'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    2,
    'Completed'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    3,
    'Failed'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    4,
    'Incomplete'
)
INSERT INTO [LessonStatus](
    Id,
    Name
) VALUES (
    5,
    'Passed'
)

-- Create NavigationCommand table
CREATE TABLE [NavigationCommand](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [NavigationCommand] TO LearningStore
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    0,
    'None'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    1,
    'Abandon'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    2,
    'AbandonAll'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    3,
    'ChoiceStart'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    4,
    'Choose'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    5,
    'Continue'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    6,
    'ExitAll'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    7,
    'Previous'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    8,
    'ResumeAll'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    9,
    'Start'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    10,
    'SuspendAll'
)
INSERT INTO [NavigationCommand](
    Id,
    Name
) VALUES (
    11,
    'UnqualifiedExit'
)

-- Create SequencingEventType table
CREATE TABLE [SequencingEventType](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [SequencingEventType] TO LearningStore
INSERT INTO [SequencingEventType](
    Id,
    Name
) VALUES (
    0,
    'FinalNavigation'
)
INSERT INTO [SequencingEventType](
    Id,
    Name
) VALUES (
    1,
    'IntermediateNavigation'
)
INSERT INTO [SequencingEventType](
    Id,
    Name
) VALUES (
    2,
    'Rollup'
)

-- Create AttemptStatus table
CREATE TABLE [AttemptStatus](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [AttemptStatus] TO LearningStore
INSERT INTO [AttemptStatus](
    Id,
    Name
) VALUES (
    0,
    'Active'
)
INSERT INTO [AttemptStatus](
    Id,
    Name
) VALUES (
    1,
    'Abandoned'
)
INSERT INTO [AttemptStatus](
    Id,
    Name
) VALUES (
    2,
    'Completed'
)
INSERT INTO [AttemptStatus](
    Id,
    Name
) VALUES (
    3,
    'Suspended'
)

-- Create LearnerAssignmentState table
CREATE TABLE [LearnerAssignmentState](
    Id int PRIMARY KEY,
    Name varchar(63) NOT NULL
)
GRANT SELECT ON [LearnerAssignmentState] TO LearningStore
INSERT INTO [LearnerAssignmentState](
    Id,
    Name
) VALUES (
    0,
    'NotStarted'
)
INSERT INTO [LearnerAssignmentState](
    Id,
    Name
) VALUES (
    1,
    'Active'
)
INSERT INTO [LearnerAssignmentState](
    Id,
    Name
) VALUES (
    2,
    'Completed'
)
INSERT INTO [LearnerAssignmentState](
    Id,
    Name
) VALUES (
    3,
    'Final'
)

-- Create ActivityAttemptItem table
CREATE TABLE [ActivityAttemptItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [AttemptId] bigint NOT NULL,
    [ActivityPackageId] bigint NOT NULL,
    [CompletionStatus] int NOT NULL DEFAULT 0,
    [AttemptCount] int DEFAULT NULL,
    [DataModelCache] xml DEFAULT NULL,
    [EvaluationPoints] float(24) DEFAULT NULL,
    [Exit] int DEFAULT NULL,
    [LessonStatus] int DEFAULT NULL,
    [Location] nvarchar(1000) DEFAULT NULL,
    [MinScore] float(24) DEFAULT NULL,
    [MaxScore] float(24) DEFAULT NULL,
    [ProgressMeasure] float(24) DEFAULT NULL,
    [RandomPlacement] int DEFAULT NULL,
    [RawScore] float(24) DEFAULT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [SequencingDataCache] xml DEFAULT NULL,
    [SessionStartTimestamp] datetime DEFAULT NULL,
    [SessionTime] float(53) DEFAULT NULL,
    [SuccessStatus] int DEFAULT NULL,
    [SuspendData] nvarchar(max) DEFAULT NULL CHECK(LEN([SuspendData])&lt;=4096),
    [TotalTime] float(53) DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ActivityAttemptItem] TO LearningStore

-- Create ActivityObjectiveItem table
CREATE TABLE [ActivityObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityPackageId] bigint NOT NULL,
    [IsPrimaryObjective] bit NOT NULL DEFAULT 0,
    [Key] nvarchar(max) CHECK(LEN([Key])&lt;=4096),
    [MinNormalizedMeasure] float(24) NOT NULL DEFAULT 1,
    [SatisfiedByMeasure] bit NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ActivityObjectiveItem] TO LearningStore

-- Create ActivityPackageItem table
CREATE TABLE [ActivityPackageItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityIdFromManifest] nvarchar(max) NOT NULL CHECK(LEN([ActivityIdFromManifest])&lt;=4096),
    [OriginalPlacement] int NOT NULL,
    [ParentActivityId] bigint DEFAULT NULL,
    [PackageId] bigint NOT NULL,
    [PrimaryObjectiveId] bigint DEFAULT NULL,
    [ResourceId] bigint DEFAULT NULL,
    [PrimaryResourceFromManifest] nvarchar(2000) DEFAULT NULL,
    [DataModelCache] xml DEFAULT NULL,
    [CompletionThreshold] float(24) DEFAULT NULL,
    [Credit] bit DEFAULT 1,
    [HideContinue] bit NOT NULL DEFAULT 0,
    [HidePrevious] bit NOT NULL DEFAULT 0,
    [HideExit] bit NOT NULL DEFAULT 0,
    [HideAbandon] bit NOT NULL DEFAULT 0,
    [IsVisibleInContents] bit NOT NULL DEFAULT 1,
    [LaunchData] nvarchar(max) DEFAULT NULL CHECK(LEN([LaunchData])&lt;=4096),
    [MasteryScore] float(24) DEFAULT NULL,
    [MaxAttempts] int DEFAULT NULL,
    [MaxTimeAllowed] float(53) DEFAULT 0,
    [ResourceParameters] nvarchar(1000) DEFAULT NULL,
    [ScaledPassingScore] float(24) DEFAULT NULL,
    [TimeLimitAction] int DEFAULT NULL,
    [Title] nvarchar(200) NOT NULL,
    [ObjectivesGlobalToSystem] bit NOT NULL DEFAULT 1
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ActivityPackageItem] TO LearningStore

-- Create PackageGlobalObjectiveItem table
CREATE TABLE [PackageGlobalObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [LearnerId] bigint NOT NULL,
    [GlobalObjectiveId] bigint NOT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [SuccessStatus] int NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [PackageGlobalObjectiveItem] TO LearningStore

-- Create AttemptItem table
CREATE TABLE [AttemptItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [LearnerId] bigint NOT NULL,
    [RootActivityId] bigint NOT NULL,
    [CompletionStatus] int NOT NULL DEFAULT 0,
    [CurrentActivityId] bigint DEFAULT NULL,
    [SuspendedActivityId] bigint DEFAULT NULL,
    [PackageId] bigint NOT NULL,
    [AttemptStatus] int NOT NULL DEFAULT 0,
    [FinishedTimestamp] datetime DEFAULT NULL,
    [LogDetailSequencing] bit NOT NULL DEFAULT 0,
    [LogFinalSequencing] bit NOT NULL DEFAULT 0,
    [LogRollup] bit NOT NULL DEFAULT 0,
    [StartedTimestamp] datetime,
    [SuccessStatus] int NOT NULL DEFAULT 0,
    [TotalPoints] float(24) DEFAULT NULL,
    [LearnerAssignmentId] bigint DEFAULT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [AttemptItem] TO LearningStore

-- Create AttemptObjectiveItem table
CREATE TABLE [AttemptObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityAttemptId] bigint NOT NULL,
    [ActivityObjectiveId] bigint DEFAULT NULL,
    [CompletionStatus] int NOT NULL DEFAULT 0,
    [Description] nvarchar(255) DEFAULT NULL,
    [IsPrimaryObjective] bit NOT NULL DEFAULT 0,
    [Key] nvarchar(max) CHECK(LEN([Key])&lt;=4096),
    [LessonStatus] int DEFAULT 0,
    [RawScore] float(24) DEFAULT NULL,
    [MinScore] float(24) DEFAULT NULL,
    [MaxScore] float(24) DEFAULT NULL,
    [ProgressMeasure] float(24) DEFAULT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [SuccessStatus] int NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [AttemptObjectiveItem] TO LearningStore

-- Create CommentFromLearnerItem table
CREATE TABLE [CommentFromLearnerItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityAttemptId] bigint NOT NULL,
    [Comment] nvarchar(max) NOT NULL CHECK(LEN([Comment])&lt;=4096),
    [Location] nvarchar(255),
    [Ordinal] int NOT NULL,
    [Timestamp] nvarchar(28)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [CommentFromLearnerItem] TO LearningStore

-- Create CommentFromLmsItem table
CREATE TABLE [CommentFromLmsItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityPackageId] bigint NOT NULL,
    [Comment] nvarchar(max) NOT NULL CHECK(LEN([Comment])&lt;=4096),
    [Location] nvarchar(255),
    [Timestamp] nvarchar(28)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [CommentFromLmsItem] TO LearningStore

-- Create CorrectResponseItem table
CREATE TABLE [CorrectResponseItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [InteractionId] bigint NOT NULL,
    [ResponsePattern] nvarchar(max) NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [CorrectResponseItem] TO LearningStore

-- Create EvaluationCommentItem table
CREATE TABLE [EvaluationCommentItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [InteractionId] bigint NOT NULL,
    [Comment] nvarchar(max) NOT NULL CHECK(LEN([Comment])&lt;=4096),
    [Location] nvarchar(255),
    [Ordinal] int NOT NULL,
    [Timestamp] nvarchar(28)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [EvaluationCommentItem] TO LearningStore

-- Create ExtensionDataItem table
CREATE TABLE [ExtensionDataItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityAttemptId] bigint DEFAULT NULL,
    [InteractionId] bigint DEFAULT NULL,
    [AttemptObjectiveId] bigint DEFAULT NULL,
    [Name] nvarchar(256) DEFAULT NULL,
    [AttachmentGuid] uniqueidentifier DEFAULT NULL,
    [AttachmentValue] varbinary(max) DEFAULT NULL,
    [BoolValue] bit DEFAULT NULL,
    [DateTimeValue] datetime DEFAULT NULL,
    [DoubleValue] float(53) DEFAULT NULL,
    [IntValue] int DEFAULT NULL,
    [StringValue] nvarchar(max) DEFAULT NULL CHECK(LEN([StringValue])&lt;=4096)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ExtensionDataItem] TO LearningStore

-- Create GlobalObjectiveItem table
CREATE TABLE [GlobalObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [OrganizationId] bigint DEFAULT NULL,
    [Key] nvarchar(max) NOT NULL CHECK(LEN([Key])&lt;=4096),
    [Description] nvarchar(max) DEFAULT NULL CHECK(LEN([Description])&lt;=4096)
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [GlobalObjectiveItem] TO LearningStore

-- Create InteractionItem table
CREATE TABLE [InteractionItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityAttemptId] bigint NOT NULL,
    [InteractionIdFromCmi] nvarchar(max) NOT NULL CHECK(LEN([InteractionIdFromCmi])&lt;=4096),
    [InteractionType] int DEFAULT NULL,
    [Timestamp] nvarchar(28) DEFAULT NULL,
    [Weighting] float(24) DEFAULT NULL,
    [ResultState] int DEFAULT NULL,
    [ResultNumeric] float(24) DEFAULT NULL,
    [Latency] float(53) DEFAULT NULL,
    [Description] nvarchar(255) DEFAULT NULL,
    [LearnerResponseBool] bit DEFAULT NULL,
    [LearnerResponseString] nvarchar(max) DEFAULT NULL,
    [LearnerResponseNumeric] float(24) DEFAULT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [RawScore] float(24) DEFAULT NULL,
    [MinScore] float(24) DEFAULT NULL,
    [MaxScore] float(24) DEFAULT NULL,
    [EvaluationPoints] float(24) DEFAULT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [InteractionItem] TO LearningStore

-- Create InteractionObjectiveItem table
CREATE TABLE [InteractionObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [InteractionId] bigint NOT NULL,
    [AttemptObjectiveId] bigint NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [InteractionObjectiveItem] TO LearningStore

-- Create LearnerGlobalObjectiveItem table
CREATE TABLE [LearnerGlobalObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [LearnerId] bigint NOT NULL,
    [GlobalObjectiveId] bigint NOT NULL,
    [ScaledScore] float(24) DEFAULT NULL,
    [SuccessStatus] int NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [LearnerGlobalObjectiveItem] TO LearningStore

-- Create MapActivityObjectiveToGlobalObjectiveItem table
CREATE TABLE [MapActivityObjectiveToGlobalObjectiveItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [ActivityObjectiveId] bigint NOT NULL,
    [GlobalObjectiveId] bigint NOT NULL,
    [ReadSatisfiedStatus] bit NOT NULL DEFAULT 1,
    [ReadNormalizedMeasure] bit NOT NULL DEFAULT 1,
    [WriteSatisfiedStatus] bit NOT NULL DEFAULT 0,
    [WriteNormalizedMeasure] bit NOT NULL DEFAULT 0
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [MapActivityObjectiveToGlobalObjectiveItem] TO LearningStore

-- Create PackageItem table
CREATE TABLE [PackageItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [PackageFormat] int NOT NULL,
    [Location] nvarchar(260) NOT NULL,
    [Manifest] xml NOT NULL,
    [Warnings] xml DEFAULT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [PackageItem] TO LearningStore

-- Create RubricItem table
CREATE TABLE [RubricItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [InteractionId] bigint NOT NULL,
    [Ordinal] int NOT NULL,
    [IsSatisfied] bit DEFAULT NULL,
    [Points] float(24) DEFAULT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [RubricItem] TO LearningStore

-- Create ResourceItem table
CREATE TABLE [ResourceItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [PackageId] bigint NOT NULL,
    [ResourceXml] xml NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [ResourceItem] TO LearningStore

-- Create SequencingLogEntryItem table
CREATE TABLE [SequencingLogEntryItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [AttemptId] bigint NOT NULL,
    [ActivityAttemptId] bigint,
    [EventType] int NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [NavigationCommand] int NOT NULL,
    [Timestamp] datetime NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [SequencingLogEntryItem] TO LearningStore

-- Create UserItem table
CREATE TABLE [UserItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [Key] nvarchar(250) NOT NULL,
    [Name] nvarchar(255) NOT NULL,
    [AudioCaptioning] int NOT NULL DEFAULT 0,
    [AudioLevel] float(24) NOT NULL DEFAULT 1,
    [DeliverySpeed] float(24) NOT NULL DEFAULT 1,
    [Language] nvarchar(255) NOT NULL DEFAULT ''
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [UserItem] TO LearningStore

-- Create SiteSettingsItem table
CREATE TABLE [SiteSettingsItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [SiteGuid] uniqueidentifier NOT NULL,
    [SettingsXml] nvarchar(max) NOT NULL,
    [SettingsXmlLastModified] datetime NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [SiteSettingsItem] TO LearningStore

-- Create AssignmentItem table
CREATE TABLE [AssignmentItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [SPSiteGuid] uniqueidentifier NOT NULL,
    [SPWebGuid] uniqueidentifier NOT NULL,
    [RootActivityId] bigint,
    [NonELearningLocation] nvarchar(1000),
    [Title] nvarchar(1000) NOT NULL,
    [StartDate] datetime NOT NULL,
    [DueDate] datetime,
    [PointsPossible] float(24),
    [Description] nvarchar(max) NOT NULL,
    [AutoReturn] bit NOT NULL,
    [ShowAnswersToLearners] bit NOT NULL,
    [CreatedBy] bigint,
    [DateCreated] datetime NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [AssignmentItem] TO LearningStore

-- Create InstructorAssignmentItem table
CREATE TABLE [InstructorAssignmentItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [AssignmentId] bigint NOT NULL,
    [InstructorId] bigint NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [InstructorAssignmentItem] TO LearningStore

-- Create LearnerAssignmentItem table
CREATE TABLE [LearnerAssignmentItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [AssignmentId] bigint NOT NULL,
    [LearnerId] bigint NOT NULL,
    [IsFinal] bit NOT NULL,
    [NonELearningStatus] int,
    [FinalPoints] float(24),
    [InstructorComments] nvarchar(max) NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [LearnerAssignmentItem] TO LearningStore

-- Create UserWebListItem table
CREATE TABLE [UserWebListItem](
    Id bigint IDENTITY PRIMARY KEY NOT NULL,
    [OwnerKey] nvarchar(250) NOT NULL,
    [SPSiteGuid] uniqueidentifier NOT NULL,
    [SPWebGuid] uniqueidentifier NOT NULL,
    [LastAccessTime] datetime NOT NULL
)
GRANT SELECT, INSERT, DELETE, UPDATE ON [UserWebListItem] TO LearningStore

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_AttemptId FOREIGN KEY ([AttemptId])
REFERENCES [AttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_ActivityPackageId FOREIGN KEY ([ActivityPackageId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_CompletionStatus FOREIGN KEY ([CompletionStatus])
REFERENCES [CompletionStatus] (Id)

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_Exit FOREIGN KEY ([Exit])
REFERENCES [ExitMode] (Id)

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_LessonStatus FOREIGN KEY ([LessonStatus])
REFERENCES [LessonStatus] (Id)

ALTER TABLE [ActivityAttemptItem]
ADD CONSTRAINT FK_ActivityAttemptItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

CREATE INDEX AttemptIndex
ON ActivityAttemptItem(AttemptId)

CREATE INDEX ActivityPackageIndex
ON ActivityAttemptItem(ActivityPackageId, AttemptId)

ALTER TABLE [ActivityObjectiveItem]
ADD CONSTRAINT FK_ActivityObjectiveItem_ActivityPackageId FOREIGN KEY ([ActivityPackageId])
REFERENCES [ActivityPackageItem] (Id) ON DELETE CASCADE

CREATE INDEX ActivityPackageIndex
ON ActivityObjectiveItem(ActivityPackageId)

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_ParentActivityId FOREIGN KEY ([ParentActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_PackageId FOREIGN KEY ([PackageId])
REFERENCES [PackageItem] (Id) ON DELETE CASCADE

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_PrimaryObjectiveId FOREIGN KEY ([PrimaryObjectiveId])
REFERENCES [ActivityObjectiveItem] (Id)

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_ResourceId FOREIGN KEY ([ResourceId])
REFERENCES [ResourceItem] (Id)

ALTER TABLE [ActivityPackageItem]
ADD CONSTRAINT FK_ActivityPackageItem_TimeLimitAction FOREIGN KEY ([TimeLimitAction])
REFERENCES [TimeLimitAction] (Id)

CREATE INDEX PackageIndex
ON ActivityPackageItem(PackageId)

CREATE INDEX ParentActivityIndex
ON ActivityPackageItem(ParentActivityId)

ALTER TABLE [PackageGlobalObjectiveItem]
ADD CONSTRAINT FK_PackageGlobalObjectiveItem_LearnerId FOREIGN KEY ([LearnerId])
REFERENCES [UserItem] (Id) ON DELETE CASCADE

ALTER TABLE [PackageGlobalObjectiveItem]
ADD CONSTRAINT FK_PackageGlobalObjectiveItem_GlobalObjectiveId FOREIGN KEY ([GlobalObjectiveId])
REFERENCES [GlobalObjectiveItem] (Id) ON DELETE CASCADE

ALTER TABLE [PackageGlobalObjectiveItem]
ADD CONSTRAINT FK_PackageGlobalObjectiveItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

CREATE INDEX GlobalObjectiveIndex
ON PackageGlobalObjectiveItem(GlobalObjectiveId)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_LearnerId FOREIGN KEY ([LearnerId])
REFERENCES [UserItem] (Id) ON DELETE CASCADE

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_RootActivityId FOREIGN KEY ([RootActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_CompletionStatus FOREIGN KEY ([CompletionStatus])
REFERENCES [CompletionStatus] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_CurrentActivityId FOREIGN KEY ([CurrentActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_SuspendedActivityId FOREIGN KEY ([SuspendedActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_PackageId FOREIGN KEY ([PackageId])
REFERENCES [PackageItem] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_AttemptStatus FOREIGN KEY ([AttemptStatus])
REFERENCES [AttemptStatus] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

ALTER TABLE [AttemptItem]
ADD CONSTRAINT FK_AttemptItem_LearnerAssignmentId FOREIGN KEY ([LearnerAssignmentId])
REFERENCES [LearnerAssignmentItem] (Id) ON DELETE CASCADE

CREATE INDEX LearnerAssignmentIndex
ON AttemptItem(LearnerAssignmentId)
INCLUDE (AttemptStatus)

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_ActivityObjectiveId FOREIGN KEY ([ActivityObjectiveId])
REFERENCES [ActivityObjectiveItem] (Id)

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_CompletionStatus FOREIGN KEY ([CompletionStatus])
REFERENCES [CompletionStatus] (Id)

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_LessonStatus FOREIGN KEY ([LessonStatus])
REFERENCES [LessonStatus] (Id)

ALTER TABLE [AttemptObjectiveItem]
ADD CONSTRAINT FK_AttemptObjectiveItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

CREATE INDEX ActivityAttemptIndex
ON AttemptObjectiveItem(ActivityAttemptId, ActivityObjectiveId)

ALTER TABLE [CommentFromLearnerItem]
ADD CONSTRAINT FK_CommentFromLearnerItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id) ON DELETE CASCADE

CREATE INDEX ActivityAttemptIndex
ON CommentFromLearnerItem(ActivityAttemptId)

ALTER TABLE [CommentFromLmsItem]
ADD CONSTRAINT FK_CommentFromLmsItem_ActivityPackageId FOREIGN KEY ([ActivityPackageId])
REFERENCES [ActivityPackageItem] (Id) ON DELETE CASCADE

CREATE INDEX ActivityPackageIndex
ON CommentFromLmsItem(ActivityPackageId)

ALTER TABLE [CorrectResponseItem]
ADD CONSTRAINT FK_CorrectResponseItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id) ON DELETE CASCADE

CREATE INDEX InteractionIndex
ON CorrectResponseItem(InteractionId)

ALTER TABLE [EvaluationCommentItem]
ADD CONSTRAINT FK_EvaluationCommentItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id) ON DELETE CASCADE

CREATE INDEX EvaluationCommentIndex
ON EvaluationCommentItem(InteractionId)

ALTER TABLE [ExtensionDataItem]
ADD CONSTRAINT FK_ExtensionDataItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [ExtensionDataItem]
ADD CONSTRAINT FK_ExtensionDataItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id)

ALTER TABLE [ExtensionDataItem]
ADD CONSTRAINT FK_ExtensionDataItem_AttemptObjectiveId FOREIGN KEY ([AttemptObjectiveId])
REFERENCES [AttemptObjectiveItem] (Id)

CREATE INDEX ActivityAttemptIndex
ON ExtensionDataItem(ActivityAttemptId, AttachmentGuid, InteractionId, AttemptObjectiveId)

CREATE INDEX AttachmentGuidIndex
ON ExtensionDataItem(AttachmentGuid, AttemptObjectiveId)

CREATE INDEX InteractionAndObjectiveIndex
ON ExtensionDataItem(InteractionId, AttemptObjectiveId)

ALTER TABLE [GlobalObjectiveItem]
ADD CONSTRAINT FK_GlobalObjectiveItem_OrganizationId FOREIGN KEY ([OrganizationId])
REFERENCES [ActivityPackageItem] (Id) ON DELETE CASCADE

CREATE INDEX OrganizationIndex
ON GlobalObjectiveItem(OrganizationId)

ALTER TABLE [InteractionItem]
ADD CONSTRAINT FK_InteractionItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [InteractionItem]
ADD CONSTRAINT FK_InteractionItem_InteractionType FOREIGN KEY ([InteractionType])
REFERENCES [InteractionType] (Id)

ALTER TABLE [InteractionItem]
ADD CONSTRAINT FK_InteractionItem_ResultState FOREIGN KEY ([ResultState])
REFERENCES [InteractionResultState] (Id)

CREATE INDEX ActivityAttemptIndex
ON InteractionItem(ActivityAttemptId)

ALTER TABLE [InteractionObjectiveItem]
ADD CONSTRAINT FK_InteractionObjectiveItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id) ON DELETE CASCADE

ALTER TABLE [InteractionObjectiveItem]
ADD CONSTRAINT FK_InteractionObjectiveItem_AttemptObjectiveId FOREIGN KEY ([AttemptObjectiveId])
REFERENCES [AttemptObjectiveItem] (Id)

CREATE INDEX InteractionIndex
ON InteractionObjectiveItem(InteractionId)

ALTER TABLE [LearnerGlobalObjectiveItem]
ADD CONSTRAINT FK_LearnerGlobalObjectiveItem_LearnerId FOREIGN KEY ([LearnerId])
REFERENCES [UserItem] (Id) ON DELETE CASCADE

ALTER TABLE [LearnerGlobalObjectiveItem]
ADD CONSTRAINT FK_LearnerGlobalObjectiveItem_GlobalObjectiveId FOREIGN KEY ([GlobalObjectiveId])
REFERENCES [GlobalObjectiveItem] (Id) ON DELETE CASCADE

ALTER TABLE [LearnerGlobalObjectiveItem]
ADD CONSTRAINT FK_LearnerGlobalObjectiveItem_SuccessStatus FOREIGN KEY ([SuccessStatus])
REFERENCES [SuccessStatus] (Id)

CREATE INDEX LearnerIndex
ON LearnerGlobalObjectiveItem(LearnerId, GlobalObjectiveId)

ALTER TABLE [MapActivityObjectiveToGlobalObjectiveItem]
ADD CONSTRAINT FK_MapActivityObjectiveToGlobalObjectiveItem_ActivityObjectiveId FOREIGN KEY ([ActivityObjectiveId])
REFERENCES [ActivityObjectiveItem] (Id) ON DELETE CASCADE

ALTER TABLE [MapActivityObjectiveToGlobalObjectiveItem]
ADD CONSTRAINT FK_MapActivityObjectiveToGlobalObjectiveItem_GlobalObjectiveId FOREIGN KEY ([GlobalObjectiveId])
REFERENCES [GlobalObjectiveItem] (Id)

CREATE INDEX GlobalObjectiveIndex
ON MapActivityObjectiveToGlobalObjectiveItem(GlobalObjectiveId, ActivityObjectiveId)

ALTER TABLE [PackageItem]
ADD CONSTRAINT FK_PackageItem_PackageFormat FOREIGN KEY ([PackageFormat])
REFERENCES [PackageFormat] (Id)

ALTER TABLE [RubricItem]
ADD CONSTRAINT FK_RubricItem_InteractionId FOREIGN KEY ([InteractionId])
REFERENCES [InteractionItem] (Id) ON DELETE CASCADE

CREATE INDEX InteractionIndex
ON RubricItem(InteractionId)

ALTER TABLE [ResourceItem]
ADD CONSTRAINT FK_ResourceItem_PackageId FOREIGN KEY ([PackageId])
REFERENCES [PackageItem] (Id) ON DELETE CASCADE

ALTER TABLE [SequencingLogEntryItem]
ADD CONSTRAINT FK_SequencingLogEntryItem_AttemptId FOREIGN KEY ([AttemptId])
REFERENCES [AttemptItem] (Id) ON DELETE CASCADE

ALTER TABLE [SequencingLogEntryItem]
ADD CONSTRAINT FK_SequencingLogEntryItem_ActivityAttemptId FOREIGN KEY ([ActivityAttemptId])
REFERENCES [ActivityAttemptItem] (Id)

ALTER TABLE [SequencingLogEntryItem]
ADD CONSTRAINT FK_SequencingLogEntryItem_EventType FOREIGN KEY ([EventType])
REFERENCES [SequencingEventType] (Id)

ALTER TABLE [SequencingLogEntryItem]
ADD CONSTRAINT FK_SequencingLogEntryItem_NavigationCommand FOREIGN KEY ([NavigationCommand])
REFERENCES [NavigationCommand] (Id)

ALTER TABLE [UserItem]
ADD CONSTRAINT FK_UserItem_AudioCaptioning FOREIGN KEY ([AudioCaptioning])
REFERENCES [AudioCaptioning] (Id)

CREATE INDEX KeyIndex
ON UserItem([Key])

ALTER TABLE [AssignmentItem]
ADD CONSTRAINT FK_AssignmentItem_RootActivityId FOREIGN KEY ([RootActivityId])
REFERENCES [ActivityPackageItem] (Id)

ALTER TABLE [AssignmentItem]
ADD CONSTRAINT FK_AssignmentItem_CreatedBy FOREIGN KEY ([CreatedBy])
REFERENCES [UserItem] (Id)

CREATE INDEX SPWebIndex
ON AssignmentItem(SPWebGuid)

ALTER TABLE [InstructorAssignmentItem]
ADD CONSTRAINT FK_InstructorAssignmentItem_AssignmentId FOREIGN KEY ([AssignmentId])
REFERENCES [AssignmentItem] (Id) ON DELETE CASCADE

ALTER TABLE [InstructorAssignmentItem]
ADD CONSTRAINT FK_InstructorAssignmentItem_InstructorId FOREIGN KEY ([InstructorId])
REFERENCES [UserItem] (Id) ON DELETE CASCADE

CREATE INDEX AssignmentIndex
ON InstructorAssignmentItem(AssignmentId,InstructorId)

CREATE INDEX InstructorIndex
ON InstructorAssignmentItem(InstructorId,AssignmentId)

ALTER TABLE [LearnerAssignmentItem]
ADD CONSTRAINT FK_LearnerAssignmentItem_AssignmentId FOREIGN KEY ([AssignmentId])
REFERENCES [AssignmentItem] (Id) ON DELETE CASCADE

ALTER TABLE [LearnerAssignmentItem]
ADD CONSTRAINT FK_LearnerAssignmentItem_LearnerId FOREIGN KEY ([LearnerId])
REFERENCES [UserItem] (Id)

ALTER TABLE [LearnerAssignmentItem]
ADD CONSTRAINT FK_LearnerAssignmentItem_NonELearningStatus FOREIGN KEY ([NonELearningStatus])
REFERENCES [AttemptStatus] (Id)

CREATE INDEX AssignmentIndex
ON LearnerAssignmentItem(AssignmentId,LearnerId)
INCLUDE (IsFinal, NonELearningStatus)

CREATE INDEX LearnerIndex
ON LearnerAssignmentItem(LearnerId,AssignmentId)

CREATE INDEX OwnerIndex
ON UserWebListItem(OwnerKey)

GO

-- Create function for the delete security on the AssignmentItem item type
CREATE FUNCTION [AssignmentItem$DeleteSecurity](@UserKey nvarchar(250),@Id bigint)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM InstructorAssignmentItem iai
    INNER JOIN UserItem ui ON iai.InstructorId=ui.Id
    WHERE iai.AssignmentId=@Id AND
    ui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    ) | (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM AssignmentItem ai
    INNER JOIN UserItem ui ON ai.CreatedBy=ui.Id
    WHERE ai.Id=@Id AND
    ui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [AssignmentItem$DeleteSecurity] TO LearningStore
GO

-- Create a function that implements the SeqNavOrganizationGlobalObjectiveView view
CREATE FUNCTION [SeqNavOrganizationGlobalObjectiveView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT GlobalObjectiveItem.OrganizationId OrganizationId, GlobalObjectiveItem.[Key] [Key], PackageGlobalObjectiveItem.LearnerId LearnerId, PackageGlobalObjectiveItem.ScaledScore ScaledScore, PackageGlobalObjectiveItem.SuccessStatus SuccessStatus
    FROM GlobalObjectiveItem
    INNER JOIN PackageGlobalObjectiveItem ON PackageGlobalObjectiveItem.GlobalObjectiveId=GlobalObjectiveItem.Id
)
GO
GRANT SELECT ON [SeqNavOrganizationGlobalObjectiveView] TO LearningStore
GO

-- Create a function that implements the SeqNavLearnerGlobalObjectiveView view
CREATE FUNCTION [SeqNavLearnerGlobalObjectiveView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT LearnerGlobalObjectiveItem.LearnerId LearnerId, GlobalObjectiveItem.[Key] [Key], LearnerGlobalObjectiveItem.ScaledScore ScaledScore, LearnerGlobalObjectiveItem.SuccessStatus SuccessStatus
    FROM GlobalObjectiveItem
    INNER JOIN LearnerGlobalObjectiveItem ON LearnerGlobalObjectiveItem.GlobalObjectiveId=GlobalObjectiveItem.Id
)
GO
GRANT SELECT ON [SeqNavLearnerGlobalObjectiveView] TO LearningStore
GO

-- Create a function that implements the SeqNavActivityPackageView view
CREATE FUNCTION [SeqNavActivityPackageView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ActivityPackageItem.Id, ActivityPackageItem.PackageId,PackageItem.PackageFormat PackageFormat, PackageItem.Location PackagePath
    FROM ActivityPackageItem
    INNER JOIN PackageItem ON ActivityPackageItem.PackageId=PackageItem.Id
)
GO
GRANT SELECT ON [SeqNavActivityPackageView] TO LearningStore
GO

-- Create a function that implements the SeqNavActivityTreeView view
CREATE FUNCTION [SeqNavActivityTreeView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    WITH TreeQuery(Id, ParentActivityId, DataModelCache, RootActivityId, ObjectivesGlobalToSystem)
    AS (
    SELECT Id, ParentActivityId, DataModelCache, Id, ObjectivesGlobalToSystem
    FROM ActivityPackageItem
    UNION ALL
    SELECT t1.Id, t1.ParentActivityId, t1.DataModelCache, t2.RootActivityId, t1.ObjectivesGlobalToSystem
    FROM TreeQuery t2
    INNER JOIN ActivityPackageItem t1 ON t1.ParentActivityId=t2.Id )
    SELECT Id, ParentActivityId, DataModelCache, RootActivityId, ObjectivesGlobalToSystem
    FROM TreeQuery
)
GO
GRANT SELECT ON [SeqNavActivityTreeView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptView view
CREATE FUNCTION [SeqNavAttemptView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT AttemptItem.Id Id, AttemptItem.AttemptStatus, AttemptItem.LogDetailSequencing, AttemptItem.LogFinalSequencing, AttemptItem.LogRollup, AttemptItem.CurrentActivityId, AttemptItem.SuspendedActivityId, AttemptItem.RootActivityId,AttemptItem.StartedTimestamp, AttemptItem.FinishedTimestamp,PackageItem.Id PackageId, PackageItem.PackageFormat PackageFormat, PackageItem.Location PackagePath, UserItem.Id LearnerId, UserItem.Name LearnerName, UserItem.AudioCaptioning LearnerAudioCaptioning, UserItem.AudioLevel LearnerAudioLevel, UserItem.DeliverySpeed LearnerDeliverySpeed, UserItem.Language LearnerLanguage, AttemptItem.TotalPoints, AttemptItem.SuccessStatus, AttemptItem.CompletionStatus
    FROM AttemptItem
    INNER JOIN PackageItem ON AttemptItem.PackageId=PackageItem.Id
    INNER JOIN UserItem ON AttemptItem.LearnerId=UserItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptView] TO LearningStore
GO

-- Create a function that implements the SeqNavActivityAttemptView view
CREATE FUNCTION [SeqNavActivityAttemptView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ActivityAttemptItem.Id, ActivityAttemptItem.DataModelCache, ActivityAttemptItem.SequencingDataCache, ActivityAttemptItem.RandomPlacement, ActivityAttemptItem.AttemptId, ActivityAttemptItem.ActivityPackageId, ActivityPackageItem.DataModelCache StaticDataModelCache, ActivityPackageItem.ParentActivityId ParentId, ActivityPackageItem.ObjectivesGlobalToSystem ObjectivesGlobalToSystem, ActivityAttemptItem.CompletionStatus, ActivityAttemptItem.AttemptCount, ActivityAttemptItem.EvaluationPoints, ActivityAttemptItem.[Exit], ActivityAttemptItem.LessonStatus, ActivityAttemptItem.Location, ActivityAttemptItem.MinScore, ActivityAttemptItem.MaxScore, ActivityAttemptItem.ProgressMeasure, ActivityAttemptItem.RawScore, ActivityAttemptItem.ScaledScore, ActivityAttemptItem.SessionStartTimestamp, ActivityAttemptItem.SessionTime, ActivityAttemptItem.SuccessStatus, ActivityAttemptItem.SuspendData, ActivityAttemptItem.TotalTime
    FROM ActivityAttemptItem
    INNER JOIN ActivityPackageItem ON ActivityAttemptItem.ActivityPackageId=ActivityPackageItem.Id
)
GO
GRANT SELECT ON [SeqNavActivityAttemptView] TO LearningStore
GO

-- Create a function that implements the SeqNavCurrentActivityAttemptView view
CREATE FUNCTION [SeqNavCurrentActivityAttemptView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ActivityAttemptItem.Id, ActivityAttemptItem.DataModelCache DataModelCache, ActivityAttemptItem.SequencingDataCache, ActivityAttemptItem.RandomPlacement, ActivityAttemptItem.AttemptId, ActivityPackageItem.DataModelCache StaticDataModelCache, ActivityPackageItem.ObjectivesGlobalToSystem ObjectivesGlobalToSystem, ActivityPackageItem.Credit Credit
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN ActivityPackageItem ON ActivityAttemptItem.ActivityPackageId=ActivityPackageItem.Id
    WHERE AttemptItem.CurrentActivityId=ActivityPackageItem.Id
)
GO
GRANT SELECT ON [SeqNavCurrentActivityAttemptView] TO LearningStore
GO

-- Create a function that implements the SeqNavCurrentCommentFromLmsView view
CREATE FUNCTION [SeqNavCurrentCommentFromLmsView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT CommentFromLmsItem.Comment, CommentFromLmsItem.Location, CommentFromLmsItem.Timestamp, AttemptItem.Id AttemptId, ActivityAttemptItem.DataModelCache
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN ActivityPackageItem ON ActivityAttemptItem.ActivityPackageId=ActivityPackageItem.Id
    INNER JOIN CommentFromLmsItem ON ActivityPackageItem.Id=CommentFromLmsItem.ActivityPackageId
    WHERE AttemptItem.CurrentActivityId=ActivityPackageItem.Id
)
GO
GRANT SELECT ON [SeqNavCurrentCommentFromLmsView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptObjectiveView view
CREATE FUNCTION [SeqNavAttemptObjectiveView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT AttemptObjectiveItem.Id AttemptObjectiveId, AttemptItem.Id AttemptId, AttemptObjectiveItem.CompletionStatus, AttemptObjectiveItem.Description, AttemptObjectiveItem.[Key], AttemptObjectiveItem.LessonStatus, AttemptObjectiveItem.RawScore, AttemptObjectiveItem.MinScore, AttemptObjectiveItem.MaxScore, AttemptObjectiveItem.ProgressMeasure, AttemptObjectiveItem.ScaledScore, AttemptObjectiveItem.SuccessStatus, AttemptObjectiveItem.ActivityAttemptId, AttemptObjectiveItem.IsPrimaryObjective
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN AttemptObjectiveItem ON AttemptObjectiveItem.ActivityAttemptId=ActivityAttemptItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptObjectiveView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptCommentFromLearnerView view
CREATE FUNCTION [SeqNavAttemptCommentFromLearnerView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT CommentFromLearnerItem.Id CommentFromLearnerId, AttemptItem.Id AttemptId, CommentFromLearnerItem.Comment, CommentFromLearnerItem.Location, CommentFromLearnerItem.Timestamp, CommentFromLearnerItem.ActivityAttemptId, CommentFromLearnerItem.Ordinal
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN CommentFromLearnerItem ON CommentFromLearnerItem.ActivityAttemptId=ActivityAttemptItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptCommentFromLearnerView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptInteractionView view
CREATE FUNCTION [SeqNavAttemptInteractionView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT InteractionItem.Id InteractionId, AttemptItem.Id AttemptId, InteractionItem.InteractionIdFromCmi, InteractionItem.InteractionType, InteractionItem.Timestamp, InteractionItem.Weighting, InteractionItem.ResultState, InteractionItem.ResultNumeric, InteractionItem.Latency, InteractionItem.Description, InteractionItem.LearnerResponseBool, InteractionItem.LearnerResponseString, InteractionItem.LearnerResponseNumeric, InteractionItem.ScaledScore, InteractionItem.RawScore, InteractionItem.MinScore, InteractionItem.MaxScore, InteractionItem.ActivityAttemptId, InteractionItem.EvaluationPoints
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptInteractionView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptEvaluationCommentLearnerView view
CREATE FUNCTION [SeqNavAttemptEvaluationCommentLearnerView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT EvaluationCommentItem.Id EvaluationCommentId, AttemptItem.Id AttemptId, EvaluationCommentItem.Comment, EvaluationCommentItem.Location, EvaluationCommentItem.Timestamp, EvaluationCommentItem.InteractionId, EvaluationCommentItem.Ordinal
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN EvaluationCommentItem ON EvaluationCommentItem.InteractionId=InteractionItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptEvaluationCommentLearnerView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptCorrectResponseView view
CREATE FUNCTION [SeqNavAttemptCorrectResponseView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT CorrectResponseItem.Id CorrectResponseId, AttemptItem.Id AttemptId, CorrectResponseItem.InteractionId, CorrectResponseItem.ResponsePattern
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN CorrectResponseItem ON CorrectResponseItem.InteractionId=InteractionItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptCorrectResponseView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptInteractionObjectiveView view
CREATE FUNCTION [SeqNavAttemptInteractionObjectiveView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT InteractionObjectiveItem.Id InteractionObjectiveId, AttemptItem.Id AttemptId, InteractionObjectiveItem.AttemptObjectiveId, InteractionObjectiveItem.InteractionId
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN InteractionObjectiveItem ON InteractionObjectiveItem.InteractionId=InteractionItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptInteractionObjectiveView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptExtensionDataView view
CREATE FUNCTION [SeqNavAttemptExtensionDataView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ExtensionDataItem.Id ExtensionDataId, AttemptItem.Id AttemptId, ExtensionDataItem.Name, ExtensionDataItem.StringValue, ExtensionDataItem.IntValue, ExtensionDataItem.BoolValue, ExtensionDataItem.DoubleValue, ExtensionDataItem.DateTimeValue, ExtensionDataItem.AttachmentGuid, ExtensionDataItem.ActivityAttemptId
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN ExtensionDataItem ON ExtensionDataItem.ActivityAttemptId=ActivityAttemptItem.Id
    WHERE ExtensionDataItem.AttemptObjectiveId IS NULL AND
    ExtensionDataItem.InteractionId IS NULL
)
GO
GRANT SELECT ON [SeqNavAttemptExtensionDataView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptObjectiveExtensionDataView view
CREATE FUNCTION [SeqNavAttemptObjectiveExtensionDataView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ExtensionDataItem.Id ExtensionDataId, ExtensionDataItem.AttemptObjectiveId, AttemptItem.Id AttemptId, ExtensionDataItem.Name, ExtensionDataItem.StringValue, ExtensionDataItem.IntValue, ExtensionDataItem.BoolValue, ExtensionDataItem.DoubleValue, ExtensionDataItem.DateTimeValue, ExtensionDataItem.AttachmentGuid, ExtensionDataItem.AttachmentValue
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN AttemptObjectiveItem ON AttemptObjectiveItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN ExtensionDataItem ON ExtensionDataItem.AttemptObjectiveId=AttemptObjectiveItem.Id
    WHERE ExtensionDataItem.InteractionId IS NULL AND
    ExtensionDataItem.AttemptObjectiveId IS NOT NULL
)
GO
GRANT SELECT ON [SeqNavAttemptObjectiveExtensionDataView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptInteractionExtensionDataView view
CREATE FUNCTION [SeqNavAttemptInteractionExtensionDataView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT ExtensionDataItem.Id ExtensionDataId, ExtensionDataItem.InteractionId, AttemptItem.Id AttemptId, ExtensionDataItem.Name, ExtensionDataItem.StringValue, ExtensionDataItem.IntValue, ExtensionDataItem.BoolValue, ExtensionDataItem.DoubleValue, ExtensionDataItem.DateTimeValue, ExtensionDataItem.AttachmentGuid, ExtensionDataItem.AttachmentValue
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN ExtensionDataItem ON ExtensionDataItem.InteractionId=InteractionItem.Id
    WHERE ExtensionDataItem.AttemptObjectiveId IS NULL AND
    ExtensionDataItem.InteractionId IS NOT NULL
)
GO
GRANT SELECT ON [SeqNavAttemptInteractionExtensionDataView] TO LearningStore
GO

-- Create a function that implements the SeqNavAttemptRubricView view
CREATE FUNCTION [SeqNavAttemptRubricView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT RubricItem.Id RubricItemId, AttemptItem.Id AttemptId, RubricItem.InteractionId, RubricItem.Ordinal, RubricItem.IsSatisfied, RubricItem.Points
    FROM AttemptItem
    INNER JOIN ActivityAttemptItem ON AttemptItem.Id=ActivityAttemptItem.AttemptId
    INNER JOIN InteractionItem ON InteractionItem.ActivityAttemptId=ActivityAttemptItem.Id
    INNER JOIN RubricItem ON RubricItem.InteractionId=InteractionItem.Id
)
GO
GRANT SELECT ON [SeqNavAttemptRubricView] TO LearningStore
GO

-- Create a function that implements the LearnerAssignmentView view
CREATE FUNCTION [LearnerAssignmentView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from LearnerAssignmentItem -----
    lai.Id                          LearnerAssignmentId,
    lai.LearnerId                   LearnerId,
    ----- from AssignmentItem -----
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.RootActivityId              RootActivityId,
    ----- from AttemptItem -----
    ati.Id AttemptId,
    ati.TotalPoints                 AttemptGradedPoints,
    ----- computed LearnerAssignmentState -----
    dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) LearnerAssignmentState
    -----
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem asi ON lai.AssignmentId = asi.Id
    LEFT OUTER JOIN AttemptItem ati ON ati.LearnerAssignmentId = lai.Id
)
GO
GRANT SELECT ON [LearnerAssignmentView] TO LearningStore
GO

-- Create a function that implements the AssignmentPropertiesView view
CREATE FUNCTION [AssignmentPropertiesView](@UserKey nvarchar(250),@AssignmentId bigint=NULL,@IsInstructor bit=NULL)
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    asi.DateCreated                 AssignmentDateCreated,
    asi.RootActivityId              RootActivityId,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation
    -----
    FROM AssignmentItem asi
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki ON api.PackageId = pki.Id
    WHERE asi.Id = @AssignmentId
)
GO
GRANT SELECT ON [AssignmentPropertiesView] TO LearningStore
GO

-- Create function for the security on the AssignmentPropertiesView view
CREATE FUNCTION [AssignmentPropertiesView$Security](@UserKey nvarchar(250),@AssignmentId bigint=NULL,@IsInstructor bit=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM AssignmentItem asi
    LEFT OUTER JOIN LearnerAssignmentItem lai ON lai.AssignmentId = asi.Id
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = asi.Id
    LEFT OUTER JOIN UserItem lui ON lai.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE asi.Id = @AssignmentId AND
    (((lui.[Key] = @UserKey) AND (@IsInstructor = 0) AND (GETUTCDATE() &gt;= asi.StartDate))
    OR
    ((iui.[Key]=@UserKey) AND (@IsInstructor = 1)))
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [AssignmentPropertiesView$Security] TO LearningStore
GO

-- Create a function that implements the AssignmentListForInstructors view
CREATE FUNCTION [AssignmentListForInstructors](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    asi.DateCreated                 AssignmentDateCreated,
    asi.RootActivityId              RootActivityId,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    ----- from learner assignment computed info -----
    ISNULL(la.CountTotal,0)         CountTotal,
    ISNULL(la.CountNotStarted,0)    CountNotStarted,
    ISNULL(la.CountActive,0)        CountActive,
    ISNULL(la.CountCompleted,0)     CountCompleted,
    ISNULL(la.CountFinal,0)         CountFinal,
    ISNULL(la.CountStarted,0)       CountStarted,
    ISNULL(la.CountNotStartedOrActive,0) CountNotStartedOrActive,
    ISNULL(la.CountCompletedOrFinal,0) CountCompletedOrFinal,
    ISNULL(la.CountNotFinal,0)      CountNotFinal,
    la.MinGradedPoints              MinGradedPoints,
    la.MaxGradedPoints              MaxGradedPoints,
    la.AvgGradedPoints              AvgGradedPoints,
    la.MinFinalPoints               MinFinalPoints,
    la.MaxFinalPoints               MaxFinalPoints,
    la.AvgFinalPoints               AvgFinalPoints
    -----
    FROM AssignmentItem asi
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    INNER JOIN InstructorAssignmentItem iai ON asi.Id = iai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki ON api.PackageId = pki.Id
    LEFT OUTER JOIN (
    SELECT
    ----- from Assignment -----
    lai.AssignmentId,
    ----- computed CountTotal -----
    COUNT(lai.Id) CountTotal,
    ----- computed CountNotStarted -----
    COUNT(CASE WHEN dbo.IsLearnerAssignmentStarted(asi.RootActivityId, lai.NonELearningStatus, ati.AttemptStatus) = 0 THEN 1 ELSE NULL END) CountNotStarted,
    ----- computed CountActive -----
    COUNT(CASE WHEN dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) = 1 THEN 1 ELSE NULL END) CountActive,
    ----- computed CountCompleted -----
    COUNT(CASE WHEN dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) = 2 THEN 1 ELSE NULL END) CountCompleted,
    ----- computed CountFinal -----
    COUNT(CASE WHEN lai.IsFinal = 1 THEN 1 ELSE NULL END) CountFinal,
    ----- computed CountStarted -----
    COUNT(CASE WHEN dbo.IsLearnerAssignmentStarted(asi.RootActivityId, lai.NonELearningStatus, ati.AttemptStatus) &lt;&gt; 0 THEN 1 ELSE NULL END) CountStarted,
    ----- computed CountNotStartedOrActive -----
    COUNT(CASE WHEN dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) IN (0,1) THEN 1 ELSE NULL END) CountNotStartedOrActive,
    ----- computed CountCompletedOrFinal -----
    COUNT(CASE WHEN dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) IN (2,3) THEN 1 ELSE NULL END) CountCompletedOrFinal,
    ----- computed CountNotFinal -----
    COUNT(CASE WHEN lai.IsFinal = 0 THEN 1 ELSE NULL END) CountNotFinal,
    ----- computed MinGradedPoints -----
    MIN(ati.TotalPoints)              MinGradedPoints,
    ----- computed MaxGradedPoints -----
    MAX(ati.TotalPoints)              MaxGradedPoints,
    ----- computed AvgGradedPoints -----
    AVG(ati.TotalPoints)              AvgGradedPoints,
    ----- computed MinFinalPoints -----
    MIN(lai.FinalPoints)              MinFinalPoints,
    ----- computed MaxFinalPoints -----
    MAX(lai.FinalPoints)              MaxFinalPoints,
    ----- computed AvgFinalPoints -----
    AVG(lai.FinalPoints)              AvgFinalPoints
    -----
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem asi ON lai.AssignmentId = asi.Id
    LEFT OUTER JOIN AttemptItem ati ON ati.LearnerAssignmentId = lai.Id
    INNER JOIN InstructorAssignmentItem iai ON asi.Id = iai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE iui.[Key] = @UserKey
    GROUP BY lai.AssignmentId) AS la ON asi.Id = la.AssignmentId
    WHERE iui.[Key] = @UserKey
)
GO
GRANT SELECT ON [AssignmentListForInstructors] TO LearningStore
GO

-- Create function for the security on the AssignmentListForInstructors view
CREATE FUNCTION [AssignmentListForInstructors$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [AssignmentListForInstructors$Security] TO LearningStore
GO

-- Create a function that implements the InstructorAssignmentListForInstructors view
CREATE FUNCTION [InstructorAssignmentListForInstructors](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from InstructorAssignmentItem -----
    iai.Id                          InstructorAssignmentId,
    iai.InstructorId                InstructorId,
    iui.[Name]                      InstructorName,
    iui.[Key]                       InstructorKey,
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    pki.Manifest                    PackageManifest
    -----
    FROM InstructorAssignmentItem iai
    INNER JOIN AssignmentItem asi ON iai.AssignmentId = asi.Id
    INNER JOIN UserItem iui ON iui.Id = iai.InstructorId
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki on api.PackageId = pki.Id
    WHERE EXISTS
    (
    SELECT *
    FROM InstructorAssignmentItem iai2
    INNER JOIN UserItem ui2
    ON iai2.InstructorId = ui2.Id
    WHERE iai2.AssignmentId = asi.Id
    AND ui2.[Key] = @UserKey
    )
)
GO
GRANT SELECT ON [InstructorAssignmentListForInstructors] TO LearningStore
GO

-- Create function for the security on the InstructorAssignmentListForInstructors view
CREATE FUNCTION [InstructorAssignmentListForInstructors$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [InstructorAssignmentListForInstructors$Security] TO LearningStore
GO

-- Create a function that implements the LearnerAssignmentListForLearners view
CREATE FUNCTION [LearnerAssignmentListForLearners](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from LearnerAssignmentItem -----
    lai.Id                          LearnerAssignmentId,
    lai.LearnerId                   LearnerId,
    lui.[Name]                      LearnerName,
    lui.[Key]                       LearnerKey,
    lai.IsFinal                     IsFinal,
    lai.NonELearningStatus          NonELearningStatus,
    CASE WHEN lai.IsFinal = 1 THEN lai.FinalPoints ELSE NULL END
    FinalPoints,
    lai.InstructorComments          InstructorComments,
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    asi.DateCreated                 AssignmentDateCreated,
    asi.RootActivityId              RootActivityId,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    ----- from AttemptItem -----
    ati.Id AttemptId,
    ati.CurrentActivityId           AttemptCurrentActivityId,
    ati.SuspendedActivityId         AttemptSuspendedActivityId,
    ati.AttemptStatus               AttemptStatus,
    ati.FinishedTimestamp           AttemptFinishedTimestamp,
    ati.LogDetailSequencing         AttemptLogDetailSequencing,
    ati.LogFinalSequencing          AttemptLogFinalSequencing,
    ati.LogRollup                   AttemptLogRollup,
    ati.StartedTimestamp            AttemptStartedTimestamp,
    ati.CompletionStatus            AttemptCompletionStatus,
    ati.SuccessStatus               AttemptSuccessStatus,
    ati.TotalPoints                 AttemptGradedPoints,
    ----- computed LearnerAssignmentState -----
    dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) LearnerAssignmentState,
    ----- computed HasInstructors -----
    CASE WHEN EXISTS
    (
    SELECT *
    FROM InstructorAssignmentItem iaiH
    WHERE iaiH.AssignmentId = asi.Id
    ) THEN 1 ELSE 0 END             HasInstructors
    -----
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem asi ON lai.AssignmentId = asi.Id
    INNER JOIN UserItem lui ON lui.Id = lai.LearnerId
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki on api.PackageId = pki.Id
    LEFT OUTER JOIN AttemptItem ati ON ati.LearnerAssignmentId = lai.Id
    WHERE lui.[Key] = @UserKey
    AND GETUTCDATE() &gt;= asi.StartDate
)
GO
GRANT SELECT ON [LearnerAssignmentListForLearners] TO LearningStore
GO

-- Create function for the security on the LearnerAssignmentListForLearners view
CREATE FUNCTION [LearnerAssignmentListForLearners$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [LearnerAssignmentListForLearners$Security] TO LearningStore
GO

-- Create a function that implements the LearnerAssignmentListForInstructors view
CREATE FUNCTION [LearnerAssignmentListForInstructors](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from LearnerAssignmentItem -----
    lai.Id                          LearnerAssignmentId,
    lai.LearnerId                   LearnerId,
    lui.[Name]                      LearnerName,
    lui.[Key]                       LearnerKey,
    lai.IsFinal                     IsFinal,
    lai.NonELearningStatus          NonELearningStatus,
    lai.FinalPoints                 FinalPoints,
    lai.InstructorComments          InstructorComments,
    ----- from AssignmentItem -----
    asi.Id                          AssignmentId,
    asi.SPSiteGuid                  AssignmentSPSiteGuid,
    asi.SPWebGuid                   AssignmentSPWebGuid,
    asi.NonELearningLocation        AssignmentNonELearningLocation,
    asi.Title                       AssignmentTitle,
    asi.StartDate                   AssignmentStartDate,
    asi.DueDate                     AssignmentDueDate,
    asi.PointsPossible              AssignmentPointsPossible,
    asi.Description                 AssignmentDescription,
    asi.AutoReturn                  AssignmentAutoReturn,
    asi.ShowAnswersToLearners       AssignmentShowAnswersToLearners,
    asi.CreatedBy                   AssignmentCreatedById,
    cbui.[Name]                     AssignmentCreatedByName,
    cbui.[Key]                      AssignmentCreatedByKey,
    asi.RootActivityId              RootActivityId,
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    pki.Manifest                    PackageManifest,
    ----- from AttemptItem -----
    ati.Id AttemptId,
    ati.CurrentActivityId           AttemptCurrentActivityId,
    ati.SuspendedActivityId         AttemptSuspendedActivityId,
    ati.AttemptStatus               AttemptStatus,
    ati.FinishedTimestamp           AttemptFinishedTimestamp,
    ati.LogDetailSequencing         AttemptLogDetailSequencing,
    ati.LogFinalSequencing          AttemptLogFinalSequencing,
    ati.LogRollup                   AttemptLogRollup,
    ati.StartedTimestamp            AttemptStartedTimestamp,
    ati.CompletionStatus            AttemptCompletionStatus,
    ati.SuccessStatus               AttemptSuccessStatus,
    ati.TotalPoints                 AttemptGradedPoints,
    ----- computed LearnerAssignmentState -----
    dbo.GetLearnerAssignmentState(asi.RootActivityId, lai.IsFinal, lai.NonELearningStatus, ati.AttemptStatus) LearnerAssignmentState,
    ----- computed HasInstructors -----
    CASE WHEN EXISTS
    (
    SELECT *
    FROM InstructorAssignmentItem iaiH
    WHERE iaiH.AssignmentId = asi.Id
    ) THEN 1 ELSE 0 END             HasInstructors
    -----
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem asi ON lai.AssignmentId = asi.Id
    INNER JOIN UserItem lui ON lui.Id = lai.LearnerId
    INNER JOIN UserItem cbui ON cbui.Id = asi.CreatedBy
    INNER JOIN InstructorAssignmentItem iai ON lai.AssignmentId = iai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    LEFT OUTER JOIN ActivityPackageItem api ON asi.RootActivityId = api.Id
    LEFT OUTER JOIN PackageItem pki ON api.PackageId = pki.Id
    LEFT OUTER JOIN AttemptItem ati ON ati.LearnerAssignmentId = lai.Id
    WHERE iui.[Key] = @UserKey
)
GO
GRANT SELECT ON [LearnerAssignmentListForInstructors] TO LearningStore
GO

-- Create function for the security on the LearnerAssignmentListForInstructors view
CREATE FUNCTION [LearnerAssignmentListForInstructors$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [LearnerAssignmentListForInstructors$Security] TO LearningStore
GO

-- Create a function that implements the UserWebList view
CREATE FUNCTION [UserWebList](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT SPSiteGuid, SPWebGuid, LastAccessTime
    FROM UserWebListItem
    WHERE OwnerKey = @UserKey
)
GO
GRANT SELECT ON [UserWebList] TO LearningStore
GO

-- Create function for the security on the UserWebList view
CREATE FUNCTION [UserWebList$Security](@UserKey nvarchar(250))
RETURNS bit
AS
BEGIN
    RETURN (1)
END
GO
GRANT EXECUTE ON [UserWebList$Security] TO LearningStore
GO

-- Create a function that implements the ActivityPackageItemView view
CREATE FUNCTION [ActivityPackageItemView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT
    ----- from PackageItem -----
    pki.Id                          PackageId,
    pki.PackageFormat               PackageFormat,
    pki.Location                    PackageLocation,
    pki.Manifest                    PackageManifest,
    ----- from ActivityPackageItem -----
    api.Id                          Id,
    api.ActivityIdFromManifest      ActivityIdFromManifest,
    api.OriginalPlacement           OriginalPlacement,
    api.ParentActivityId            ParentActivityId,
    api.PrimaryObjectiveId          PrimaryObjectiveId,
    api.ResourceId                  ResourceId,
    api.PrimaryResourceFromManifest PrimaryResourceIdFromManifest,
    api.CompletionThreshold         CompletionThreshold,
    api.Credit                      Credit,
    api.IsVisibleInContents         IsVisibleInContents,
    api.LaunchData                  LaunchData,
    api.MaxAttempts                 MaxAttempts,
    api.MaxTimeAllowed              MaxTimeAllowed,
    api.ResourceParameters          ResourceParameters,
    api.ScaledPassingScore          ScaledPassingScore,
    api.TimeLimitAction             TimeLimitAction,
    api.Title                       Title,
    api.ObjectivesGlobalToSystem    ObjectivesGlobalToSystem
    -----
    FROM ActivityPackageItem api
    INNER JOIN PackageItem pki on api.PackageId = pki.Id
)
GO
GRANT SELECT ON [ActivityPackageItemView] TO LearningStore
GO

-- Create function for the security on the ExecuteSessionRight right
CREATE FUNCTION [ExecuteSessionRight](@UserKey nvarchar(250),@AttemptId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM AttemptItem ati
    LEFT OUTER JOIN LearnerAssignmentItem lai ON ati.LearnerAssignmentId = lai.Id
    LEFT OUTER JOIN AssignmentItem ai ON lai.AssignmentId = ai.Id
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = ai.Id
    INNER JOIN UserItem lui ON ati.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE ati.Id = @AttemptId AND
    (lui.[Key] = @UserKey OR iui.[Key]=@UserKey)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [ExecuteSessionRight] TO LearningStore
GO

-- Create function for the security on the ReviewSessionRight right
CREATE FUNCTION [ReviewSessionRight](@UserKey nvarchar(250),@AttemptId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    1
    )
END
GO
GRANT EXECUTE ON [ReviewSessionRight] TO LearningStore
GO

-- Create function for the security on the RandomAccessSessionRight right
CREATE FUNCTION [RandomAccessSessionRight](@UserKey nvarchar(250),@AttemptId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM AttemptItem ati
    LEFT OUTER JOIN LearnerAssignmentItem lai ON ati.LearnerAssignmentId = lai.Id
    LEFT OUTER JOIN AssignmentItem ai ON lai.AssignmentId = ai.Id
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = ai.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE ati.Id = @AttemptId AND
    (ati.AttemptStatus = 1 OR ati.AttemptStatus = 2) AND
    iui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [RandomAccessSessionRight] TO LearningStore
GO

-- Create function for the security on the StartAttemptOnLearnerAssignmentRight right
CREATE FUNCTION [StartAttemptOnLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    INNER JOIN AssignmentItem ai ON lai.AssignmentId = ai.Id
    LEFT OUTER JOIN AttemptItem ati ON lai.Id = ati.LearnerAssignmentId
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem lui ON lai.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    ati.Id IS NULL AND
    ai.RootActivityId IS NOT NULL AND
    (lui.[Key]=@UserKey OR iui.[Key]=@UserKey)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [StartAttemptOnLearnerAssignmentRight] TO LearningStore
GO

-- Create function for the security on the FinishLearnerAssignmentRight right
CREATE FUNCTION [FinishLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem lui ON lai.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    (lui.[Key]=@UserKey OR iui.[Key]=@UserKey)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [FinishLearnerAssignmentRight] TO LearningStore
GO

-- Create function for the security on the CompleteLearnerAssignmentRight right
CREATE FUNCTION [CompleteLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    LEFT OUTER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem lui ON lai.LearnerId = lui.Id
    LEFT OUTER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    (lui.[Key]=@UserKey OR iui.[Key]=@UserKey)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [CompleteLearnerAssignmentRight] TO LearningStore
GO

-- Create function for the security on the FinalizeLearnerAssignmentRight right
CREATE FUNCTION [FinalizeLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    INNER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    iui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [FinalizeLearnerAssignmentRight] TO LearningStore
GO

-- Create function for the security on the ActivateLearnerAssignmentRight right
CREATE FUNCTION [ActivateLearnerAssignmentRight](@UserKey nvarchar(250),@LearnerAssignmentId bigint=NULL)
RETURNS bit
AS
BEGIN
    RETURN (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    INNER JOIN InstructorAssignmentItem iai ON iai.AssignmentId = lai.AssignmentId
    INNER JOIN UserItem iui ON iai.InstructorId = iui.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    iui.[Key]=@UserKey
    ) THEN 1 ELSE 0 END
    ) | (
    CASE WHEN EXISTS
    (
    SELECT *
    FROM LearnerAssignmentItem lai
    INNER JOIN UserItem lui ON lai.LearnerId = lui.Id
    INNER JOIN AssignmentItem ai ON lai.AssignmentId = ai.Id
    WHERE lai.Id = @LearnerAssignmentId AND
    lui.[Key]=@UserKey AND
    ai.RootActivityId IS NULL AND
    (lai.NonELearningStatus IS NULL OR lai.NonELearningStatus = 0)
    ) THEN 1 ELSE 0 END
    )
END
GO
GRANT EXECUTE ON [ActivateLearnerAssignmentRight] TO LearningStore
GO

-- Create function that implements the default view for the ActivityAttemptItem item type
CREATE FUNCTION [ActivityAttemptItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [AttemptId], [ActivityPackageId], [CompletionStatus], [AttemptCount], [DataModelCache], [EvaluationPoints], [Exit], [LessonStatus], [Location], [MinScore], [MaxScore], [ProgressMeasure], [RandomPlacement], [RawScore], [ScaledScore], [SequencingDataCache], [SessionStartTimestamp], [SessionTime], [SuccessStatus], [SuspendData], [TotalTime]
    FROM [ActivityAttemptItem]
)
GO
GRANT SELECT ON [ActivityAttemptItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the ActivityObjectiveItem item type
CREATE FUNCTION [ActivityObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityPackageId], [IsPrimaryObjective], [Key], [MinNormalizedMeasure], [SatisfiedByMeasure]
    FROM [ActivityObjectiveItem]
)
GO
GRANT SELECT ON [ActivityObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the ActivityPackageItem item type
CREATE FUNCTION [ActivityPackageItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityIdFromManifest], [OriginalPlacement], [ParentActivityId], [PackageId], [PrimaryObjectiveId], [ResourceId], [PrimaryResourceFromManifest], [DataModelCache], [CompletionThreshold], [Credit], [HideContinue], [HidePrevious], [HideExit], [HideAbandon], [IsVisibleInContents], [LaunchData], [MasteryScore], [MaxAttempts], [MaxTimeAllowed], [ResourceParameters], [ScaledPassingScore], [TimeLimitAction], [Title], [ObjectivesGlobalToSystem]
    FROM [ActivityPackageItem]
)
GO
GRANT SELECT ON [ActivityPackageItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the PackageGlobalObjectiveItem item type
CREATE FUNCTION [PackageGlobalObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [LearnerId], [GlobalObjectiveId], [ScaledScore], [SuccessStatus]
    FROM [PackageGlobalObjectiveItem]
)
GO
GRANT SELECT ON [PackageGlobalObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the AttemptItem item type
CREATE FUNCTION [AttemptItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [LearnerId], [RootActivityId], [CompletionStatus], [CurrentActivityId], [SuspendedActivityId], [PackageId], [AttemptStatus], [FinishedTimestamp], [LogDetailSequencing], [LogFinalSequencing], [LogRollup], [StartedTimestamp], [SuccessStatus], [TotalPoints], [LearnerAssignmentId]
    FROM [AttemptItem]
)
GO
GRANT SELECT ON [AttemptItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the AttemptObjectiveItem item type
CREATE FUNCTION [AttemptObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityAttemptId], [ActivityObjectiveId], [CompletionStatus], [Description], [IsPrimaryObjective], [Key], [LessonStatus], [RawScore], [MinScore], [MaxScore], [ProgressMeasure], [ScaledScore], [SuccessStatus]
    FROM [AttemptObjectiveItem]
)
GO
GRANT SELECT ON [AttemptObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the CommentFromLearnerItem item type
CREATE FUNCTION [CommentFromLearnerItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityAttemptId], [Comment], [Location], [Ordinal], [Timestamp]
    FROM [CommentFromLearnerItem]
)
GO
GRANT SELECT ON [CommentFromLearnerItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the CommentFromLmsItem item type
CREATE FUNCTION [CommentFromLmsItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityPackageId], [Comment], [Location], [Timestamp]
    FROM [CommentFromLmsItem]
)
GO
GRANT SELECT ON [CommentFromLmsItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the CorrectResponseItem item type
CREATE FUNCTION [CorrectResponseItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [InteractionId], [ResponsePattern]
    FROM [CorrectResponseItem]
)
GO
GRANT SELECT ON [CorrectResponseItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the EvaluationCommentItem item type
CREATE FUNCTION [EvaluationCommentItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [InteractionId], [Comment], [Location], [Ordinal], [Timestamp]
    FROM [EvaluationCommentItem]
)
GO
GRANT SELECT ON [EvaluationCommentItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the ExtensionDataItem item type
CREATE FUNCTION [ExtensionDataItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityAttemptId], [InteractionId], [AttemptObjectiveId], [Name], [AttachmentGuid], [AttachmentValue], [BoolValue], [DateTimeValue], [DoubleValue], [IntValue], [StringValue]
    FROM [ExtensionDataItem]
)
GO
GRANT SELECT ON [ExtensionDataItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the GlobalObjectiveItem item type
CREATE FUNCTION [GlobalObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [OrganizationId], [Key], [Description]
    FROM [GlobalObjectiveItem]
)
GO
GRANT SELECT ON [GlobalObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the InteractionItem item type
CREATE FUNCTION [InteractionItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityAttemptId], [InteractionIdFromCmi], [InteractionType], [Timestamp], [Weighting], [ResultState], [ResultNumeric], [Latency], [Description], [LearnerResponseBool], [LearnerResponseString], [LearnerResponseNumeric], [ScaledScore], [RawScore], [MinScore], [MaxScore], [EvaluationPoints]
    FROM [InteractionItem]
)
GO
GRANT SELECT ON [InteractionItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the InteractionObjectiveItem item type
CREATE FUNCTION [InteractionObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [InteractionId], [AttemptObjectiveId]
    FROM [InteractionObjectiveItem]
)
GO
GRANT SELECT ON [InteractionObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the LearnerGlobalObjectiveItem item type
CREATE FUNCTION [LearnerGlobalObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [LearnerId], [GlobalObjectiveId], [ScaledScore], [SuccessStatus]
    FROM [LearnerGlobalObjectiveItem]
)
GO
GRANT SELECT ON [LearnerGlobalObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the MapActivityObjectiveToGlobalObjectiveItem item type
CREATE FUNCTION [MapActivityObjectiveToGlobalObjectiveItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [ActivityObjectiveId], [GlobalObjectiveId], [ReadSatisfiedStatus], [ReadNormalizedMeasure], [WriteSatisfiedStatus], [WriteNormalizedMeasure]
    FROM [MapActivityObjectiveToGlobalObjectiveItem]
)
GO
GRANT SELECT ON [MapActivityObjectiveToGlobalObjectiveItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the PackageItem item type
CREATE FUNCTION [PackageItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [PackageFormat], [Location], [Manifest], [Warnings]
    FROM [PackageItem]
)
GO
GRANT SELECT ON [PackageItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the RubricItem item type
CREATE FUNCTION [RubricItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [InteractionId], [Ordinal], [IsSatisfied], [Points]
    FROM [RubricItem]
)
GO
GRANT SELECT ON [RubricItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the ResourceItem item type
CREATE FUNCTION [ResourceItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [PackageId], [ResourceXml]
    FROM [ResourceItem]
)
GO
GRANT SELECT ON [ResourceItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the SequencingLogEntryItem item type
CREATE FUNCTION [SequencingLogEntryItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [AttemptId], [ActivityAttemptId], [EventType], [Message], [NavigationCommand], [Timestamp]
    FROM [SequencingLogEntryItem]
)
GO
GRANT SELECT ON [SequencingLogEntryItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the UserItem item type
CREATE FUNCTION [UserItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [Key], [Name], [AudioCaptioning], [AudioLevel], [DeliverySpeed], [Language]
    FROM [UserItem]
)
GO
GRANT SELECT ON [UserItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the SiteSettingsItem item type
CREATE FUNCTION [SiteSettingsItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [SiteGuid], [SettingsXml], [SettingsXmlLastModified]
    FROM [SiteSettingsItem]
)
GO
GRANT SELECT ON [SiteSettingsItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the AssignmentItem item type
CREATE FUNCTION [AssignmentItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [SPSiteGuid], [SPWebGuid], [RootActivityId], [NonELearningLocation], [Title], [StartDate], [DueDate], [PointsPossible], [Description], [AutoReturn], [ShowAnswersToLearners], [CreatedBy], [DateCreated]
    FROM [AssignmentItem]
)
GO
GRANT SELECT ON [AssignmentItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the InstructorAssignmentItem item type
CREATE FUNCTION [InstructorAssignmentItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [AssignmentId], [InstructorId]
    FROM [InstructorAssignmentItem]
)
GO
GRANT SELECT ON [InstructorAssignmentItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the LearnerAssignmentItem item type
CREATE FUNCTION [LearnerAssignmentItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [AssignmentId], [LearnerId], [IsFinal], [NonELearningStatus], [FinalPoints], [InstructorComments]
    FROM [LearnerAssignmentItem]
)
GO
GRANT SELECT ON [LearnerAssignmentItem$DefaultView] TO LearningStore
GO

-- Create function that implements the default view for the UserWebListItem item type
CREATE FUNCTION [UserWebListItem$DefaultView](@UserKey nvarchar(250))
RETURNS TABLE
AS
RETURN (
    SELECT Id, [OwnerKey], [SPSiteGuid], [SPWebGuid], [LastAccessTime]
    FROM [UserWebListItem]
)
GO
GRANT SELECT ON [UserWebListItem$DefaultView] TO LearningStore
GO

COMMIT TRANSACTION
GO

</Translation>
      </Resources>
      <Resources>
        <ID>SlkSettingsSchema</ID>
        <Source>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xs:schema targetNamespace="urn:schemas-microsoft-com:sharepoint-learning-kit:settings" elementFormDefault="qualified" xmlns="urn:schemas-microsoft-com:sharepoint-learning-kit:settings" xmlns:mstns="urn:schemas-microsoft-com:sharepoint-learning-kit:settings" xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
	&lt;xs:simpleType name="ConditionOperator"&gt;
		&lt;xs:restriction base="xs:token"&gt;
			&lt;xs:enumeration value="Equal" /&gt;
			&lt;xs:enumeration value="GreaterThan" /&gt;
			&lt;xs:enumeration value="GreaterThanEqual" /&gt;
			&lt;xs:enumeration value="LessThan" /&gt;
			&lt;xs:enumeration value="LessThanEqual" /&gt;
			&lt;xs:enumeration value="NotEqual" /&gt;
			&lt;xs:enumeration value="IsNull" /&gt;
			&lt;xs:enumeration value="IsNotNull" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:group name="SettingsGroup"&gt;
		&lt;xs:sequence&gt;
			&lt;xs:element name="MimeTypeMapping" minOccurs="0" maxOccurs="unbounded"&gt;
				&lt;xs:complexType&gt;
					&lt;xs:sequence /&gt;
					&lt;xs:attribute name="Extension" type="xs:string" use="required" /&gt;
					&lt;xs:attribute name="MimeType" type="xs:string" use="required" /&gt;
				&lt;/xs:complexType&gt;
			&lt;/xs:element&gt;
			&lt;xs:element name="Query" maxOccurs="unbounded" minOccurs="0"&gt;
				&lt;xs:complexType&gt;
					&lt;xs:sequence&gt;
						&lt;xs:choice maxOccurs="unbounded" minOccurs="0"&gt;
							&lt;xs:element name="Column" maxOccurs="unbounded" minOccurs="1"&gt;
								&lt;xs:complexType&gt;
									&lt;xs:sequence&gt;
									&lt;/xs:sequence&gt;
									&lt;xs:attribute name="Title" type="xs:string" use="optional" /&gt;
									&lt;xs:attribute name="RenderAs" type="RenderAsType" default="Default" /&gt;
									&lt;xs:attribute name="ViewColumnName" type="SchemaIdType" use="required" /&gt;
									&lt;xs:attribute name="ViewColumnName2" type="SchemaIdType" use="optional" /&gt;
									&lt;xs:attribute name="ViewColumnName3" type="SchemaIdType" use="optional" /&gt;
									&lt;xs:attribute name="CellFormat" type="xs:string" /&gt;
									&lt;xs:attribute name="AllowUserSort" type="xs:boolean" default="true" /&gt;
									&lt;xs:attribute name="NullDisplayString" type="xs:string" /&gt;
									&lt;xs:attribute name="ToolTipFormat" type="xs:string" /&gt;
									&lt;xs:attribute name="Wrap" type="xs:boolean" default="true" use="optional" /&gt;
								&lt;/xs:complexType&gt;
							&lt;/xs:element&gt;
							&lt;xs:element name="Sort" maxOccurs="unbounded" minOccurs="0"&gt;
								&lt;xs:complexType&gt;
									&lt;xs:sequence /&gt;
									&lt;xs:attribute name="ViewColumnName" type="SchemaIdType" use="required" /&gt;
									&lt;xs:attribute name="Ascending" type="xs:boolean" default="true" use="optional" /&gt;
								&lt;/xs:complexType&gt;
							&lt;/xs:element&gt;
							&lt;xs:element name="Condition" maxOccurs="unbounded" minOccurs="0"&gt;
								&lt;xs:complexType&gt;
									&lt;xs:sequence /&gt;
									&lt;xs:attribute name="ViewColumnName" type="SchemaIdType" use="required" /&gt;
									&lt;xs:attribute name="Operator" type="ConditionOperator" use="required" /&gt;
									&lt;xs:attribute name="Value" type="xs:string" use="optional" /&gt;
									&lt;xs:attribute name="MacroName" type="MacroNameType" use="optional" /&gt;
									&lt;xs:attribute name="NoConditionOnNull" type="xs:boolean" use="optional" default="false" /&gt;
								&lt;/xs:complexType&gt;
							&lt;/xs:element&gt;
						&lt;/xs:choice&gt;
					&lt;/xs:sequence&gt;
					&lt;xs:attribute name="Name" type="NameType" use="required" /&gt;
					&lt;xs:attribute name="Title" type="xs:string" use="optional" /&gt;
					&lt;xs:attribute name="ViewName" type="SchemaIdType" use="required" /&gt;
					&lt;xs:attribute name="CountViewColumnName" type="SchemaIdType" /&gt;
				&lt;/xs:complexType&gt;
			&lt;/xs:element&gt;
			&lt;xs:element name="QuerySet" maxOccurs="unbounded" minOccurs="0"&gt;
				&lt;xs:complexType&gt;
					&lt;xs:sequence&gt;
						&lt;xs:element name="IncludeQuery" minOccurs="1" maxOccurs="unbounded"&gt;
							&lt;xs:complexType&gt;
								&lt;xs:sequence /&gt;
								&lt;xs:attribute name="QueryName" type="NameType" use="required" /&gt;
							&lt;/xs:complexType&gt;
						&lt;/xs:element&gt;
					&lt;/xs:sequence&gt;
					&lt;xs:attribute name="Name" type="NameType" use="required" /&gt;
					&lt;xs:attribute name="DefaultQueryName" type="NameType" use="optional" /&gt;
					&lt;xs:attribute name="Title" type="xs:string" /&gt;
				&lt;/xs:complexType&gt;
			&lt;/xs:element&gt;
		&lt;/xs:sequence&gt;
	&lt;/xs:group&gt;
	&lt;xs:simpleType name="NameType"&gt;
		&lt;xs:restriction base="xs:string"&gt;
			&lt;xs:pattern value="[a-zA-Z]+[a-zA-Z0-9]*" /&gt;
			&lt;xs:maxLength value="63" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:simpleType name="SchemaIdType"&gt;
		&lt;xs:restriction base="xs:string"&gt;
			&lt;xs:pattern value="[a-zA-Z]+[a-zA-Z0-9]*" /&gt;
			&lt;xs:maxLength value="63" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:element name="Settings"&gt;
		&lt;xs:complexType&gt;
			&lt;xs:sequence&gt;
				&lt;xs:group ref="SettingsGroup" maxOccurs="1" minOccurs="1" /&gt;
			&lt;/xs:sequence&gt;
			&lt;xs:attribute name="ApprovedAttachmentTypes" type="xs:string" use="required" /&gt;
			&lt;xs:attribute name="ELearningIisCompatibilityModeExtensions" type="xs:string" use="optional" /&gt;
			&lt;xs:attribute name="LoggingOptions" type="LoggingOptions" use="required" /&gt;
			&lt;xs:attribute name="MaxAttachmentKilobytes" type="xs:int" use="required" /&gt;
			&lt;xs:attribute name="NonELearningIisCompatibilityModeExtensions" type="xs:string" use="optional" /&gt;
			&lt;xs:attribute name="PackageCacheExpirationMinutes" type="xs:int" use="optional" /&gt;
			&lt;xs:attribute name="PackageCacheLocation" type="xs:string" use="required" /&gt;
			&lt;xs:attribute name="UserWebListMruSize" type="xs:int" use="required" /&gt;
		&lt;/xs:complexType&gt;
	&lt;/xs:element&gt;
	&lt;xs:simpleType name="RenderAsType"&gt;
		&lt;xs:restriction base="xs:token"&gt;
			&lt;xs:enumeration value="Default" /&gt;
			&lt;xs:enumeration value="UtcAsLocalDateTime" /&gt;
			&lt;xs:enumeration value="SPWebName" /&gt;
			&lt;xs:enumeration value="Link" /&gt;
			&lt;xs:enumeration value="LearnerAssignmentStatus" /&gt;
			&lt;xs:enumeration value="Due" /&gt;
			&lt;xs:enumeration value="ScoreAndPossible" /&gt;
			&lt;xs:enumeration value="Submitted" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:simpleType name="MacroNameType"&gt;
		&lt;xs:restriction base="xs:string"&gt;
			&lt;xs:enumeration value="SPWebScope" /&gt;
			&lt;xs:enumeration value="CurrentUserKey" /&gt;
			&lt;xs:enumeration value="Now" /&gt;
			&lt;xs:enumeration value="StartOfToday" /&gt;
			&lt;xs:enumeration value="StartOfTomorrow" /&gt;
			&lt;xs:enumeration value="StartOfThisWeek" /&gt;
			&lt;xs:enumeration value="StartOfNextWeek" /&gt;
			&lt;xs:enumeration value="StartOfWeekAfterNext" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:simpleType name="LoggingOptions"&gt;
		&lt;xs:restriction base="xs:token"&gt;
			&lt;xs:enumeration value="None" /&gt;
			&lt;xs:enumeration value="LogDetailSequencing" /&gt;
			&lt;xs:enumeration value="LogFinalSequencing" /&gt;
			&lt;xs:enumeration value="LogRollup" /&gt;
			&lt;xs:enumeration value="LogAllSequencing" /&gt;
			&lt;xs:enumeration value="LogAll" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
&lt;/xs:schema&gt;</Source>
        <Translation>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xs:schema targetNamespace="urn:schemas-microsoft-com:sharepoint-learning-kit:settings" elementFormDefault="qualified" xmlns="urn:schemas-microsoft-com:sharepoint-learning-kit:settings" xmlns:mstns="urn:schemas-microsoft-com:sharepoint-learning-kit:settings" xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
	&lt;xs:simpleType name="ConditionOperator"&gt;
		&lt;xs:restriction base="xs:token"&gt;
			&lt;xs:enumeration value="Equal" /&gt;
			&lt;xs:enumeration value="GreaterThan" /&gt;
			&lt;xs:enumeration value="GreaterThanEqual" /&gt;
			&lt;xs:enumeration value="LessThan" /&gt;
			&lt;xs:enumeration value="LessThanEqual" /&gt;
			&lt;xs:enumeration value="NotEqual" /&gt;
			&lt;xs:enumeration value="IsNull" /&gt;
			&lt;xs:enumeration value="IsNotNull" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:group name="SettingsGroup"&gt;
		&lt;xs:sequence&gt;
			&lt;xs:element name="MimeTypeMapping" minOccurs="0" maxOccurs="unbounded"&gt;
				&lt;xs:complexType&gt;
					&lt;xs:sequence /&gt;
					&lt;xs:attribute name="Extension" type="xs:string" use="required" /&gt;
					&lt;xs:attribute name="MimeType" type="xs:string" use="required" /&gt;
				&lt;/xs:complexType&gt;
			&lt;/xs:element&gt;
			&lt;xs:element name="Query" maxOccurs="unbounded" minOccurs="0"&gt;
				&lt;xs:complexType&gt;
					&lt;xs:sequence&gt;
						&lt;xs:choice maxOccurs="unbounded" minOccurs="0"&gt;
							&lt;xs:element name="Column" maxOccurs="unbounded" minOccurs="1"&gt;
								&lt;xs:complexType&gt;
									&lt;xs:sequence&gt;
									&lt;/xs:sequence&gt;
									&lt;xs:attribute name="Title" type="xs:string" use="optional" /&gt;
									&lt;xs:attribute name="RenderAs" type="RenderAsType" default="Default" /&gt;
									&lt;xs:attribute name="ViewColumnName" type="SchemaIdType" use="required" /&gt;
									&lt;xs:attribute name="ViewColumnName2" type="SchemaIdType" use="optional" /&gt;
									&lt;xs:attribute name="ViewColumnName3" type="SchemaIdType" use="optional" /&gt;
									&lt;xs:attribute name="CellFormat" type="xs:string" /&gt;
									&lt;xs:attribute name="AllowUserSort" type="xs:boolean" default="true" /&gt;
									&lt;xs:attribute name="NullDisplayString" type="xs:string" /&gt;
									&lt;xs:attribute name="ToolTipFormat" type="xs:string" /&gt;
									&lt;xs:attribute name="Wrap" type="xs:boolean" default="true" use="optional" /&gt;
								&lt;/xs:complexType&gt;
							&lt;/xs:element&gt;
							&lt;xs:element name="Sort" maxOccurs="unbounded" minOccurs="0"&gt;
								&lt;xs:complexType&gt;
									&lt;xs:sequence /&gt;
									&lt;xs:attribute name="ViewColumnName" type="SchemaIdType" use="required" /&gt;
									&lt;xs:attribute name="Ascending" type="xs:boolean" default="true" use="optional" /&gt;
								&lt;/xs:complexType&gt;
							&lt;/xs:element&gt;
							&lt;xs:element name="Condition" maxOccurs="unbounded" minOccurs="0"&gt;
								&lt;xs:complexType&gt;
									&lt;xs:sequence /&gt;
									&lt;xs:attribute name="ViewColumnName" type="SchemaIdType" use="required" /&gt;
									&lt;xs:attribute name="Operator" type="ConditionOperator" use="required" /&gt;
									&lt;xs:attribute name="Value" type="xs:string" use="optional" /&gt;
									&lt;xs:attribute name="MacroName" type="MacroNameType" use="optional" /&gt;
									&lt;xs:attribute name="NoConditionOnNull" type="xs:boolean" use="optional" default="false" /&gt;
								&lt;/xs:complexType&gt;
							&lt;/xs:element&gt;
						&lt;/xs:choice&gt;
					&lt;/xs:sequence&gt;
					&lt;xs:attribute name="Name" type="NameType" use="required" /&gt;
					&lt;xs:attribute name="Title" type="xs:string" use="optional" /&gt;
					&lt;xs:attribute name="ViewName" type="SchemaIdType" use="required" /&gt;
					&lt;xs:attribute name="CountViewColumnName" type="SchemaIdType" /&gt;
				&lt;/xs:complexType&gt;
			&lt;/xs:element&gt;
			&lt;xs:element name="QuerySet" maxOccurs="unbounded" minOccurs="0"&gt;
				&lt;xs:complexType&gt;
					&lt;xs:sequence&gt;
						&lt;xs:element name="IncludeQuery" minOccurs="1" maxOccurs="unbounded"&gt;
							&lt;xs:complexType&gt;
								&lt;xs:sequence /&gt;
								&lt;xs:attribute name="QueryName" type="NameType" use="required" /&gt;
							&lt;/xs:complexType&gt;
						&lt;/xs:element&gt;
					&lt;/xs:sequence&gt;
					&lt;xs:attribute name="Name" type="NameType" use="required" /&gt;
					&lt;xs:attribute name="DefaultQueryName" type="NameType" use="optional" /&gt;
					&lt;xs:attribute name="Title" type="xs:string" /&gt;
				&lt;/xs:complexType&gt;
			&lt;/xs:element&gt;
		&lt;/xs:sequence&gt;
	&lt;/xs:group&gt;
	&lt;xs:simpleType name="NameType"&gt;
		&lt;xs:restriction base="xs:string"&gt;
			&lt;xs:pattern value="[a-zA-Z]+[a-zA-Z0-9]*" /&gt;
			&lt;xs:maxLength value="63" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:simpleType name="SchemaIdType"&gt;
		&lt;xs:restriction base="xs:string"&gt;
			&lt;xs:pattern value="[a-zA-Z]+[a-zA-Z0-9]*" /&gt;
			&lt;xs:maxLength value="63" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:element name="Settings"&gt;
		&lt;xs:complexType&gt;
			&lt;xs:sequence&gt;
				&lt;xs:group ref="SettingsGroup" maxOccurs="1" minOccurs="1" /&gt;
			&lt;/xs:sequence&gt;
			&lt;xs:attribute name="ApprovedAttachmentTypes" type="xs:string" use="required" /&gt;
			&lt;xs:attribute name="ELearningIisCompatibilityModeExtensions" type="xs:string" use="optional" /&gt;
			&lt;xs:attribute name="LoggingOptions" type="LoggingOptions" use="required" /&gt;
			&lt;xs:attribute name="MaxAttachmentKilobytes" type="xs:int" use="required" /&gt;
			&lt;xs:attribute name="NonELearningIisCompatibilityModeExtensions" type="xs:string" use="optional" /&gt;
			&lt;xs:attribute name="PackageCacheExpirationMinutes" type="xs:int" use="optional" /&gt;
			&lt;xs:attribute name="PackageCacheLocation" type="xs:string" use="required" /&gt;
			&lt;xs:attribute name="UserWebListMruSize" type="xs:int" use="required" /&gt;
		&lt;/xs:complexType&gt;
	&lt;/xs:element&gt;
	&lt;xs:simpleType name="RenderAsType"&gt;
		&lt;xs:restriction base="xs:token"&gt;
			&lt;xs:enumeration value="Default" /&gt;
			&lt;xs:enumeration value="UtcAsLocalDateTime" /&gt;
			&lt;xs:enumeration value="SPWebName" /&gt;
			&lt;xs:enumeration value="Link" /&gt;
			&lt;xs:enumeration value="LearnerAssignmentStatus" /&gt;
			&lt;xs:enumeration value="Due" /&gt;
			&lt;xs:enumeration value="ScoreAndPossible" /&gt;
			&lt;xs:enumeration value="Submitted" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:simpleType name="MacroNameType"&gt;
		&lt;xs:restriction base="xs:string"&gt;
			&lt;xs:enumeration value="SPWebScope" /&gt;
			&lt;xs:enumeration value="CurrentUserKey" /&gt;
			&lt;xs:enumeration value="Now" /&gt;
			&lt;xs:enumeration value="StartOfToday" /&gt;
			&lt;xs:enumeration value="StartOfTomorrow" /&gt;
			&lt;xs:enumeration value="StartOfThisWeek" /&gt;
			&lt;xs:enumeration value="StartOfNextWeek" /&gt;
			&lt;xs:enumeration value="StartOfWeekAfterNext" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
	&lt;xs:simpleType name="LoggingOptions"&gt;
		&lt;xs:restriction base="xs:token"&gt;
			&lt;xs:enumeration value="None" /&gt;
			&lt;xs:enumeration value="LogDetailSequencing" /&gt;
			&lt;xs:enumeration value="LogFinalSequencing" /&gt;
			&lt;xs:enumeration value="LogRollup" /&gt;
			&lt;xs:enumeration value="LogAllSequencing" /&gt;
			&lt;xs:enumeration value="LogAll" /&gt;
		&lt;/xs:restriction&gt;
	&lt;/xs:simpleType&gt;
&lt;/xs:schema&gt;</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelAPPWhatNextText</ID>
        <Source>What would you like to do next?</Source>
        <Translation>Какво ще правите сега?</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesColumnReturnedUnexpectedType</ID>
        <Source>{0} column returned type {1}, expecting type {2}</Source>
        <Translation>{0} колоната върна тип {1}, при очакван тип {2}</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesSubmitted</ID>
        <Source>{0}/{1}</Source>
        <Translation>{0}/{1}</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesDuplicateQueryName</ID>
        <Source>Duplicate query name: {0}</Source>
        <Translation>Повтаряне на име на въпрос: {0}</Translation>
      </Resources>
      <Resources>
        <ID>ErrorBannerValidationWarning</ID>
        <Source>There are one or more problems on this page. Additional information is displayed in each section with a problem.</Source>
        <Translation>Има проблеми със страницата. Повече информация има във всеки раздел с проблем.</Translation>
      </Resources>
      <Resources>
        <ID>SlkGenericError</ID>
        <Source>An error occurred. More information may be available in the server event log.</Source>
        <Translation>Възникна грешка. Повече информация можете да намерите в записките за събитията на сървъра.</Translation>
      </Resources>
      <Resources>
        <ID>InvalidDatabaseName</ID>
        <Source>Invalid database name "{0}".  Database names may only contain letters, digits, and underscores.</Source>
        <Translation>Невалидно име на базата данни "{0}". Имената на базите данни могат да съдържат само букви, цифри и долна черта.</Translation>
      </Resources>
      <Resources>
        <ID>DefaultSlkDatabaseName</ID>
        <Source>SharePointLearningKit</Source>
        <Translation>SharePointLearningKit</Translation>
      </Resources>
      <Resources>
        <ID>AppTitleBlankError</ID>
        <Source>The assignment must have a title.</Source>
        <Translation>Заданието трябва да има заглавие.</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelGenericErrorMsg</ID>
        <Source>Error string goes here.</Source>
        <Translation>Съобщението за грешка е тук.</Translation>
      </Resources>
      <Resources>
        <ID>SlkExQueryStringFormatError</ID>
        <Source>The value ({0}) is not valid for the {1} parameter.</Source>
        <Translation>Стойността ({0}) не е валидна за параметъра {1}.</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureTxtInstructorPermissionToolTip</ID>
        <Source>Instructor Permission</Source>
        <Translation>Права на инструктор</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureTxtLearnerPermissionToolTip</ID>
        <Source>Learner Permission</Source>
        <Translation>Права на обучаем</Translation>
      </Resources>
      <Resources>
        <ID>LobbyPageDescription</ID>
        <Source>Use this page to complete and submit your assignment.</Source>
        <Translation>Използвайте тази страница,за да завършите и публикувате заданието.</Translation>
      </Resources>
      <Resources>
        <ID>GradinglblGradeAssignmentDescription</ID>
        <Source>Enter grades and comments for individual learners. When you're done, click Save or OK. To exit without
saving, click Cancel.</Source>
        <Translation>Въведете оценки и коментари за всеки обучаем. След като сте готови, натиснете Запиши или OK. За да излезете без да запишете дествията, натиснете Отказ.</Translation>
      </Resources>
      <Resources>
        <ID>ActionslblSelfAssignHeader</ID>
        <Source>Use it myself</Source>
        <Translation>Използвай това от мен</Translation>
      </Resources>
      <Resources>
        <ID>AlwpListScopeDescription</ID>
        <Source>Display only assignments for this site instead of all assignments in the database.</Source>
        <Translation>Показвайте само на заданията за този сайт, вместо всички задания в базата данни.</Translation>
      </Resources>
      <Resources>
        <ID>LobbyMarkasCompleteMessage</ID>
        <Source>Once you mark an assignment as complete, you will no longer be able to work on it.</Source>
        <Translation>След като сте маркирали заданието като изпълнено, повече няма да имате възможност да работите по него.</Translation>
      </Resources>
      <Resources>
        <ID>AlwpSummaryWidthDescription</ID>
        <Source>Width of the query control.</Source>
        <Translation>Ширина на управлението с въпрос.</Translation>
      </Resources>
      <Resources>
        <ID>GradingReturnAccessKey</ID>
        <Source>R</Source>
        <Translation>R</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureInputDatabaseTitle</ID>
        <Source>SLK Database</Source>
        <Translation>SLK база данни</Translation>
      </Resources>
      <Resources>
        <ID>GradingActionFinalToolTip</ID>
        <Source>Allows the learner to re-do the assignment.</Source>
        <Translation>Позволява на обучаемия да изпълни наново заданието.</Translation>
      </Resources>
      <Resources>
        <ID>SlkExInstructorPermissonNotFound</ID>
        <Source>You cannot perform this operation because you are not an instructor on this site ({0}).</Source>
        <Translation>Не можете да изпълните тази операция, защото не сте инструктор за този сайт ({0}).</Translation>
      </Resources>
      <Resources>
        <ID>DomainGroupNameHasNoBackslash</ID>
        <Source>Domain group "{0}" has no backslash (\)</Source>
        <Translation>Домейн групата "{0}" няма наклонена черта (\)</Translation>
      </Resources>
      <Resources>
        <ID>ActionsMRUToolTip</ID>
        <Source>Assign the learning resource to learners on site: {0}</Source>
        <Translation>Задаване на учебен ресурс на обучаемите на сайт: {0}</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureLinkConfigureAnother</ID>
        <Source>Configure another Site Collection</Source>
        <Translation>Конфигуриране на друга колекция от сайтове</Translation>
      </Resources>
      <Resources>
        <ID>GradingDeleteMessage</ID>
        <Source>Deleting an assignment will delete all the associated learner data, including learner work and grades for the assignment. You cannot recover deleted information.</Source>
        <Translation>Изтриването на задание ще изтирие и цялата свързана с него информация за обучаемите, включително работата и оценките на обучаемия за това здание. Не можете да възстановите изтритата информация.</Translation>
      </Resources>
      <Resources>
        <ID>AppAllLearnersGroup</ID>
        <Source>All Learners</Source>
        <Translation>Всички обучаеми</Translation>
      </Resources>
      <Resources>
        <ID>GradingNotInstructor</ID>
        <Source>You cannot grade the assignment because you are not an instructor for it.</Source>
        <Translation>Не можете да оцените това задание, защото не сте инструктор.</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesOneValueNonNull</ID>
        <Source>at most one of value and macroName arguments can be non-null</Source>
        <Translation>поне един от value и macroName трябва да не е нулев</Translation>
      </Resources>
      <Resources>
        <ID>LobbyPageTitle</ID>
        <Source>Complete Assignment</Source>
        <Translation>Изпълнено задание</Translation>
      </Resources>
      <Resources>
        <ID>CommaSpace</ID>
        <Source>, </Source>
        <Translation>, </Translation>
      </Resources>
      <Resources>
        <ID>ConfigureInputSlkSettingsTitle</ID>
        <Source>SLK Settings</Source>
        <Translation>SLK настройки</Translation>
      </Resources>
      <Resources>
        <ID>GradinglblDue</ID>
        <Source>Due</Source>
        <Translation>Срок</Translation>
      </Resources>
      <Resources>
        <ID>GradinglblAnswers</ID>
        <Source>Correct answers are shown to the learner when the assignment is returned (Class Server content only).</Source>
        <Translation>Верните отговори се показват на обучаемия при връщане на заданието (само за Class Server съдържание).</Translation>
      </Resources>
      <Resources>
        <ID>AppNavigateToDocLib</ID>
        <Source>Go back to {0}</Source>
        <Translation>Връщане към {0}</Translation>
      </Resources>
      <Resources>
        <ID>GradingSave</ID>
        <Source>Save</Source>
        <Translation>Запиши</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesViewColumnNameNonDateTime</ID>
        <Source>RenderAs="UtcAsLocalDateTime" but ViewColumnName specifies a non-date/time column</Source>
        <Translation>RenderAs="UtcAsLocalDateTime", но ViewColumnName не указва дата/час колона</Translation>
      </Resources>
      <Resources>
        <ID>GradingConfirmOverrideFinalPoints</ID>
        <Source>You previously cleared the final score for this learner. Click OK to overwrite the blank score with the new score of {0}. Click Cancel to leave the final score blank.</Source>
        <Translation>Вече сте изчистили крайната оценка на обучаемия. Натиснете ОК,за да заместите празната оценка с новата от {0}. Натиснете Отказ,за да оставите крайната оценка празна.</Translation>
      </Resources>
      <Resources>
        <ID>LearnerAssignmentNotFoundInDatabase</ID>
        <Source>The assignment (ID {0}) does not exist or you may not have permission to access it.</Source>
        <Translation>Заданието (ID {0}) не съществува или нямате достъп до него.</Translation>
      </Resources>
      <Resources>
        <ID>AppPageEditDescription</ID>
        <Source>This page helps you edit an assignment’s properties or change instructors or learners for the assignment.</Source>
        <Translation>Тази страница ви помага за редактирането на свойствата на заданието или да промените неговите инструктори или обучаеми.</Translation>
      </Resources>
      <Resources>
        <ID>AppPointsPossibleNaNError</ID>
        <Source>Points must be a number.

 
</Source>
        <Translation>Точките трябва да са число.

 
</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesValueNullifIsNotNull</ID>
        <Source>value and macroName arguments must be null if oper is "IsNotNull"</Source>
        <Translation>value и macroName агрументите трябва да са нула, ако oper е "IsNotNull"</Translation>
      </Resources>
      <Resources>
        <ID>ActionsVersioningOff</ID>
        <Source>The document library ({0}) does not have versioning turned on or the number of versions is limited. Editing this learning resource after you assign it could cause unpredictable results.</Source>
        <Translation>За библиотеката с документи ({0}) не е включен контрола на версиите или броят им е ограничен. Редактирането на този учебен ресурс след задаването му може да доведе до непредсказуеми резултати.</Translation>
      </Resources>
      <Resources>
        <ID>GradingClose</ID>
        <Source>Close</Source>
        <Translation>Затвори</Translation>
      </Resources>
      <Resources>
        <ID>GradinglblGradeAssignment</ID>
        <Source>Grade the Assignment</Source>
        <Translation>Оценяване на заданието</Translation>
      </Resources>
      <Resources>
        <ID>LobbyPointsNoValue</ID>
        <Source>--</Source>
        <Translation>--</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureLabelDatabaseDescriptionText</ID>
        <Source>&lt;p style="margin-bottom: 6pt"&gt;Specify the SLK database that will contain e-learning assignments for the selected site collection.&lt;/p&gt;&lt;p style="margin-top: 0pt; margin-bottom: 0pt;"&gt;&lt;ul style="margin-top: 0pt; margin-bottom: 0pt;"&gt;&lt;li style="margin-bottom: 6pt"&gt;Multiple site collections can share the same SLK database.  To use an existing SLK database, enter the server and database name.&lt;/li&gt;&lt;li&gt;To create a new database, enter an existing database server and a new database name, and select &lt;b&gt;Create a new database&lt;/b&gt;.&lt;/p&gt;&lt;/ul&gt;&lt;/p&gt;</Source>
        <Translation>&lt;p style="margin-bottom: 6pt"&gt;Посочете SLK база данни, която ще съхранява заданията за избраната колекция от сайтове.&lt;/p&gt;&lt;p style="margin-top: 0pt; margin-bottom: 0pt;"&gt;&lt;ul style="margin-top: 0pt; margin-bottom: 0pt;"&gt;&lt;li style="margin-bottom: 6pt"&gt;Няколко колекции от сайтове могат да споделят обща SLK база данни. За да използвате вече съществуваща SLK база данни, въведете сървъра и името на базата данни.&lt;/li&gt;&lt;li&gt;За да създадете нова база данни, въведете вече съществуващ сървър и ново име на базата данни и изберете &lt;b&gt;Създай нова база данни&lt;/b&gt;.&lt;/p&gt;&lt;/ul&gt;&lt;/p&gt;</Translation>
      </Resources>
      <Resources>
        <ID>AppSharePointSiteToolTip</ID>
        <Source>Open site in a new window</Source>
        <Translation>Отваряне на сайта в нов прозорец</Translation>
      </Resources>
      <Resources>
        <ID>ActionsPageTitleinTitlePage</ID>
        <Source>E-Learning Actions:</Source>
        <Translation>E-Learning действия:</Translation>
      </Resources>
      <Resources>
        <ID>DownloadSettingsIncorrectUrl</ID>
        <Source>The URL is incorrect.</Source>
        <Translation>Адресът не е правилен.</Translation>
      </Resources>
      <Resources>
        <ID>SlkErrorTypeWarningToolTip</ID>
        <Source>Warning</Source>
        <Translation>Предупреждение</Translation>
      </Resources>
      <Resources>
        <ID>DefaultSlkInstructorPermissionName</ID>
        <Source>SLK Instructor</Source>
        <Translation>SLK Instructor</Translation>
      </Resources>
      <Resources>
        <ID>LobbyInvalidLearnerAssignmentId</ID>
        <Source>The assignment (ID {0}) does not exist or you may not have permission to access it.</Source>
        <Translation>Заданието (ID {0}) не съществува или нямате достъп до него.</Translation>
      </Resources>
      <Resources>
        <ID>AppPageEditTitle</ID>
        <Source>Edit Assignment</Source>
        <Translation>Редактиране на задание</Translation>
      </Resources>
      <Resources>
        <ID>PackageNotValid</ID>
        <Source>The learning resource is not valid. {0}</Source>
        <Translation>Учебният ресурс е невалиден. {0}</Translation>
      </Resources>
      <Resources>
        <ID>GradingActionHeaderText</ID>
        <Source>Action</Source>
        <Translation>Действие</Translation>
      </Resources>
      <Resources>
        <ID>GradingSuccessStatusUnKnownToolTip</ID>
        <Source>None</Source>
        <Translation>Неизвестен</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureLabelPermissionsDescriptionText</ID>
        <Source>&lt;p style="margin-bottom: 6pt"&gt;Specify the SharePoint permissions that will identify instructors and learners in SLK.&lt;/p&gt;&lt;p style="margin-top: 0pt; margin-bottom: 0pt;"&gt;&lt;ul style="margin-top: 0pt; margin-bottom: 0pt;"&gt;&lt;li style="margin-bottom: 6pt"&gt;To use existing SharePoint permissions to identify instructors and learners, enter the permission names; for example, "Contribute" and "Read".&lt;/li&gt;&lt;li&gt;To create new permissions, enter the permission names and select &lt;b&gt;Create permissions&lt;/b&gt;.&lt;/p&gt;&lt;/ul&gt;&lt;/p&gt;&lt;p style="margin-top: -6pt"&gt;&lt;b&gt;Recommended&lt;/b&gt;&amp;nbsp; Create "SLK Instructor" and "SLK Learner" permissions for new installations.&lt;/p&gt;</Source>
        <Translation>&lt;p style="margin-bottom: 6pt"&gt;Посочете SharePoint правата, които ще описват инструктори и обучаеми в SLK.&lt;/p&gt;&lt;p style="margin-top: 0pt; margin-bottom: 0pt;"&gt;&lt;ul style="margin-top: 0pt; margin-bottom: 0pt;"&gt;&lt;li style="margin-bottom: 6pt"&gt;За да използвате готови SharePoint права, въведете името им. Примерно "Сътрудничество" и "Четене".&lt;/li&gt;&lt;li&gt;За да създадете нови права, въведете имената им и изберете &lt;b&gt;Създай права&lt;/b&gt;.&lt;/p&gt;&lt;/ul&gt;&lt;/p&gt;&lt;p style="margin-top: -6pt"&gt;&lt;b&gt;Препоръки&lt;/b&gt;&amp;nbsp; Създайте "SLK инструктор" и "SLK обучаем" права за новата инсталация.&lt;/p&gt;</Translation>
      </Resources>
      <Resources>
        <ID>LobbyBeginAccessKey</ID>
        <Source>I</Source>
        <Translation>I</Translation>
      </Resources>
      <Resources>
        <ID>GradingCollectAccessKey</ID>
        <Source>C</Source>
        <Translation>C</Translation>
      </Resources>
      <Resources>
        <ID>AlwpDisplaySummaryDisplayName</ID>
        <Source>Show Query Control</Source>
        <Translation>Покажи управлението на въпрос</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureInputDatabaseServerLabelText</ID>
        <Source>Database server:</Source>
        <Translation>Сървър за база данни:</Translation>
      </Resources>
      <Resources>
        <ID>GradingActionSubmittedToolTip</ID>
        <Source>Returns the assignment to the learner for review</Source>
        <Translation>Връща заданието на обучаемия за преглед</Translation>
      </Resources>
      <Resources>
        <ID>AppError</ID>
        <Source>SharePoint Learning Kit Error

{0}</Source>
        <Translation>SharePoint Learning Kit грешка

{0}</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureInputPermissionsTitle</ID>
        <Source>SLK Permissions</Source>
        <Translation>SLK права</Translation>
      </Resources>
      <Resources>
        <ID>AppLearnersNotFound</ID>
        <Source>There are no learners on this site.</Source>
        <Translation>Няма обучаеми на този сайт.</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelDescriptionText</ID>
        <Source>Description</Source>
        <Translation>Описание</Translation>
      </Resources>
      <Resources>
        <ID>SlkSettingsNotFound</ID>
        <Source>SharePoint Learning Kit is not configured correctly -- please contact your system administrator.  (SLK Settings not found for SPSite GUID {0}.)</Source>
        <Translation>SharePoint Learning Kit не е конфигуриран правилно -- моля, свържете се с вашият системен администратор. (не са намерени SLK настройки за SPSite GUID {0}.)</Translation>
      </Resources>
      <Resources>
        <ID>AppGradeOrManage</ID>
        <Source>Grade or manage the assignment </Source>
        <Translation>Оценяване или управление на заданието </Translation>
      </Resources>
      <Resources>
        <ID>GradingSuccessStatusSatisfiedToolTip</ID>
        <Source>Primary objective satisfied</Source>
        <Translation>Основната цел е изпълнена</Translation>
      </Resources>
      <Resources>
        <ID>ActionslblChoose</ID>
        <Source>Choose the site where you'd like to assign this learning resource:</Source>
        <Translation>Изберете сайта, на който искате да зададете този учебен ресурс:</Translation>
      </Resources>
      <Resources>
        <ID>LearnerAssignmentNotInCorrectStateForFinish</ID>
        <Source>LearnerAssignment is in the wrong state or doesn't have a valid attempt for this operation</Source>
        <Translation>LearnerAssignment е в некоректно състояние или липсва правилен опит за извършване на тази операция</Translation>
      </Resources>
      <Resources>
        <ID>GradinglblAutoReturn</ID>
        <Source>The assignment will be returned to the learner automatically.</Source>
        <Translation>Заданието ще бъде върнато автоматично на обучаемия.</Translation>
      </Resources>
      <Resources>
        <ID>PackageNotFoundInDatabase</ID>
        <Source>The e-learning package with identifier {0} does not exist or is inaccessible</Source>
        <Translation>e-learning пакетът с идентификатор {0} не съществува или не е достъпен</Translation>
      </Resources>
      <Resources>
        <ID>GradingActionTextFinal</ID>
        <Source>Reactivate</Source>
        <Translation>Повторно изпълнение</Translation>
      </Resources>
      <Resources>
        <ID>LearnerAssignmentStatusNotStarted</ID>
        <Source>Not Started</Source>
        <Translation>Не е започнато</Translation>
      </Resources>
      <Resources>
        <ID>APPInvalidSite</ID>
        <Source>This Web site is not accessible.</Source>
        <Translation>Този сайт не е достъпен.</Translation>
      </Resources>
      <Resources>
        <ID>SlkExQueryStringNotFound</ID>
        <Source>The {0} parameter is missing or empty.</Source>
        <Translation>Параметърът {0} липсва или е празен.</Translation>
      </Resources>
      <Resources>
        <ID>LobbyPointsNoValuePointsPossible</ID>
        <Source>--/{0:R}</Source>
        <Translation>--/{0:R}</Translation>
      </Resources>
      <Resources>
        <ID>LobbyMarkasCompleteText</ID>
        <Source>Mark as Complete</Source>
        <Translation>Маркирай като изпълнено</Translation>
      </Resources>
      <Resources>
        <ID>GradingCommentsHeaderText</ID>
        <Source>Comments</Source>
        <Translation>Коментари</Translation>
      </Resources>
      <Resources>
        <ID>GradingScoreToolTip</ID>
        <Source>Points</Source>
        <Translation>Точки</Translation>
      </Resources>
      <Resources>
        <ID>ErrorCreatingSPSiteUser</ID>
        <Source>Error creating one or more users in site collection "{0}": {1}</Source>
        <Translation>Грешка при създаването на потребители в колекцията от сайтове "{0}": {1}</Translation>
      </Resources>
      <Resources>
        <ID>ActionsAlreadyInList</ID>
        <Source>The site ({0}) is already in your list. Click the (show all sites) link to see your entire list.</Source>
        <Translation>Сайтът ({0}) вече е в списъкът ви. Натиснете (покажи всички сайтове) връзката,за да видите целия списък.</Translation>
      </Resources>
      <Resources>
        <ID>GradingFinalScoreNotSubmittedToolTip</ID>
        <Source>The learner has not submitted the assignment. To assign a grade, you must collect it.</Source>
        <Translation>Обучаемият не е публикувал заданието. За да поставите оценка, трябва да го получите.</Translation>
      </Resources>
      <Resources>
        <ID>DomainGroupError</ID>
        <Source>Domain group "{0}": {1}</Source>
        <Translation>Домейн група "{0}": {1}</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelAssignmentPropHeader</ID>
        <Source>Specify Assignment Properties</Source>
        <Translation>Описване на свойствата на задание</Translation>
      </Resources>
      <Resources>
        <ID>ActionsShowDetails</ID>
        <Source>(show details...)</Source>
        <Translation>(покажи детайли...)</Translation>
      </Resources>
      <Resources>
        <ID>InvalidDatabaseServerName</ID>
        <Source>Invalid database server name "{0}".  Server names may only contain letters, digits, and underscores.</Source>
        <Translation>Невалидно име на база данни "{0}". Имената на сървърите могат да съдържат само букви, цифри и долна черта.</Translation>
      </Resources>
      <Resources>
        <ID>ActionsSiteRequired</ID>
        <Source>You must type a Web address to add a site to your site list.</Source>
        <Translation>Трябва да въведете Web адрес,за да добавите сайт към вашият списък със сайтове.</Translation>
      </Resources>
      <Resources>
        <ID>LobbyPointsValuePointsPossible</ID>
        <Source>{0:R}/{1:R}</Source>
        <Translation>{0:R}/{1:R}</Translation>
      </Resources>
      <Resources>
        <ID>ActionsItemNotFound</ID>
        <Source>The learning resource does not exist or you may not have permission to access it.</Source>
        <Translation>Учебният ресурс не съществува,или нямате достъп до него.</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelSharePointSiteText</ID>
        <Source>SharePoint Site</Source>
        <Translation>SharePoint сайт</Translation>
      </Resources>
      <Resources>
        <ID>ActionsDraftVersion</ID>
        <Source>The learning resource is a draft. If you assign it, learners may lose access to it once it is published or approved.</Source>
        <Translation>Учебният ресурс е чернова. Ако го зададете, възможно е обучаемите да загубят достъп при публикуването му.</Translation>
      </Resources>
      <Resources>
        <ID>LobbylblScore</ID>
        <Source>Score</Source>
        <Translation>Резултат</Translation>
      </Resources>
      <Resources>
        <ID>LobbylblStart</ID>
        <Source>Start</Source>
        <Translation>Начало</Translation>
      </Resources>
      <Resources>
        <ID>GradingFinalScoreNaNError</ID>
        <Source>The score must be a number.</Source>
        <Translation>Резултатът трябва да е число.</Translation>
      </Resources>
      <Resources>
        <ID>CtrlOKButtonText</ID>
        <Source>OK</Source>
        <Translation>OK</Translation>
      </Resources>
      <Resources>
        <ID>SlkErrorTypeErrorToolTip</ID>
        <Source>Error</Source>
        <Translation>Грешка</Translation>
      </Resources>
      <Resources>
        <ID>ActionsCheckedOutError</ID>
        <Source>You cannot assign the learning resource because it is currently checked out to you. You must check it in before assigning it.</Source>
        <Translation>Не можете да зададете учебния ресурс, защото е заключен от вас. Трябва да го отключите преди да го задавате.</Translation>
      </Resources>
      <Resources>
        <ID>AppCalendarToolTip</ID>
        <Source>Choose date from calendar</Source>
        <Translation>Изберете дата от календара</Translation>
      </Resources>
      <Resources>
        <ID>AppPageCreateConfirmationTitle</ID>
        <Source>Assignment Created</Source>
        <Translation>Заданието е създадено</Translation>
      </Resources>
      <Resources>
        <ID>LobbyPointsValue</ID>
        <Source>{0:R}</Source>
        <Translation>{0:R}</Translation>
      </Resources>
      <Resources>
        <ID>ActionslnkAssignSelf</ID>
        <Source>Assign this learning resource to yourself.</Source>
        <Translation>Задайте този учебен ресурс на вас.</Translation>
      </Resources>
      <Resources>
        <ID>InvalidSlkRole</ID>
        <Source>Invalid or unsupported SlkRole</Source>
        <Translation>Невалидна или неподдържана SlkRole</Translation>
      </Resources>
      <Resources>
        <ID>LobbyCannotChangeState</ID>
        <Source>The current assignment status does not allow the requested action.</Source>
        <Translation>Текущият статус на заданието не позволява това действие.</Translation>
      </Resources>
      <Resources>
        <ID>LobbylblDue</ID>
        <Source>Due</Source>
        <Translation>Срок</Translation>
      </Resources>
      <Resources>
        <ID>GradingEditAccessKey</ID>
        <Source>I</Source>
        <Translation>I</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelInstructorsText</ID>
        <Source>Instructors</Source>
        <Translation>Инструктори</Translation>
      </Resources>
      <Resources>
        <ID>DomainGroupEnumFailed</ID>
        <Source>Domain group enumeration failed for path "{0}"</Source>
        <Translation>Изброяването на домейн групата за пътя "{0}" е неуспешно</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureLinkDefaultSettingsFileText</ID>
        <Source>Click here to download the default SLK Settings file used in new installations</Source>
        <Translation>Натиснете тук, за да запишете файла със стандартните SLK настройки</Translation>
      </Resources>
      <Resources>
        <ID>AlwpWepPartDescription</ID>
        <Source>Use this web part to keep track of your SharePoint Learning Kit assignments.</Source>
        <Translation>Използвайте този уеб компонент за да следите вашите SharePoint Learning Kit задания.</Translation>
      </Resources>
      <Resources>
        <ID>ActionslblOrganization</ID>
        <Source>Organization</Source>
        <Translation>Организация</Translation>
      </Resources>
      <Resources>
        <ID>AlwpQuerySetOverrideDescription</ID>
        <Source>Query or query set to display for all users instead of the default. For example, "LearnerQuerySet" or "InstructorQuerySet".</Source>
        <Translation>Въпрос или серия от въпроси се извеждат за всички потребители вместо за потребителя по подразбиране. Примерно "LearnerQuerySet" или "InstructorQuerySet".</Translation>
      </Resources>
      <Resources>
        <ID>WssEventLogSource</ID>
        <Source>Windows SharePoint Services 3</Source>
        <Translation>Windows SharePoint Services 3</Translation>
      </Resources>
      <Resources>
        <ID>SlkNotEnabled</ID>
        <Source>This site is not configured to use SharePoint Learning Kit. Administrators can use SharePoint Central Administration to configure SharePoint Learning Kit.</Source>
        <Translation>Този сайт не е конфигуриран да използва SharePoint Learning Kit. Администраторите могат да използват SharePoint Central Administration за да конфигурират SharePoint Learning Kit.</Translation>
      </Resources>
      <Resources>
        <ID>GradingActionTextNotSubmitted</ID>
        <Source>Collect</Source>
        <Translation>Събери</Translation>
      </Resources>
      <Resources>
        <ID>AppInstructorRequiredError</ID>
        <Source>The assignment must have at least one instructor.</Source>
        <Translation>Заданието трябва да има поне един инструктор.</Translation>
      </Resources>
      <Resources>
        <ID>ActionsNotInstructor</ID>
        <Source>You cannot assign to the site ({0}) because you are not an instructor on that site.</Source>
        <Translation>Не можете да задавате в сайта ({0}) защото не сте инструктор в него.</Translation>
      </Resources>
      <Resources>
        <ID>AdminGenericException</ID>
        <Source>{0}

More information has been written to the server event log.</Source>
        <Translation>{0}

Повече информация е записана в записките за събитията на сървъра.</Translation>
      </Resources>
      <Resources>
        <ID>GradingStatusInProgressToolTip</ID>
        <Source>View learner work in progress</Source>
        <Translation>Вижте текущите резултати на обучаемия</Translation>
      </Resources>
      <Resources>
        <ID>SlkExWorkFlowSqlDeadLockError</ID>
        <Source>The server is currently busy. Please retry your operation.</Source>
        <Translation>Сървърът в момента е зает. Моля, повторете операцията.</Translation>
      </Resources>
      <Resources>
        <ID>LobbySubmitAccessKey</ID>
        <Source>S</Source>
        <Translation>S</Translation>
      </Resources>
      <Resources>
        <ID>SlkDateFormatSpecifier</ID>
        <Source>{0:D}, {0:t}</Source>
        <Translation>{0:D}, {0:t}</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelStartText</ID>
        <Source>Start</Source>
        <Translation>Начало</Translation>
      </Resources>
      <Resources>
        <ID>ActionsbtnAdd</ID>
        <Source>Add</Source>
        <Translation>Добави</Translation>
      </Resources>
      <Resources>
        <ID>GradingReturnMessage</ID>
        <Source>All learner assignments will be returned to the learners. If you have not graded all the assignments, some learners may receive zero points.</Source>
        <Translation>Всички задания ще бъдат върнати на обучаемите. Ако не сте оценили всички задания, някои обучаеми могат да получат нула точки.</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureInputSiteSelectorDescription</ID>
        <Source>Select a Site Collection to configure.</Source>
        <Translation>Изберете колекция от сайтове за конфигуриране.</Translation>
      </Resources>
      <Resources>
        <ID>AlwpQueryResultError</ID>
        <Source>ERROR</Source>
        <Translation>ERROR</Translation>
      </Resources>
      <Resources>
        <ID>CtrlLabelDistributeAssignmentDesc</ID>
        <Source>Choose instructors and learners for the assignment.</Source>
        <Translation>Изберете инструктори и обучаеми за заданието.</Translation>
      </Resources>
      <Resources>
        <ID>Done</ID>
        <Source>Done</Source>
        <Translation>Готово</Translation>
      </Resources>
      <Resources>
        <ID>ActionsInvalidSite</ID>
        <Source>The site ({0}) is not a valid site on this installation of SharePoint, or you may not have permission to access it.</Source>
        <Translation>Сайтът ({0}) не е валиден сайт в тази инсталация на SharePoint или нямате достъп до него.</Translation>
      </Resources>
      <Resources>
        <ID>ConfigureInputLearnerPermissionsLabelText</ID>
        <Source>Learner permission:</Source>
        <Translation>Права на обучаемия:</Translation>
      </Resources>
      <Resources>
        <ID>SlkUtilitiesPointsValuePointsPossible</ID>
        <Source>{0:R}/{1:R}</Source>
        <Translation>{0:R}/{1:R}</Translation>
      </Resources>
      <Resources>
        <ID>AppConfirmUnCheckCurrentUser</ID>
        <Source>If you uncheck yourself you will no longer be able to grade this assignment, or have access to this assignment’s properties.</Source>
        <Translation>Ако се изключите повече няма да имате възможност да оценявате заданието или няма да имате достъп до неговите свойства.</Translation>
      </Resources>
    </NewDataSet>
  </resources>
  <resources name="Resources.Properties.SlkFrameset.resources" type="StringTable">
    <NewDataSet>
      <MetaData>
        <Name>Resources.Properties.SlkFrameset.resources</Name>
        <Type>StringTable</Type>
      </MetaData>
      <Resources>
        <ID>FRM_SubmitGradingPageBtnHtml</ID>
        <Source>Finish</Source>
        <Translation>Край</Translation>
      </Resources>
      <Resources>
        <ID>HID_GradingFinishedTitle</ID>
        <Source>Grading Finished</Source>
        <Translation>Оценяването завърши</Translation>
      </Resources>
      <Resources>
        <ID>HID_ExecuteViewCompletedSessionMsg</ID>
        <Source>This assignment has been submitted as complete. You cannot make any further changes.</Source>
        <Translation>Това задание е изпълнено. Не можете да правите повече промени.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_PackageNotFoundTitle</ID>
        <Source>Assignment Resource Not Available</Source>
        <Translation>Заданието не е достъпно</Translation>
      </Resources>
      <Resources>
        <ID>FRM_UnexpectedExceptionMsg</ID>
        <Source>An error occurred. More information may be available in the server event log.</Source>
        <Translation>Възникна грешка. Повече информация ще намирите в записките за събитията на сървъра.</Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitGradingPageTitleHtml</ID>
        <Source>Finish Grading?</Source>
        <Translation>Край на оценяването?</Translation>
      </Resources>
      <Resources>
        <ID>FRM_InvalidStatusForViewTitle</ID>
        <Source>Assignment Not Available</Source>
        <Translation>Заданието не е достъпно</Translation>
      </Resources>
      <Resources>
        <ID>FRM_AssignmentNotAvailableMsgHtml</ID>
        <Source>This assignment is not available. &lt;br&gt;&lt;br&gt; This may be because:
    &lt;ul&gt;&lt;li&gt;The assignment does not exist.
    &lt;li&gt;You are accessing an assignment prior to its start date.
    &lt;li&gt;You do not have access to the requested view of the assignment.
    &lt;/ul&gt;
    More information may be available in the server event log.
    </Source>
        <Translation>Заданието не е достъпно. &lt;br&gt;&lt;br&gt; Вероятни причини:
    &lt;ul&gt;&lt;li&gt;Заданието не съществува.
    &lt;li&gt;Опитвате се да го отворите преди началната му дата.
    &lt;li&gt;Нямате достъп по заявеното задание.
    &lt;/ul&gt;
    Повече информация можете да получите от сървърните записки.
    </Translation>
      </Resources>
      <Resources>
        <ID>FRM_CannotDisplayContentTitle</ID>
        <Source>Cannot Display Assignment</Source>
        <Translation>Не може да се покаже заданието</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ReviewNotAvailableMsgHtml</ID>
        <Source>You cannot review this assignment until it has been started by the learner.</Source>
        <Translation>Не можете да прегледате това задание преди да бъде изпълнено от обучаемия.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_SubmitPageBtnHtml</ID>
        <Source>Submit</Source>
        <Translation>Публикувай</Translation>
      </Resources>
      <Resources>
        <ID>FRM_LearnerReviewNotAvailableMsgHtml</ID>
        <Source>You cannot review this assignment until it has been returned.</Source>
        <Translation>Не можете да прегледате това задание преди да бъде публикувано.</Translation>
      </Resources>
      <Resources>
        <ID>HID_SelectActivityTitleHtml</ID>
        <Source>Select an Activity</Source>
        <Translation>Изберете действие</Translation>
      </Resources>
      <Resources>
        <ID>FRM_GradingPageNotUpdated</ID>
        <Source>Changes to this page will no longer be reflected in the grading page when you close this window. To fix this, save your changes and re-open the assignment from the grading page.</Source>
        <Translation>Промените по тази страница повече няма да оказват влияние на страницата с оценка след затварянето на този прозорец. За да избегнете това, запишете промените си и отворете отново заданието от страницата с оценка.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_Title</ID>
        <Source>SharePoint Learning Kit</Source>
        <Translation>SharePoint Learning Kit</Translation>
      </Resources>
      <Resources>
        <ID>FRM_SignInRequiredMsgHtml</ID>
        <Source>You must sign in to access this assignment.</Source>
        <Translation>Трябва да се регистрирате,за да получите достъп до това задание.</Translation>
      </Resources>
      <Resources>
        <ID>CON_InvalidFileExtensionMsgHtml</ID>
        <Source>The attached files listed below are not allowed file types. 
        &lt;br&gt;&lt;br&gt; 
        Invalid files:
        </Source>
        <Translation>Прикачените файлове не са с позволен тип на файла. 
        &lt;br&gt;&lt;br&gt; 
        Невалидни файлове:
        </Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitPageMessageHtml</ID>
        <Source>You cannot make any further changes after you submit this assignment.&lt;br&gt;&lt;br&gt;
        If you have completed the assignment, click &lt;b&gt;Submit&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        If you are not ready to submit the assignment, click &lt;b&gt;Cancel&lt;/b&gt; to return to the previous page.
        </Source>
        <Translation>След като публикувате това задание няма да можете да правите повече промени.&lt;br&gt;&lt;br&gt;
        Ако сте завършили заданието, натиснете &lt;b&gt;Публикувай&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        Ако не сте готови за публикуване на заданието, натиснете &lt;b&gt;Отказ&lt;/b&gt; за да се върнете на предишната страница.
        </Translation>
      </Resources>
      <Resources>
        <ID>FRM_UnexpectedErrorNoException</ID>
        <Source>The assignment cannot be displayed. Try refreshing your browser.</Source>
        <Translation>Заданието не може да се изобрази. Опитайте да опресните браузъра си.</Translation>
      </Resources>
      <Resources>
        <ID>HID_SelectActivityMessageHtml</ID>
        <Source>Select an activity to continue with the assignment.</Source>
        <Translation>Изберете действие за да продължите със заданието.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ResourceNotFound</ID>
        <Source>Resource not found.</Source>
        <Translation>Не е намерен ресурсът.</Translation>
      </Resources>
      <Resources>
        <ID>CON_InvalidFileAttachmentTitleHtml</ID>
        <Source>File Attachment Error</Source>
        <Translation>Грешка с прикачен файл</Translation>
      </Resources>
      <Resources>
        <ID>FRM_DocumentNotFoundTitleHtml</ID>
        <Source>File Not Found</Source>
        <Translation>Файлът не е намерен</Translation>
      </Resources>
      <Resources>
        <ID>HID_SessionSuspendedTitle</ID>
        <Source>Assignment Suspended</Source>
        <Translation>Заданието е преустановено</Translation>
      </Resources>
      <Resources>
        <ID>FRM_AssignmentNotAvailableTitle</ID>
        <Source>Assignment Not Available</Source>
        <Translation>Заданието не е достъпно</Translation>
      </Resources>
      <Resources>
        <ID>HID_SessionAbandonedTitle</ID>
        <Source>Assignment Abandoned</Source>
        <Translation>Заданието е отхвърлено</Translation>
      </Resources>
      <Resources>
        <ID>CON_FilesDontExistHtml</ID>
        <Source>The attached files listed below are empty or do not exist.
        &lt;br&gt;&lt;br&gt; 
        Invalid files:</Source>
        <Translation>Прикачените файлове са празни или не съществуват.
        &lt;br&gt;&lt;br&gt; 
        Невалидни файлове:</Translation>
      </Resources>
      <Resources>
        <ID>FRM_ReviewNotAvailableTitle</ID>
        <Source>Review Not Available</Source>
        <Translation>Прегледът не е разрешен</Translation>
      </Resources>
      <Resources>
        <ID>TOC_SubmitAssignment</ID>
        <Source>Submit Assignment</Source>
        <Translation>Публикуване на задание</Translation>
      </Resources>
      <Resources>
        <ID>HID_GradingFinishedMessage</ID>
        <Source>This grading session is finished. You can return to this assignment later to add or change grading information.</Source>
        <Translation>Оценяването на тази сесия приключи. Можете по-късно да се върнете към това задание.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_AssignmentNotGradableTitle</ID>
        <Source>Grading Not Available</Source>
        <Translation>Оценяването не е разрешено</Translation>
      </Resources>
      <Resources>
        <ID>TOC_SubmitGrading</ID>
        <Source>Finish Grading</Source>
        <Translation>Край на оценяването</Translation>
      </Resources>
      <Resources>
        <ID>HID_ExecuteViewSuspendedSessionMsg</ID>
        <Source>This assignment has been suspended. You can return later to resume the assignment.</Source>
        <Translation>Заданието беше преустановено. Можете да продължите с изпълнението му по-късно.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_SessionIsNotActiveMsg</ID>
        <Source>This assignment has been completed. You cannot make any further changes.</Source>
        <Translation>Заданието беше изпълнено. Не можете да правите повече промени.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_PackageNotFound</ID>
        <Source>The version of the learning resource assigned for this assignment cannot be found because it has been deleted or modified.</Source>
        <Translation>Версията на учебния ресурс за това задание не може да бъде намерена, защото е била изтрита или променена.</Translation>
      </Resources>
      <Resources>
        <ID>HID_MovePreviousFailedHtml</ID>
        <Source>You cannot navigate to the previous page at this time. Click Continue to return to the assignment.</Source>
        <Translation>За момента не можете да се върнете на предишната страница. Натиснете Продължи за да се върнете към заданието.</Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitGradingPageMessageHtml</ID>
        <Source>All grading changes have been saved. &lt;br&gt;&lt;br&gt;
        Click &lt;b&gt;Finish&lt;/b&gt; to end this grading session. You can return to this assignment later to add or change grading information. 
        &lt;br&gt;&lt;br&gt;If you are not ready to finish grading, click &lt;b&gt;Cancel&lt;/b&gt; to return to the previous page.</Source>
        <Translation>Всички промени по оценките бяха записани. &lt;br&gt;&lt;br&gt;
        Click &lt;b&gt;Край&lt;/b&gt; за да приключите с тази сесия. Можете да се върнете към заданието по-късно и да направите допълнителни промени.
        &lt;br&gt;&lt;br&gt;Ако не сте приключили с оценяването, натиснете &lt;b&gt;Отказ&lt;/b&gt; за да се върнете към предишната страница.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_DocumentNotFound</ID>
        <Source>The requested document could not be found.</Source>
        <Translation>Заявеният документ не може да бъде намерен.</Translation>
      </Resources>
      <Resources>
        <ID>CON_InvalidFileAttachmentMsgHtml</ID>
        <Source>Administrators can change the file attachment settings in SharePoint Central Administration by modifying the SharePoint Learning Kit settings file.</Source>
        <Translation>Администраторите могат да променят настройките на прикрепените файлове от SharePoint Central Administration чрез промяна на файла с настройките на SharePoint Learning Kit.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_AssignmentTurnedInMsgHtml</ID>
        <Source>This assignment is not available because it has been submitted as complete.&lt;br&gt;&lt;br&gt; 
    You can review this assignment after it is returned by your instructor.
    </Source>
        <Translation>Заданието не е достъпно, защото е било публикувано като изпълнено.&lt;br&gt;&lt;br&gt; 
    Можете да прегледате заданието след като е върнато от вашия инструктор.
    </Translation>
      </Resources>
      <Resources>
        <ID>FRM_UnexpectedViewRequestHtml</ID>
        <Source>The available session does not match the request view of the assignment.</Source>
        <Translation>Достъпната сесия не съвпада с желания изглед на заданието.</Translation>
      </Resources>
      <Resources>
        <ID>HID_MoveToActivityFailedHtml</ID>
        <Source>You cannot navigate to the selected activity at this time. Click Continue to return to the assignment.</Source>
        <Translation>В момента не можете да преминете към избраната дейност. Натиснете Продължи, за да се върнете към заданието.</Translation>
      </Resources>
      <Resources>
        <ID>POST_SubmitHtml</ID>
        <Source>Submit</Source>
        <Translation>Публикувай</Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitPageMessageNoCurrentActivityHtml</ID>
        <Source>You cannot make any further changes after you submit this assignment.&lt;br&gt;&lt;br&gt;
        If you have completed the assignment, click &lt;b&gt;Submit&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        If you are not ready to submit the assignment, select an activity to continue the assignment.
        </Source>
        <Translation>След публикуването на заданието няма да можете да правите повече промени.&lt;br&gt;&lt;br&gt;
        Ако сте завършили заданието, натиснете &lt;b&gt;Публикувай&lt;/b&gt;.&lt;br&gt;&lt;br&gt;
        Ако не сте готови със заданието, изберете действие за да продължите.
        </Translation>
      </Resources>
      <Resources>
        <ID>HID_ExecuteViewAbandonedSessionMsg</ID>
        <Source>The assignment has been abandoned. You cannot make any further changes.</Source>
        <Translation>Заданието беше прекратено. Не можете да правите повече промени.</Translation>
      </Resources>
      <Resources>
        <ID>POST_ContinueHtml</ID>
        <Source>Cancel</Source>
        <Translation>Отказ</Translation>
      </Resources>
      <Resources>
        <ID>HID_SubmitPageTitleHtml</ID>
        <Source>Submit this Assignment?</Source>
        <Translation>Публикуване на заданието?</Translation>
      </Resources>
      <Resources>
        <ID>HID_MoveNextFailedHtml</ID>
        <Source>You cannot navigate to the next page at this time. Click Continue to return to the assignment.</Source>
        <Translation>В момента не можете да преминете към следващата страница. Натиснете Продължи, за да се върнете към заданието.</Translation>
      </Resources>
      <Resources>
        <ID>FRM_AssignmentCantBeGradedMsgHtml</ID>
        <Source>You cannot grade this assignment until it has been submitted.&lt;br&gt;&lt;br&gt; 
    To enable grading, you can collect the assignment or have the learner submit the assignment.
    </Source>
        <Translation>Не можете да оцените заданието преди да бъде публикувано.&lt;br&gt;&lt;br&gt; 
    За да дадете оценка, трябва да получите заданието или да изчакате обучаемия да го публикува.
    </Translation>
      </Resources>
      <Resources>
        <ID>CON_MaxFileSizeExceededMsgHtml</ID>
        <Source>The attached files listed below are larger than the allowed limit of {0} KB. Reduce the size of these files and try again. 
        &lt;br&gt;&lt;br&gt; 
        Invalid files:
        </Source>
        <Translation>Прикачените файлове са по-големи от позволения лимит от {0} KB. Намалете размера им и опитайте отново. 
        &lt;br&gt;&lt;br&gt; 
        Невалидни файлове:
        </Translation>
      </Resources>
      <Resources>
        <ID>HID_SessionCompletedTitle</ID>
        <Source>Assignment Complete</Source>
        <Translation>Заданието е завършено</Translation>
      </Resources>
    </NewDataSet>
  </resources>
</root>